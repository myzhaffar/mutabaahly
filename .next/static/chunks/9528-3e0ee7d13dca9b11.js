"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9528],{48223:function(e,a,s){var r=s(57437),n=s(2265),t=s(53528),l=s(99376);a.Z=e=>{let{children:a,requiredRole:s}=e,{user:m,profile:u,loading:i}=(0,t.a)(),d=(0,l.useRouter)();return((0,n.useEffect)(()=>{i||m||d.push("/auth"),!i&&m&&u&&s&&u.role!==s&&d.push("/dashboard")},[m,u,i,d,s]),i)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-islamic-500 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}):!m||s&&(null==u?void 0:u.role)!==s?null:(0,r.jsx)(r.Fragment,{children:a})}},82987:function(e,a,s){var r=s(57437),n=s(2265),t=s(27648),l=s(99376),m=s(53528),u=s(14938),i=s(95805),d=s(36883),h=s(67815),b=s(47692),c=s(12381),o=s(96246);a.Z=e=>{var a;let{isMobileMenuOpen:s,setIsMobileMenuOpen:v}=e,f=(0,l.usePathname)(),x=(0,l.useRouter)(),{profile:A,signOut:g}=(0,m.a)();(0,n.useEffect)(()=>{v(!1)},[f,v]),(0,n.useEffect)(()=>{let e=e=>{let a=document.getElementById("teacher-sidebar");s&&a&&!a.contains(e.target)&&v(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[s,v]);let p=async()=>{await g(),x.push("/")};if((null==A?void 0:A.role)!=="teacher")return null;let j=[{href:"/dashboard",label:"Dashboard",icon:u.Z},{href:"/students",label:"Students",icon:i.Z},{href:"/tests/manage",label:"Level Tests",icon:d.Z},{href:"/profile",label:"Profile",icon:h.Z}];return(0,r.jsxs)(r.Fragment,{children:[s&&(0,r.jsx)("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>v(!1),"aria-hidden":"true"}),(0,r.jsxs)("aside",{id:"teacher-sidebar",className:"\n          w-64 min-h-screen bg-gradient-to-r from-green-400 to-teal-500 text-white shadow-lg \n          fixed top-0 left-0 z-40 transform transition-transform duration-300 ease-in-out\n          lg:translate-x-0 ".concat(s?"translate-x-0":"-translate-x-full","\n          overflow-y-auto scrollbar-thin scrollbar-thumb-teal-600 scrollbar-track-transparent\n        "),children:[(0,r.jsx)("div",{className:"sticky top-0 bg-gradient-to-r from-green-400 to-teal-500 pt-6 pb-4 px-5",children:(0,r.jsxs)(t.default,{href:"/dashboard",className:"flex items-center space-x-3",onClick:()=>v(!1),children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-teal-500 to-green-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold text-xl",children:"M"})}),(0,r.jsx)("span",{className:"font-sf-pro font-semibold text-xl text-white",children:"Mutabaahly"})]})}),(0,r.jsx)("nav",{className:"px-5 py-6 space-y-2",children:j.map(e=>{let a=e.icon,s=f===e.href||"/dashboard"!==e.href&&(null==f?void 0:f.startsWith(e.href))&&"/"!==e.href;return(0,r.jsxs)(t.default,{href:e.href,onClick:()=>v(!1),className:"\n                  flex items-center space-x-3 p-3 rounded-xl text-gray-200 \n                  hover:bg-teal-600/50 hover:text-white transition-all duration-150 ease-in-out\n                  ".concat(s?"bg-teal-600/70 text-white shadow-md":"","\n                "),children:[(0,r.jsx)(a,{className:"h-5 w-5 flex-shrink-0"}),(0,r.jsx)("span",{className:"text-base font-medium",children:e.label})]},e.label)})}),(0,r.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 px-5 py-4 bg-teal-600/30",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)(o.qE,{className:"h-10 w-10",children:(0,r.jsx)(o.Q5,{className:"bg-teal-600",children:null==A?void 0:null===(a=A.full_name)||void 0===a?void 0:a.split(" ").map(e=>e[0]).join("").toUpperCase()})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-white truncate",children:null==A?void 0:A.full_name}),(0,r.jsx)("p",{className:"text-xs text-gray-300 truncate",children:"Teacher"})]})]}),(0,r.jsxs)(c.z,{variant:"ghost",className:"w-full justify-start text-gray-200 hover:text-white hover:bg-teal-600/50",onClick:p,children:[(0,r.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})]})}},91560:function(e,a,s){var r=s(57437),n=s(2265),t=s(53528),l=s(99376),m=s(82987),u=s(98605),i=s(58293);a.Z=e=>{let{children:a,breadcrumbs:s}=e,{profile:d,loading:h}=(0,t.a)(),b=(0,l.useRouter)(),[c,o]=(0,n.useState)(!1);return(n.useEffect(()=>{h||(null==d?void 0:d.role)==="teacher"||b.push("/dashboard")},[h,d,b]),h)?(0,r.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-islamic-500"})}):(null==d?void 0:d.role)!=="teacher"?null:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,r.jsxs)("header",{className:"sticky top-0 z-40 bg-white shadow-sm flex items-center justify-between h-16 px-4 lg:px-8 lg:hidden",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-9 h-9 bg-gradient-to-br from-teal-500 to-green-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold text-lg",children:"M"})}),(0,r.jsx)("span",{className:"font-semibold text-lg text-gray-900 hidden sm:inline",children:"Mutabaahly"})]}),(0,r.jsx)("button",{className:"lg:hidden p-2 rounded-md text-teal-700 hover:bg-teal-50",onClick:()=>o(e=>!e),children:(0,r.jsx)(i.Z,{className:"h-7 w-7"})})]}),(0,r.jsx)(m.Z,{isMobileMenuOpen:c,setIsMobileMenuOpen:o}),(0,r.jsxs)("main",{className:"lg:pl-64 min-h-screen",children:[s&&(0,r.jsx)("div",{className:"pt-6 px-4 lg:px-8",children:(0,r.jsx)(u.Z,{items:s})}),(0,r.jsx)("div",{className:"container mx-auto pt-2 pb-6 px-4 lg:px-8",children:(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:a})})]})]})}},98605:function(e,a,s){var r=s(57437);s(2265);var n=s(27648),t=s(10407);a.Z=e=>{let{items:a}=e;return(0,r.jsx)("nav",{className:"flex mb-4","aria-label":"Breadcrumb",children:(0,r.jsx)("ol",{className:"inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse",children:a.map((e,s)=>(0,r.jsx)("li",{className:"inline-flex items-center",children:e.href&&s<a.length-1?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(n.default,{href:e.href,className:"text-sm font-medium text-gray-700 hover:text-blue-600",children:e.label}),(0,r.jsx)(t.Z,{className:"h-4 w-4 text-gray-400 mx-1"})]}):(0,r.jsx)("span",{className:"text-sm font-medium text-gray-500",children:e.label})},s))})})}},28270:function(e,a,s){s.d(a,{B:function(){return n},L:function(){return t}});var r=s(46992);let n=e=>{if(!e||0===e.length)return{percentage:0,last_surah:null,total_verses:0};let a=[...e].sort((e,a)=>new Date(a.date).getTime()-new Date(e.date).getTime()),s=a[0].surah_or_jilid,n=(0,r.Ig)(s);if(!n)return{percentage:0,last_surah:s,total_verses:0};let t=new Date(a[0].date);for(let e=1;e<a.length;e++)if(a[e].surah_or_jilid!==s){t=new Date(a[0].date);break}let l=e.filter(e=>e.surah_or_jilid===s&&new Date(e.date)>=t),m=new Set;for(let e of l)if(e.ayat_or_page){let a=e.ayat_or_page;if(a.includes("-")){let[e,s]=a.split("-").map(e=>parseInt(e.trim()));if(!isNaN(e)&&!isNaN(s)&&s>=e)for(let a=e;a<=s;a++)a<=n.verses&&m.add(a)}else{let e=parseInt(a);!isNaN(e)&&e<=n.verses&&m.add(e)}}let u=m.size;return{percentage:Math.min(Math.round(u/n.verses*100),100),last_surah:s,total_verses:u,start_date:t.toISOString().split("T")[0]}},t=e=>{if(!e||0===e.length)return console.log("No entries provided for progress calculation"),{percentage:0,jilid:null,total_pages:0};let a=[...e].sort((e,a)=>new Date(a.date).getTime()-new Date(e.date).getTime())[0],s=0,r=null;if(a&&(r=a.surah_or_jilid,console.log("Latest entry:",a),a.ayat_or_page)){let e=a.ayat_or_page;if(console.log("Processing page range:",e),e&&e.includes("-")){let[,a]=e.split("-").map(e=>parseInt(e.trim()));isNaN(a)||(s=a)}else if(e){let a=parseInt(e.trim());isNaN(a)||(s=a)}}let n=Math.min(Math.round(s/44*100),100);return console.log("Calculated percentage:",n,"based on page",s,"out of",44),{percentage:n,jilid:r,total_pages:s}}},46992:function(e,a,s){s.d(a,{Ig:function(){return n},n5:function(){return r}});let r=[{number:1,name:"Al-Fatihah",verses:7},{number:2,name:"Al-Baqarah",verses:286},{number:3,name:"Ali 'Imran",verses:200},{number:4,name:"An-Nisa",verses:176},{number:5,name:"Al-Ma'idah",verses:120},{number:6,name:"Al-An'am",verses:165},{number:7,name:"Al-A'raf",verses:206},{number:8,name:"Al-Anfal",verses:75},{number:9,name:"At-Tawbah",verses:129},{number:10,name:"Yunus",verses:109},{number:11,name:"Hud",verses:123},{number:12,name:"Yusuf",verses:111},{number:13,name:"Ar-Ra'd",verses:43},{number:14,name:"Ibrahim",verses:52},{number:15,name:"Al-Hijr",verses:99},{number:16,name:"An-Nahl",verses:128},{number:17,name:"Al-Isra",verses:111},{number:18,name:"Al-Kahf",verses:110},{number:19,name:"Maryam",verses:98},{number:20,name:"Taha",verses:135},{number:21,name:"Al-Anbya",verses:112},{number:22,name:"Al-Hajj",verses:78},{number:23,name:"Al-Mu'minun",verses:118},{number:24,name:"An-Nur",verses:64},{number:25,name:"Al-Furqan",verses:77},{number:26,name:"Ash-Shu'ara",verses:227},{number:27,name:"An-Naml",verses:93},{number:28,name:"Al-Qasas",verses:88},{number:29,name:"Al-'Ankabut",verses:69},{number:30,name:"Ar-Rum",verses:60},{number:31,name:"Luqman",verses:34},{number:32,name:"As-Sajdah",verses:30},{number:33,name:"Al-Ahzab",verses:73},{number:34,name:"Saba",verses:54},{number:35,name:"Fatir",verses:45},{number:36,name:"Ya-Sin",verses:83},{number:37,name:"As-Saffat",verses:182},{number:38,name:"Sad",verses:88},{number:39,name:"Az-Zumar",verses:75},{number:40,name:"Ghafir",verses:85},{number:41,name:"Fussilat",verses:54},{number:42,name:"Ash-Shuraa",verses:53},{number:43,name:"Az-Zukhruf",verses:89},{number:44,name:"Ad-Dukhan",verses:59},{number:45,name:"Al-Jathiyah",verses:37},{number:46,name:"Al-Ahqaf",verses:35},{number:47,name:"Muhammad",verses:38},{number:48,name:"Al-Fath",verses:29},{number:49,name:"Al-Hujurat",verses:18},{number:50,name:"Qaf",verses:45},{number:51,name:"Adh-Dhariyat",verses:60},{number:52,name:"At-Tur",verses:49},{number:53,name:"An-Najm",verses:62},{number:54,name:"Al-Qamar",verses:55},{number:55,name:"Ar-Rahman",verses:78},{number:56,name:"Al-Waqi'ah",verses:96},{number:57,name:"Al-Hadid",verses:29},{number:58,name:"Al-Mujadila",verses:22},{number:59,name:"Al-Hashr",verses:24},{number:60,name:"Al-Mumtahanah",verses:13},{number:61,name:"As-Saff",verses:14},{number:62,name:"Al-Jumu'ah",verses:11},{number:63,name:"Al-Munafiqun",verses:11},{number:64,name:"At-Taghabun",verses:18},{number:65,name:"At-Talaq",verses:12},{number:66,name:"At-Tahrim",verses:12},{number:67,name:"Al-Mulk",verses:30},{number:68,name:"Al-Qalam",verses:52},{number:69,name:"Al-Haqqah",verses:52},{number:70,name:"Al-Ma'arij",verses:44},{number:71,name:"Nuh",verses:28},{number:72,name:"Al-Jinn",verses:28},{number:73,name:"Al-Muzzammil",verses:20},{number:74,name:"Al-Muddaththir",verses:56},{number:75,name:"Al-Qiyamah",verses:40},{number:76,name:"Al-Insan",verses:31},{number:77,name:"Al-Mursalat",verses:50},{number:78,name:"An-Naba",verses:40},{number:79,name:"An-Nazi'at",verses:46},{number:80,name:"Abasa",verses:42},{number:81,name:"At-Takwir",verses:29},{number:82,name:"Al-Infitar",verses:19},{number:83,name:"Al-Mutaffifin",verses:36},{number:84,name:"Al-Inshiqaq",verses:25},{number:85,name:"Al-Buruj",verses:22},{number:86,name:"At-Tariq",verses:17},{number:87,name:"Al-A'la",verses:19},{number:88,name:"Al-Ghashiyah",verses:26},{number:89,name:"Al-Fajr",verses:30},{number:90,name:"Al-Balad",verses:20},{number:91,name:"Ash-Shams",verses:15},{number:92,name:"Al-Layl",verses:21},{number:93,name:"Ad-Duhaa",verses:11},{number:94,name:"Ash-Sharh",verses:8},{number:95,name:"At-Tin",verses:8},{number:96,name:"Al-'Alaq",verses:19},{number:97,name:"Al-Qadr",verses:5},{number:98,name:"Al-Bayyinah",verses:8},{number:99,name:"Az-Zalzalah",verses:8},{number:100,name:"Al-'Adiyat",verses:11},{number:101,name:"Al-Qari'ah",verses:11},{number:102,name:"At-Takathur",verses:8},{number:103,name:"Al-'Asr",verses:3},{number:104,name:"Al-Humazah",verses:9},{number:105,name:"Al-Fil",verses:5},{number:106,name:"Quraysh",verses:4},{number:107,name:"Al-Ma'un",verses:7},{number:108,name:"Al-Kawthar",verses:3},{number:109,name:"Al-Kafirun",verses:6},{number:110,name:"An-Nasr",verses:3},{number:111,name:"Al-Masad",verses:5},{number:112,name:"Al-Ikhlas",verses:4},{number:113,name:"Al-Falaq",verses:5},{number:114,name:"An-Nas",verses:6}],n=e=>{let a=e.toLowerCase().replace(/[''`-]/g,"").replace(/^(al|at|an|ar|ad|as|ash|az)[\s-]*/i,"");return r.find(e=>{let s=e.name.toLowerCase().replace(/[''`-]/g,"").replace(/^(al|at|an|ar|ad|as|ash|az)[\s-]*/i,"");return s===a||s.includes(a)||a.includes(s)})}}}]);