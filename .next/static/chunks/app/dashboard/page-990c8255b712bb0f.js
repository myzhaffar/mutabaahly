(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{20067:function(){},72061:function(){},25308:function(e,t,s){Promise.resolve().then(s.bind(s,94383))},94383:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return L}});var a=s(57437),r=s(2265),l=s(53528),n=s(79820),i=s(95805),d=s(71769),o=s(33327),c=s(70525),u=e=>{let{stats:t}=e;return(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)(n.Zb,{className:"bg-white shadow-sm border-l-4 border-l-blue-500",children:(0,a.jsx)(n.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-full bg-blue-100 mr-4",children:(0,a.jsx)(i.Z,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Students"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.totalStudents})]})]})})}),(0,a.jsx)(n.Zb,{className:"bg-white shadow-sm border-l-4 border-l-green-500",children:(0,a.jsx)(n.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-full bg-green-100 mr-4",children:(0,a.jsx)(d.Z,{className:"h-6 w-6 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg. Tilawah"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[t.avgTilawahProgress,"%"]})]})]})})}),(0,a.jsx)(n.Zb,{className:"bg-white shadow-sm border-l-4 border-l-islamic-500",children:(0,a.jsx)(n.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-full bg-islamic-100 mr-4",children:(0,a.jsx)(o.Z,{className:"h-6 w-6 text-islamic-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg. Hafalan"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[t.avgHafalanProgress,"%"]})]})]})})}),(0,a.jsx)(n.Zb,{className:"bg-white shadow-sm border-l-4 border-l-gold-500",children:(0,a.jsx)(n.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-full bg-gold-100 mr-4",children:(0,a.jsx)(c.Z,{className:"h-6 w-6 text-gold-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.completedStudents})]})]})})})]})},m=s(1072),h=s(99376),x=s(28270),p=s(91560),f=s(74291),g=s(12381),j=s(88455),v=s(40279),N=s(75060),b=s(99397),y=s(23340),w=s(39079),_=s(15291),S=s(10271),C=e=>{let{onStudentAdded:t}=e,[s,n]=(0,r.useState)(!1),[i,d]=(0,r.useState)(!1),[o,c]=(0,r.useState)(null),[u,h]=(0,r.useState)({name:"",group_name:"",teacher:""}),{toast:x}=(0,y.pm)(),{profile:p}=(0,l.a)();if((null==p?void 0:p.role)!=="teacher")return null;let C=async e=>{try{let t=e.name.split(".").pop(),s="".concat(Date.now(),"-").concat(Math.random(),".").concat(t),a="student-photos/".concat(s),{error:r}=await m.O.storage.from("student-photos").upload(a,e);if(r)throw r;let{data:l}=m.O.storage.from("student-photos").getPublicUrl(a);return l.publicUrl}catch(e){return console.error("Error uploading image:",e),null}},E=async e=>{if(e.preventDefault(),(null==p?void 0:p.role)!=="teacher"){x({title:"Error",description:"You don't have permission to add students.",variant:"destructive"});return}d(!0);try{let e=null;if(o&&!(e=await C(o)))throw Error("Failed to upload image");let{error:s}=await m.O.from("students").insert([{...u,photo:e}]);if(s)throw s;x({title:"Success",description:"Student added successfully!"}),h({name:"",group_name:"",teacher:""}),c(null),n(!1),t()}catch(e){console.error("Error adding student:",e),x({title:"Error",description:"Failed to add student. Please try again.",variant:"destructive"})}finally{d(!1)}},k=(e,t)=>{h(s=>({...s,[e]:t}))};return(0,a.jsxs)(f.Vq,{open:s,onOpenChange:n,children:[(0,a.jsx)(f.hg,{asChild:!0,children:(0,a.jsxs)(j.O,{children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Add Student"]})}),(0,a.jsxs)(f.cZ,{className:"sm:max-w-[425px]","aria-describedby":"add-student-description",children:[(0,a.jsxs)(f.fK,{children:[(0,a.jsx)(f.$N,{children:"Add Student"}),(0,a.jsx)(f.Be,{id:"add-student-description",children:"Fill in the details to add a new student."})]}),(0,a.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(N._,{htmlFor:"photo",children:"Profile Photo"}),(0,a.jsx)(w.Z,{onFileSelect:c})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(N._,{htmlFor:"name",children:"Student Name"}),(0,a.jsx)(v.I,{id:"name",value:u.name,onChange:e=>k("name",e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(N._,{htmlFor:"group_name",children:"Group/Class"}),(0,a.jsx)(v.I,{id:"group_name",value:u.group_name,onChange:e=>k("group_name",e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(N._,{htmlFor:"teacher",children:"Teacher"}),(0,a.jsxs)(_.Ph,{value:u.teacher,onValueChange:e=>k("teacher",e),required:!0,children:[(0,a.jsx)(_.i4,{className:"w-full",children:(0,a.jsx)(_.ki,{placeholder:"Select teacher"})}),(0,a.jsx)(_.Bw,{children:S.LQ.map(e=>(0,a.jsx)(_.Ql,{value:e.name,children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(g.z,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),(0,a.jsx)(j.O,{type:"submit",disabled:i,children:i?"Adding...":"Add Student"})]})]})]})]})},E=s(17689),k=s(92735),O=s(48736),T=s(32489),Z=s(49322),A=s(41671),P=s(51817),R=s(2093),F=s(15452),z=s.n(F),D=e=>{let{onStudentsAdded:t}=e,[s,n]=(0,r.useState)(!1),[i,d]=(0,r.useState)(!1),[o,c]=(0,r.useState)(null),[u,h]=(0,r.useState)([]),[x,p]=(0,r.useState)([]),[v,b]=(0,r.useState)({current:0,total:0,success:0,failed:0}),{toast:w}=(0,y.pm)(),{profile:_}=(0,l.a)();if((null==_?void 0:_.role)!=="teacher")return null;let C=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=[];return e.forEach((e,a)=>{let r=t+a;e.name&&0!==e.name.trim().length?e.name.trim().length<2&&s.push({row:r,field:"name",message:"Student name must be at least 2 characters long"}):s.push({row:r,field:"name",message:"Student name is required"}),e.group_name&&0!==e.group_name.trim().length||s.push({row:r,field:"group_name",message:"Group/Class is required"}),e.teacher&&0!==e.teacher.trim().length?S.LQ.some(t=>t.name===e.teacher.trim())||s.push({row:r,field:"teacher",message:'Teacher "'.concat(e.teacher,'" not found in the system')}):s.push({row:r,field:"teacher",message:"Teacher is required"})}),s},F=async e=>{try{var t;let s=null===(t=e.name.split(".").pop())||void 0===t?void 0:t.toLowerCase(),a=[];if("csv"===s){let t=await e.text(),s=z().parse(t,{header:!0,skipEmptyLines:!0,transformHeader:e=>e.trim().toLowerCase().replace(/\s+/g,"_")});if(s.errors.length>0)throw Error("CSV parsing errors: ".concat(s.errors.map(e=>e.message).join(", ")));a=s.data}else if(["xlsx","xls"].includes(s||"")){let t=await e.arrayBuffer(),s=R.ij(t,{type:"array"}),r=s.SheetNames[0],l=s.Sheets[r],n=R.P6.sheet_to_json(l,{header:1});if(n.length<2)throw Error("Excel file must have at least a header row and one data row");let i=n[0].map(e=>null==e?void 0:e.toString().toLowerCase().replace(/\s+/g,"_"));a=n.slice(1).map(e=>{let t={};return i.forEach((s,a)=>{void 0!==e[a]&&null!==e[a]&&(t[s]=e[a].toString().trim())}),{name:t.name||"",group_name:t.group_name||"",teacher:t.teacher||"",grade:t.grade}})}else throw Error("Unsupported file format. Please upload a CSV or Excel file.");let r=C(a,2);p(r),h(a),r.length>0?w({title:"Validation Errors",description:"Found ".concat(r.length," validation errors. Please fix them before uploading."),variant:"destructive"}):w({title:"File Processed",description:"Successfully processed ".concat(a.length," students. Ready to upload.")})}catch(e){console.error("Error processing file:",e),w({title:"Error",description:e instanceof Error?e.message:"Failed to process file",variant:"destructive"})}},D=async()=>{if(o&&0!==u.length&&!(x.length>0)){d(!0),b({current:0,total:u.length,success:0,failed:0});try{let e=u.map(e=>{var t;return{name:e.name.trim(),group_name:e.group_name.trim(),teacher:e.teacher.trim(),grade:(null===(t=e.grade)||void 0===t?void 0:t.trim())||null}}),s=0,a=0;for(let t=0;t<e.length;t+=10){let r=e.slice(t,t+10),{error:l}=await m.O.from("students").insert(r);l?(console.error("Error inserting batch:",l),a+=r.length):s+=r.length,b(e=>({...e,current:t+r.length,success:s,failed:a}))}s>0?(w({title:"Upload Complete",description:"Successfully added ".concat(s," students").concat(a>0?", ".concat(a," failed"):"",".")}),n(!1),t()):w({title:"Upload Failed",description:"Failed to add any students. Please try again.",variant:"destructive"})}catch(e){console.error("Error uploading students:",e),w({title:"Error",description:"Failed to upload students. Please try again.",variant:"destructive"})}finally{d(!1)}}};return(0,a.jsxs)(f.Vq,{open:s,onOpenChange:n,children:[(0,a.jsx)(f.hg,{asChild:!0,children:(0,a.jsxs)(g.z,{variant:"outline",className:"flex items-center gap-2",children:[(0,a.jsx)(E.Z,{className:"h-4 w-4"}),"Bulk Upload"]})}),(0,a.jsxs)(f.cZ,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(f.fK,{children:[(0,a.jsx)(f.$N,{children:"Bulk Upload Students"}),(0,a.jsx)(f.Be,{children:"Upload an Excel or CSV file to add multiple students at once."})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(N._,{htmlFor:"file-input",children:"Upload File"}),(0,a.jsxs)(g.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e=R.P6.json_to_sheet([{name:"Ahmad Ali",group_name:"Class A",teacher:"Pak Muzhaffar"},{name:"Fatima Zahra",group_name:"Class B",teacher:"Bu Titin"},{name:"Muhammad Hassan",group_name:"Class A",teacher:"Pak Heri"},{name:"Aisha Rahman",group_name:"Class C",teacher:"Bu Liana"},{name:"Yusuf Ibrahim",group_name:"Class B",teacher:"Bu Witri"}],{header:["name","group_name","teacher"]}),t=R.P6.book_new();R.P6.book_append_sheet(t,e,"Students Template"),R.NC(t,"students_template.xlsx")},className:"flex items-center gap-2",children:[(0,a.jsx)(k.Z,{className:"h-4 w-4"}),"Download Template"]})]}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,a.jsx)("input",{id:"file-input",type:"file",accept:".csv,.xlsx,.xls",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];s&&(c(s),h([]),p([]),b({current:0,total:0,success:0,failed:0}),F(s))},className:"hidden"}),o?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(O.Z,{className:"h-8 w-8 mx-auto text-green-500"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:o.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[(o.size/1024).toFixed(1)," KB"]}),(0,a.jsxs)(g.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{c(null),h([]),p([]),b({current:0,total:0,success:0,failed:0});let e=document.getElementById("file-input");e&&(e.value="")},className:"flex items-center gap-2",children:[(0,a.jsx)(T.Z,{className:"h-4 w-4"}),"Remove File"]})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(E.Z,{className:"h-8 w-8 mx-auto text-gray-400"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Click to upload or drag and drop"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"CSV, XLSX, or XLS files only"}),(0,a.jsx)(g.z,{type:"button",variant:"outline",onClick:()=>{var e;return null===(e=document.getElementById("file-input"))||void 0===e?void 0:e.click()},children:"Choose File"})]})]})]}),x.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-600",children:[(0,a.jsx)(Z.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{className:"font-medium",children:["Validation Errors (",x.length,")"]})]}),(0,a.jsxs)("div",{className:"max-h-32 overflow-y-auto space-y-1",children:[x.slice(0,5).map((e,t)=>(0,a.jsxs)("div",{className:"text-xs text-red-600 bg-red-50 p-2 rounded",children:["Row ",e.row,": ",e.field," - ",e.message]},t)),x.length>5&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["... and ",x.length-5," more errors"]})]})]}),u.length>0&&0===x.length&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[(0,a.jsx)(A.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{className:"font-medium",children:["Preview (",u.length," students)"]})]}),(0,a.jsxs)("div",{className:"max-h-32 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs font-medium text-gray-600 border-b pb-1",children:[(0,a.jsx)("div",{children:"Name"}),(0,a.jsx)("div",{children:"Group"}),(0,a.jsx)("div",{children:"Teacher"})]}),u.slice(0,5).map((e,t)=>(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs border-b py-1",children:[(0,a.jsx)("div",{children:e.name}),(0,a.jsx)("div",{children:e.group_name}),(0,a.jsx)("div",{children:e.teacher})]},t)),u.length>5&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 pt-1",children:["... and ",u.length-5," more students"]})]})]}),v.total>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Upload Progress"}),(0,a.jsxs)("span",{children:[v.current,"/",v.total]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(v.current/v.total*100,"%")}})}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-600",children:[(0,a.jsxs)("span",{children:["Success: ",v.success]}),(0,a.jsxs)("span",{children:["Failed: ",v.failed]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(g.z,{type:"button",variant:"outline",onClick:()=>n(!1),disabled:i,children:"Cancel"}),(0,a.jsx)(j.O,{type:"button",onClick:D,disabled:i||!o||0===u.length||x.length>0,children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):"Upload Students"})]})]})]})]})},I=e=>{let{className:t,classStudents:s}=e,r=(0,h.useRouter)(),l=function(e){let t=["bg-gradient-to-br from-emerald-100 to-emerald-50","bg-gradient-to-br from-blue-100 to-blue-50","bg-gradient-to-br from-yellow-100 to-yellow-50","bg-gradient-to-br from-pink-100 to-pink-50","bg-gradient-to-br from-purple-100 to-purple-50","bg-gradient-to-br from-orange-100 to-orange-50"],s=0;for(let t=0;t<e.length;t++)s=e.charCodeAt(t)+((s<<5)-s);return t[Math.abs(s)%t.length]}(t);return(0,a.jsx)("div",{className:"relative rounded-2xl shadow-md hover:shadow-xl transition-all duration-200 ".concat(l),tabIndex:0,"aria-label":"View class ".concat(t),children:(0,a.jsxs)("div",{className:"p-6 min-h-[170px] flex flex-col justify-between h-full",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,a.jsx)("span",{className:"text-lg font-bold text-gray-900",children:t})}),(0,a.jsxs)("div",{className:"text-xs text-gray-400 mb-4",children:[s.length," students"]})]}),(0,a.jsx)("div",{className:"flex justify-end mt-6",children:(0,a.jsx)("button",{className:"w-full py-2 rounded-full bg-emerald-500 hover:bg-emerald-600 text-white font-semibold text-sm shadow transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-offset-2",onClick:()=>r.push("/class/".concat(encodeURIComponent(t))),children:"View Students in Class"})})]})})},V=s(96657);let B=()=>(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-6",children:Array.from({length:4}).map((e,t)=>(0,a.jsx)("div",{className:"bg-gray-100 rounded-lg h-24 animate-pulse"},t))}),U=()=>(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:4}).map((e,t)=>(0,a.jsx)("div",{className:"bg-gray-100 rounded-lg h-40 animate-pulse"},t))});var M=()=>{let{user:e,profile:t,loading:s}=(0,l.a)(),n=(0,h.useRouter)(),[i,d]=(0,r.useState)([]),[o,c]=(0,r.useState)(!0),[f]=(0,r.useState)(""),[g]=(0,r.useState)({classes:[]}),[j,v]=(0,r.useState)({totalStudents:0,avgHafalanProgress:0,avgTilawahProgress:0,completedStudents:0});(0,r.useEffect)(()=>{e&&t?N():s||e||n.push("/auth")},[e,t,s,n]);let N=async()=>{try{let{data:e,error:t}=await m.O.from("students").select("*");if(t){console.error("Error fetching students:",t);return}let s=await Promise.all((e||[]).map(async e=>{try{let{data:t,error:s}=await m.O.from("progress_entries").select("*").eq("student_id",e.id).eq("type","hafalan");s&&console.error("Error fetching hafalan entries for student ".concat(e.id," (").concat(e.name,"):"),s);let{data:a,error:r}=await m.O.from("progress_entries").select("*").eq("student_id",e.id).eq("type","tilawah");r&&console.error("Error fetching tilawah entries for student ".concat(e.id," (").concat(e.name,"):"),r);let l=(0,x.B)(t||[]),n=(0,x.L)(a||[]);if(t&&t.length>0&&!s){let{error:t}=await m.O.from("hafalan_progress").upsert({student_id:e.id,percentage:l.percentage,last_surah:l.last_surah,updated_at:new Date().toISOString()});t&&console.error("Error upserting hafalan progress for student ".concat(e.id," (").concat(e.name,"):"),t)}if(a&&a.length>0&&!r){let{error:t}=await m.O.from("tilawah_progress").upsert({student_id:e.id,percentage:n.percentage,jilid:n.jilid,updated_at:new Date().toISOString()});t&&console.error("Error upserting tilawah progress for student ".concat(e.id," (").concat(e.name,"):"),t)}return{...e,hafalan_progress:l.percentage>0?{percentage:l.percentage,last_surah:l.last_surah}:null,tilawah_progress:n.percentage>0?{percentage:n.percentage,jilid:n.jilid}:null}}catch(t){return console.error("Failed to process or update progress for student ".concat(e.id," (").concat(e.name,"):"),t),{...e,hafalan_progress:null,tilawah_progress:null}}}));d(s);let a=s.length,r=s.reduce((e,t)=>{var s;return e+((null===(s=t.hafalan_progress)||void 0===s?void 0:s.percentage)||0)},0)/a,l=s.reduce((e,t)=>{var s;return e+((null===(s=t.tilawah_progress)||void 0===s?void 0:s.percentage)||0)},0)/a,n=s.filter(e=>{var t,s;return 100===((null===(t=e.hafalan_progress)||void 0===t?void 0:t.percentage)||0)&&100===((null===(s=e.tilawah_progress)||void 0===s?void 0:s.percentage)||0)}).length;v({totalStudents:a,avgHafalanProgress:Math.round(r),avgTilawahProgress:Math.round(l),completedStudents:n})}catch(e){console.error("Error in fetchStudents:",e)}finally{c(!1)}};(0,r.useEffect)(()=>{},[i,f,g]);let b=()=>{N()},y=i.reduce((e,t)=>(e[t.group_name]||(e[t.group_name]=[]),e[t.group_name].push(t),e),{});return(null==t?void 0:t.role)==="teacher"?(0,a.jsx)(p.Z,{breadcrumbs:[{label:"Dashboard"}],children:(0,a.jsx)("div",{className:"container mx-auto px-0 py-0 md:px-6 md:py-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8 gap-4 pt-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:["Welcome back, ",null==t?void 0:t.full_name]}),(0,a.jsx)("p",{className:"text-gray-600",children:"Teacher Dashboard"})]}),(0,a.jsxs)("div",{className:"flex justify-center gap-2 sm:justify-end",children:[(0,a.jsx)(D,{onStudentsAdded:b}),(0,a.jsx)(C,{onStudentAdded:b})]})]}),o?(0,a.jsx)(B,{}):(0,a.jsx)(u,{stats:j}),(0,a.jsx)("div",{className:"mb-6",children:o?(0,a.jsx)(U,{}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Object.entries(y).map(e=>{let[t,s]=e;return(0,a.jsx)(I,{className:t,classStudents:s},t)})})})]})})}):(0,a.jsx)(V.Z,{breadcrumbs:[{label:"Dashboard"}],children:(0,a.jsx)("div",{className:"container mx-auto px-0 py-0 md:px-6 md:py-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,a.jsxs)("div",{className:"mb-8 pt-2",children:[(0,a.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Welcome back, ",null==t?void 0:t.full_name]}),(0,a.jsx)("p",{className:"text-gray-600",children:"Parent Dashboard"})]})}),o?(0,a.jsx)(B,{}):(0,a.jsx)(u,{stats:j})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"My Children's Overview"})}),o?(0,a.jsx)(U,{}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Object.entries(y).map(e=>{let[t,s]=e;return 0===s.length?null:(0,a.jsx)(I,{className:t,classStudents:s},t)})})]})]})})})},q=s(48223);function L(){return(0,a.jsx)(q.Z,{children:(0,a.jsx)(M,{})})}},74291:function(e,t,s){"use strict";s.d(t,{$N:function(){return f},Be:function(){return g},GG:function(){return u},Vq:function(){return d},cN:function(){return p},cZ:function(){return h},fK:function(){return x},hg:function(){return o}});var a=s(57437),r=s(2265),l=s(49027),n=s(32489),i=s(93448);let d=l.fC,o=l.xz,c=l.h_,u=l.x8,m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});m.displayName=l.aV.displayName;let h=r.forwardRef((e,t)=>{let{className:s,children:r,...d}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(l.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...d,children:[r,(0,a.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=l.VY.displayName;let x=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};x.displayName="DialogHeader";let p=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};p.displayName="DialogFooter";let f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});f.displayName=l.Dx.displayName;let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...r})});g.displayName=l.dk.displayName},39079:function(e,t,s){"use strict";var a=s(57437),r=s(2265),l=s(12381),n=s(32489),i=s(17689),d=s(93448);t.Z=e=>{let{onFileSelect:t,currentImage:s,className:o}=e,c=(0,r.useRef)(null),[u,m]=(0,r.useState)(s||null);return(0,a.jsxs)("div",{className:(0,d.cn)("space-y-2",o),children:[(0,a.jsx)("input",{ref:c,type:"file",accept:"image/*",onChange:e=>{var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];if(a){let e=new FileReader;e.onload=e=>{var t;m(null===(t=e.target)||void 0===t?void 0:t.result)},e.readAsDataURL(a),t(a)}},className:"hidden"}),u?(0,a.jsxs)("div",{className:"relative inline-block",children:[(0,a.jsx)("img",{src:u,alt:"Preview",className:"w-20 h-20 rounded-full object-cover border-2 border-gray-200"}),(0,a.jsx)(l.z,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 p-0 rounded-full",onClick:()=>{m(null),t(null),c.current&&(c.current.value="")},children:(0,a.jsx)(n.Z,{className:"h-3 w-3"})})]}):(0,a.jsx)(l.z,{type:"button",variant:"outline",onClick:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.click()},className:"w-20 h-20 rounded-full border-dashed",children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})]})}},88455:function(e,t,s){"use strict";s.d(t,{O:function(){return i}});var a=s(57437),r=s(2265),l=s(12381),n=s(93448);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.z,{className:(0,n.cn)("bg-gradient-to-r from-emerald-500 to-teal-400 hover:opacity-90 text-white",s),ref:t,...r})});i.displayName="GradientButton"},40279:function(e,t,s){"use strict";s.d(t,{I:function(){return n}});var a=s(57437),r=s(2265),l=s(93448);let n=r.forwardRef((e,t)=>{let{className:s,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...n})});n.displayName="Input"},75060:function(e,t,s){"use strict";s.d(t,{_:function(){return o}});var a=s(57437),r=s(2265),l=s(6394),n=s(90535),i=s(93448);let d=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.f,{ref:t,className:(0,i.cn)(d(),s),...r})});o.displayName=l.f.displayName},15291:function(e,t,s){"use strict";s.d(t,{Bw:function(){return p},Ph:function(){return c},Ql:function(){return f},i4:function(){return m},ki:function(){return u}});var a=s(57437),r=s(2265),l=s(93402),n=s(40875),i=s(22135),d=s(30401),o=s(93448);let c=l.fC;l.ZA;let u=l.B4,m=r.forwardRef((e,t)=>{let{className:s,children:r,...i}=e;return(0,a.jsxs)(l.xz,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...i,children:[r,(0,a.jsx)(l.JO,{asChild:!0,children:(0,a.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=l.xz.displayName;let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.u_,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});h.displayName=l.u_.displayName;let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.$G,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})});x.displayName=l.$G.displayName;let p=r.forwardRef((e,t)=>{let{className:s,children:r,position:n="popper",...i}=e;return(0,a.jsx)(l.h_,{children:(0,a.jsxs)(l.VY,{ref:t,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...i,children:[(0,a.jsx)(h,{}),(0,a.jsx)(l.l_,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(x,{})]})})});p.displayName=l.VY.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.__,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=l.__.displayName;let f=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(l.ck,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.wU,{children:(0,a.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(l.eT,{children:r})]})});f.displayName=l.ck.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.Z0,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=l.Z0.displayName},23340:function(e,t,s){"use strict";s.d(t,{pm:function(){return m}});var a=s(2265);let r=0,l=new Map,n=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],o={toasts:[]};function c(e){o=i(o,e),d.forEach(e=>{e(o)})}function u(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(o);return a.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}}},function(e){e.O(0,[1425,3621,8977,8925,2426,5289,6825,2804,9528,8887,2971,2117,1744],function(){return e(e.s=25308)}),_N_E=e.O()}]);