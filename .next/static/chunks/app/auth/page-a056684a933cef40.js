(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1235],{64354:function(e,t,r){Promise.resolve().then(r.bind(r,1758))},42208:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},89345:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},92369:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1758:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var a=r(57437),s=r(2265),n=r(12381),i=r(40279),l=r(75060),o=r(79820),c=r(53528),d=r(99376),u=r(23340),f=r(89345);let m=(0,r(79205).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var h=r(42208),p=r(92369),x=r(14938),g=r(15291),y=r(1072),v=()=>{let[e,t]=(0,s.useState)(!0),[r,v]=(0,s.useState)(""),[b,w]=(0,s.useState)(""),[j,N]=(0,s.useState)(""),[S,_]=(0,s.useState)(""),[I,k]=(0,s.useState)(!1),[O,E]=(0,s.useState)(!1),{signIn:A,signUp:C,user:T}=(0,c.a)(),{toast:R}=(0,u.pm)(),Z=(0,d.useRouter)(),z=["teacher","parent"],M=["Stay connect with Al Qur'an","The best among you are those who learn the Qur'an and teach it.","Let the Qur'an be your companion every day.","Knowledge is light, and the Qur'an is its source."],[D,P]=(0,s.useState)(0);(0,s.useEffect)(()=>{let e=setInterval(()=>{P(e=>(e+1)%M.length)},4e3);return()=>clearInterval(e)},[M.length]),(0,s.useEffect)(()=>{T&&Z.push("/")},[T,Z]);let F=async t=>{if(t.preventDefault(),k(!0),!e&&!z.includes(S)){R({title:"Role Required",description:"Please select your role (Teacher or Parent) to continue.",variant:"destructive"}),k(!1);return}try{if(e){let{error:e}=await A(r,b);e?R({title:"Login Error",description:e.message,variant:"destructive"}):R({title:"Success",description:"Logged in successfully!"})}else{let{error:e}=await C(r,b,j,S);e?R({title:"Sign Up Error",description:e.message,variant:"destructive"}):R({title:"Success",description:"Account created successfully! Please check your email to verify your account."})}}catch(e){R({title:"Error",description:"An unexpected error occurred",variant:"destructive"})}finally{k(!1)}},V=async()=>{await y.O.auth.signInWithOAuth({provider:"google"})};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-teal-50 flex items-center justify-center p-4",children:(0,a.jsx)("div",{className:"w-full max-w-md",children:(0,a.jsx)(o.Zb,{className:"rounded-2xl shadow-xl border-0",children:(0,a.jsxs)(o.aY,{className:"p-8",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center mb-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-green-400 to-teal-500 flex items-center justify-center mb-4",children:(0,a.jsx)("span",{className:"text-white text-3xl font-bold",children:"Ù‚"})}),(0,a.jsx)("div",{className:"text-gray-500 text-base font-medium text-center mb-2 transition-opacity duration-700",children:M[D]},D)]}),(0,a.jsxs)("button",{type:"button",className:"w-full flex items-center justify-center gap-2 border border-gray-200 rounded-lg py-3 font-medium text-gray-700 hover:bg-gray-50 transition mb-6",onClick:V,children:[(0,a.jsx)("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"Google",className:"h-5 w-5"}),"Continue with Google"]}),(0,a.jsxs)("div",{className:"flex items-center my-6",children:[(0,a.jsx)("div",{className:"flex-1 h-px bg-gray-200"}),(0,a.jsx)("span",{className:"mx-3 text-gray-400 text-sm",children:"Or continue with email"}),(0,a.jsx)("div",{className:"flex-1 h-px bg-gray-200"})]}),(0,a.jsxs)("form",{onSubmit:F,className:"space-y-4",children:[!e&&(0,a.jsxs)("div",{children:[(0,a.jsx)(l._,{htmlFor:"fullName",children:"Full Name"}),(0,a.jsx)(i.I,{id:"fullName",type:"text",value:j,onChange:e=>N(e.target.value),required:!0,placeholder:"Enter your full name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l._,{htmlFor:"email",children:"Email"}),(0,a.jsxs)("div",{className:"relative mt-1",children:[(0,a.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:(0,a.jsx)(f.Z,{className:"h-5 w-5"})}),(0,a.jsx)(i.I,{id:"email",type:"email",value:r,onChange:e=>v(e.target.value),required:!0,placeholder:"Enter your email",className:"pl-10"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l._,{htmlFor:"password",children:"Password"}),(0,a.jsxs)("div",{className:"relative mt-1",children:[(0,a.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:(0,a.jsx)(m,{className:"h-5 w-5"})}),(0,a.jsx)(i.I,{id:"password",type:O?"text":"password",value:b,onChange:e=>w(e.target.value),required:!0,placeholder:"Enter your password",className:"pl-10 pr-10"}),(0,a.jsx)("button",{type:"button",tabIndex:-1,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",onClick:()=>E(e=>!e),children:(0,a.jsx)(h.Z,{className:"h-5 w-5"})})]})]}),!e&&(0,a.jsxs)("div",{children:[(0,a.jsx)(l._,{htmlFor:"role",children:"Role"}),(0,a.jsxs)("div",{className:"relative mt-1",children:[(0,a.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:(0,a.jsx)(p.Z,{className:"h-5 w-5"})}),(0,a.jsxs)(g.Ph,{value:S,onValueChange:e=>{z.includes(e)&&_(e)},children:[(0,a.jsx)(g.i4,{className:"pl-10",children:(0,a.jsx)(g.ki,{placeholder:"Select role"})}),(0,a.jsxs)(g.Bw,{children:[(0,a.jsx)(g.Ql,{value:"teacher",children:"Teacher/Mentor"}),(0,a.jsx)(g.Ql,{value:"parent",children:"Parent"})]})]})]})]}),(0,a.jsx)(n.z,{type:"submit",className:"w-full text-white text-lg font-semibold rounded-lg py-3 flex items-center justify-center gap-2\n                  ".concat(e?"bg-gradient-to-r from-emerald-500 to-teal-400 hover:opacity-90":"bg-gradient-to-r from-orange-400 to-orange-600 hover:opacity-90"),disabled:I,children:I?"Please wait...":e?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("span",{children:"Sign In"})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("span",{children:"Sign Up"})})})]}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsx)("button",{type:"button",onClick:()=>t(!e),className:"text-blue-600 hover:underline text-sm font-medium",children:e?"Don't have an account? Sign up":"Already have an account? Sign in"})}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsxs)(n.z,{type:"button",variant:"outline",className:"w-full flex items-center justify-center gap-2 py-3 rounded-lg text-gray-700 border-gray-300",onClick:()=>Z.push("/"),children:[(0,a.jsx)(x.Z,{className:"h-5 w-5 mr-1"})," Back to Home"]})})]})})})})};function b(){return(0,a.jsx)(v,{})}},12381:function(e,t,r){"use strict";r.d(t,{d:function(){return o},z:function(){return c}});var a=r(57437),s=r(2265),n=r(37053),i=r(90535),l=r(93448);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 px-3",lg:"h-11 px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:s,size:i,className:r})),ref:t,...d})});c.displayName="Button"},79820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},Zb:function(){return i},aY:function(){return c},ll:function(){return o}});var a=r(57437),s=r(2265),n=r(93448);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})}).displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},40279:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(57437),s=r(2265),n=r(93448);let i=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...i})});i.displayName="Input"},75060:function(e,t,r){"use strict";r.d(t,{_:function(){return c}});var a=r(57437),s=r(2265),n=r(6394),i=r(90535),l=r(93448);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.f,{ref:t,className:(0,l.cn)(o(),r),...s})});c.displayName=n.f.displayName},15291:function(e,t,r){"use strict";r.d(t,{Bw:function(){return p},Ph:function(){return d},Ql:function(){return x},i4:function(){return f},ki:function(){return u}});var a=r(57437),s=r(2265),n=r(93402),i=r(40875),l=r(22135),o=r(30401),c=r(93448);let d=n.fC;n.ZA;let u=n.B4,f=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,a.jsxs)(n.xz,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...l,children:[s,(0,a.jsx)(n.JO,{asChild:!0,children:(0,a.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=n.xz.displayName;let m=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.u_,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})});m.displayName=n.u_.displayName;let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.$G,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});h.displayName=n.$G.displayName;let p=s.forwardRef((e,t)=>{let{className:r,children:s,position:i="popper",...l}=e;return(0,a.jsx)(n.h_,{children:(0,a.jsxs)(n.VY,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...l,children:[(0,a.jsx)(m,{}),(0,a.jsx)(n.l_,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(h,{})]})})});p.displayName=n.VY.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.__,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...s})}).displayName=n.__.displayName;let x=s.forwardRef((e,t)=>{let{className:r,children:s,...i}=e;return(0,a.jsxs)(n.ck,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.wU,{children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(n.eT,{children:s})]})});x.displayName=n.ck.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",r),...s})}).displayName=n.Z0.displayName},14362:function(e,t,r){"use strict";r.d(t,{H:function(){return l},V:function(){return i}});var a=r(57437),s=r(2265),n=r(1072);let i=(0,s.createContext)(void 0),l=e=>{let{children:t}=e,[r,l]=(0,s.useState)(null),[o,c]=(0,s.useState)(null),[d,u]=(0,s.useState)(null),[f,m]=(0,s.useState)(!0),h=async e=>{try{let{data:t,error:r}=await n.O.from("profiles").select("*").eq("id",e).single();if(r)console.error("Error fetching profile:",r);else if(t){let e={id:t.id,full_name:t.full_name,role:t.role,email:t.email,avatar_url:t.avatar_url,created_at:t.created_at,updated_at:t.updated_at};u(e)}}catch(e){console.error("Error in profile fetch:",e)}};(0,s.useEffect)(()=>{let{data:{subscription:e}}=n.O.auth.onAuthStateChange(async(e,t)=>{var r;console.log("Auth state changed:",e,t),c(t),l(null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null),(null==t?void 0:t.user)?setTimeout(async()=>{await h(t.user.id),m(!1)},0):(u(null),m(!1))});return n.O.auth.getSession().then(e=>{var t;let{data:{session:r}}=e;c(r),l(null!==(t=null==r?void 0:r.user)&&void 0!==t?t:null),r||m(!1)}),()=>e.unsubscribe()},[]);let p=async()=>{r&&await h(r.id)},x=async(e,t)=>{let{data:r,error:a}=await n.O.auth.signInWithPassword({email:e,password:t});return{data:r,error:a}},g=async(e,t,r,a)=>{let{data:s,error:i}=await n.O.auth.signUp({email:e,password:t,options:{data:{full_name:r,role:a}}});if(s.user&&!i)try{await v(s.user,a)}catch(e){return console.error("Error creating profile:",e),await n.O.auth.admin.deleteUser(s.user.id),{data:{user:null,session:null},error:e}}return{data:s,error:i}},y=async()=>{try{let{error:e}=await n.O.auth.signOut();if(e)throw e;return l(null),c(null),u(null),{error:null}}catch(e){return console.error("Error signing out:",e),{error:e}}},v=async(e,t)=>{let{data:r,error:a}=await n.O.from("profiles").insert([{id:e.id,full_name:e.user_metadata.full_name||"",role:t,email:e.email||void 0,avatar_url:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(a)throw console.error("Error creating profile:",a),a;return r};return(0,a.jsx)(i.Provider,{value:{user:r,session:o,profile:d,loading:f,signIn:x,signUp:g,signOut:y,refreshProfile:p},children:t})}},53528:function(e,t,r){"use strict";r.d(t,{a:function(){return n}});var a=r(2265),s=r(14362);let n=()=>{let e=(0,a.useContext)(s.V);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},23340:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var a=r(2265);let s=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=l(c,e),o.forEach(e=>{e(c)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=a.useState(c);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},1072:function(e,t,r){"use strict";r.d(t,{O:function(){return a}});let a=(0,r(96580).eI)("https://isyhakwwgdozgtlquzis.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlzeWhha3d3Z2Rvemd0bHF1emlzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY5NTY3NzcsImV4cCI6MjA2MjUzMjc3N30.-2Ya944q8mgJzRAuhMpRAWgxWVmt2yc3CqM0jjgFuuY")},93448:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(61994),s=r(53335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}}},function(e){e.O(0,[3621,8977,5289,2971,2117,1744],function(){return e(e.s=64354)}),_N_E=e.O()}]);