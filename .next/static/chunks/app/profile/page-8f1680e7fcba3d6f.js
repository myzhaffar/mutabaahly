(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4178],{84020:function(e,t,a){Promise.resolve().then(a.bind(a,85210))},71533:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},51817:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},89345:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},45675:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},92369:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},85210:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return V}});var s=a(57437),l=a(2265),r=a(53528),n=a(79820),i=a(92451),o=a(71533),c=a(45675),d=a(18930),m=a(92369),u=a(89345),x=a(79205);let f=(0,x.Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var h=a(47692),p=a(12381),g=a(99376),j=a(96246),N=a(82987),b=a(98605),v=e=>{let{children:t,breadcrumbs:a}=e,{profile:n,loading:i}=(0,r.a)(),o=(0,g.useRouter)(),[c,d]=l.useState(!1);return(l.useEffect(()=>{i||n||o.push("/auth")},[i,n,o]),i)?(0,s.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-islamic-500"})}):n?"teacher"===n.role?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,s.jsxs)("header",{className:"sticky top-0 z-40 bg-white shadow-sm flex items-center justify-between h-16 px-4 lg:px-8 lg:hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-9 h-9 bg-gradient-to-br from-teal-500 to-green-500 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-bold text-lg",children:"M"})}),(0,s.jsx)("span",{className:"font-semibold text-lg text-gray-900 hidden sm:inline",children:"Mutabaahly"})]}),(0,s.jsx)("button",{className:"lg:hidden p-2 rounded-md text-teal-700 hover:bg-teal-50",onClick:()=>d(e=>!e),children:(0,s.jsx)("svg",{className:"h-7 w-7",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})})]}),(0,s.jsx)(N.Z,{isMobileMenuOpen:c,setIsMobileMenuOpen:d}),(0,s.jsxs)("main",{className:"lg:pl-64 min-h-screen",children:[a&&(0,s.jsx)("div",{className:"pt-6 px-4 lg:px-8",children:(0,s.jsx)(b.Z,{items:a})}),(0,s.jsx)("div",{className:"container mx-auto pt-2 pb-6 px-4 lg:px-8",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:t})})]})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[a&&(0,s.jsx)("div",{className:"pt-6 px-4 lg:px-8",children:(0,s.jsx)(b.Z,{items:a})}),(0,s.jsx)("main",{className:"container mx-auto pt-2 pb-6 px-4 lg:px-8",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:t})})]}):null},y=a(74291),w=a(40279),k=a(75060),Z=a(5526),C=a(14438),z=a(51817);let F=(0,x.Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var R=a(32489),E=a(93448);let _=["image/jpeg","image/png","image/gif","image/webp"];function A(e){var t,a,n;let{isOpen:i,onClose:o,onProfileUpdated:c}=e,{user:d,profile:m}=(0,r.a)(),[u,x]=(0,l.useState)((null==m?void 0:m.full_name)||""),[f,h]=(0,l.useState)(!1),[g,N]=(0,l.useState)((null==m?void 0:m.avatar_url)||null),[b,v]=(0,l.useState)(!1),[A,O]=(0,l.useState)(!1);(0,l.useEffect)(()=>{i&&m?(x(m.full_name||""),N(m.avatar_url||null)):i||(x(""),N(null),h(!1),v(!1))},[i,m]);let M=()=>{let e=u.trim();return e?e.length<2?(C.Am.error("Full name must be at least 2 characters long"),!1):!(e.length>100)||(C.Am.error("Full name must be less than 100 characters"),!1):(C.Am.error("Full name is required"),!1)},I=async e=>{if(e.preventDefault(),!(null==d?void 0:d.id)){C.Am.error("User not authenticated");return}if(M()){h(!0);try{let e=u.trim(),{error:t}=await Z.O.from("profiles").update({full_name:e,avatar_url:g,updated_at:new Date().toISOString()}).eq("id",d.id);if(t)throw console.error("Profile update error:",t),Error(t.message||"Failed to update profile");C.Am.success("Profile updated successfully"),c(),o()}catch(t){console.error("Error updating profile:",t);let e=t instanceof Error?t.message:"Failed to update profile";C.Am.error(e)}finally{h(!1)}}},D=async e=>{var t,a;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(e.target.value="",s){if(!(null==d?void 0:d.id)){C.Am.error("User not authenticated");return}if(s.size>5242880){C.Am.error("File size must be less than 5MB");return}if(!_.includes(s.type)){C.Am.error("Only JPG, PNG, GIF, and WebP images are allowed");return}try{v(!0);let e=(null===(a=s.name.split(".").pop())||void 0===a?void 0:a.toLowerCase())||"jpg",t=Date.now(),l="".concat(d.id,"/avatar_").concat(t,".").concat(e),{error:r,data:n}=await Z.O.storage.from("avatars").upload(l,s,{cacheControl:"3600",contentType:s.type});if(r)throw console.error("Upload error:",r),Error(r.message||"Failed to upload image");if(!(null==n?void 0:n.path))throw Error("Upload successful but no file path returned");let{data:{publicUrl:i}}=Z.O.storage.from("avatars").getPublicUrl(n.path);if(!i)throw Error("Failed to get public URL for uploaded image");if(g&&g!==i)try{let e=new URL(g).pathname.split("/avatars/")[1];e&&e.startsWith(d.id)&&await Z.O.storage.from("avatars").remove([e])}catch(e){console.warn("Failed to remove old avatar:",e)}N(i),C.Am.success("Profile picture updated successfully")}catch(t){console.error("Error uploading image:",t);let e=t instanceof Error?t.message:"Failed to upload profile picture";C.Am.error(e)}finally{v(!1)}}},P=async()=>{if((null==d?void 0:d.id)&&g){O(!0);try{let e=g.split("/").slice(-2).join("/"),{error:t}=await Z.O.storage.from("avatars").remove([e]);if(t)throw t;let{error:a}=await Z.O.from("profiles").update({avatar_url:null}).eq("id",d.id);if(a)throw a;N(null),C.Am.success("Profile photo deleted"),c()}catch(e){console.error("Error deleting photo:",e),C.Am.error("Failed to delete profile photo")}finally{O(!1)}}},U=()=>{if(f||b){C.Am.error("Please wait for the current operation to complete");return}o()};return d?(0,s.jsx)(y.Vq,{open:i,onOpenChange:U,children:(0,s.jsxs)(y.cZ,{className:"sm:max-w-[425px]","aria-describedby":"edit-profile-description",children:[(0,s.jsx)(y.fK,{children:(0,s.jsx)(y.$N,{children:"Edit Profile"})}),(0,s.jsx)("div",{id:"edit-profile-description",className:"sr-only",children:"Update your profile information and upload a profile picture."}),(0,s.jsxs)("form",{onSubmit:I,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)(j.qE,{className:"h-24 w-24",children:[(0,s.jsx)(j.F$,{src:g||void 0,alt:u?"".concat(u,"'s avatar"):"User avatar"}),(0,s.jsx)(j.Q5,{className:"text-lg font-semibold",children:(null==u?void 0:null===(t=u.charAt(0))||void 0===t?void 0:t.toUpperCase())||(null==m?void 0:null===(n=m.full_name)||void 0===n?void 0:null===(a=n.charAt(0))||void 0===a?void 0:a.toUpperCase())||"U"})]}),(0,s.jsxs)("label",{htmlFor:"avatar-upload",className:(0,E.cn)("absolute bottom-0 right-0 cursor-pointer rounded-full bg-primary p-2 text-primary-foreground hover:bg-primary/90 transition-colors",(b||f)&&"opacity-50 cursor-not-allowed"),title:"Upload profile picture",children:[b?(0,s.jsx)(z.Z,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(F,{className:"h-4 w-4"}),(0,s.jsx)("input",{id:"avatar-upload",type:"file",accept:_.join(","),className:"hidden",onChange:D,disabled:b||f})]}),g&&(0,s.jsx)("button",{type:"button",onClick:P,className:"absolute top-0 left-0 bg-red-500 hover:bg-red-600 text-white rounded-full p-2 shadow-md transition-colors",disabled:A,title:"Delete photo",children:A?(0,s.jsx)(z.Z,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(R.Z,{className:"h-4 w-4"})})]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground text-center",children:["Click the camera icon to upload a new profile picture",(0,s.jsx)("br",{}),"Maximum size: 5MB â€¢ Formats: JPG, PNG, GIF, WebP"]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(k._,{htmlFor:"fullName",children:"Full Name *"}),(0,s.jsx)(w.I,{id:"fullName",value:u,onChange:e=>x(e.target.value),placeholder:"Enter your full name",required:!0,maxLength:100,disabled:f||b,autoComplete:"name"})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,s.jsx)(p.z,{type:"button",variant:"outline",onClick:U,disabled:f||b,children:"Cancel"}),(0,s.jsx)(p.z,{type:"submit",disabled:f||b||!u.trim(),children:f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})}):null}var O=a(30767),M=a(1072);function I(e){let{isOpen:t,onClose:a}=e,{profile:n,signOut:i}=(0,r.a)(),o=(0,g.useRouter)(),[c,d]=l.useState(!1),m=async()=>{if(null==n?void 0:n.id){d(!0);try{let{error:e}=await M.O.from("profiles").delete().eq("id",n.id);if(e)throw e;let{error:t}=await M.O.auth.admin.deleteUser(n.id);if(t)throw t;await i(),o.push("/"),C.Am.success("Account deleted successfully")}catch(e){console.error("Error deleting account:",e),C.Am.error("Failed to delete account")}finally{d(!1),a()}}};return(0,s.jsx)(O.aR,{open:t,onOpenChange:a,children:(0,s.jsxs)(O._T,{children:[(0,s.jsxs)(O.fY,{children:[(0,s.jsx)(O.f$,{children:"Are you absolutely sure?"}),(0,s.jsx)(O.yT,{children:"This action cannot be undone. This will permanently delete your account and remove all associated data from our servers."})]}),(0,s.jsxs)(O.xo,{children:[(0,s.jsx)(O.le,{disabled:c,children:"Cancel"}),(0,s.jsx)(O.OL,{onClick:m,disabled:c,className:"bg-red-600 hover:bg-red-700 focus:ring-red-600",children:c?"Deleting...":"Delete Account"})]})]})})}var D=a(32060),P=a(96657),U=()=>{var e,t;let{user:a,profile:x,signOut:N}=(0,r.a)(),[b,y]=(0,l.useState)(!1),[w,k]=(0,l.useState)(!1),Z=(0,g.useRouter)(),C=[{label:"Dashboard",href:"/dashboard"},{label:"Profile"}],z=()=>{y(!0)},F=()=>{k(!0)},R=()=>{},E=async()=>{await N(),Z.push("/")};return x?"parent"===x.role?(0,s.jsxs)(P.Z,{breadcrumbs:C,children:[(0,s.jsxs)("div",{className:"container mx-auto px-0 py-0 md:px-6 md:py-6 flex flex-col gap-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mt-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>Z.back(),className:"p-0 m-0 bg-transparent border-none outline-none flex items-center","aria-label":"Back",children:(0,s.jsx)(i.Z,{className:"h-6 w-6"})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Profile Settings"})]}),(0,s.jsx)(n.Zb,{className:"mb-6",children:(0,s.jsx)(n.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute right-0 top-0",children:(0,s.jsxs)(D.h_,{children:[(0,s.jsx)(D.$F,{asChild:!0,children:(0,s.jsx)(p.z,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-gray-100 rounded-full",children:(0,s.jsx)(o.Z,{className:"h-4 w-4 text-gray-500"})})}),(0,s.jsxs)(D.AW,{align:"end",className:"w-48",children:[(0,s.jsxs)(D.Xi,{onClick:z,className:"cursor-pointer",children:[(0,s.jsx)(c.Z,{className:"mr-2 h-4 w-4 text-gray-500"}),(0,s.jsx)("span",{children:"Edit Profile"})]}),(0,s.jsx)(D.VD,{}),(0,s.jsxs)(D.Xi,{onClick:F,className:"cursor-pointer text-red-600 focus:text-red-600",children:[(0,s.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Delete Account"})]})]})]})}),(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsxs)(j.qE,{className:"h-24 w-24 mb-4",children:[(0,s.jsx)(j.F$,{src:(null==x?void 0:x.avatar_url)||void 0}),(0,s.jsx)(j.Q5,{className:"bg-gradient-to-r from-green-400 to-teal-500 text-white text-xl",children:null==x?void 0:null===(e=x.full_name)||void 0===e?void 0:e.split(" ").map(e=>e[0]).join("").toUpperCase()})]}),(0,s.jsx)("h2",{className:"text-xl font-semibold mb-1",children:null==x?void 0:x.full_name}),(0,s.jsx)("p",{className:"text-gray-500 capitalize",children:null==x?void 0:x.role})]})]})})}),(0,s.jsxs)(n.Zb,{children:[(0,s.jsx)(n.Ol,{className:"p-6 pb-0",children:(0,s.jsxs)(n.ll,{className:"flex items-center gap-2 text-gray-800",children:[(0,s.jsx)(m.Z,{className:"h-5 w-5 text-teal-500"}),"Account Information"]})}),(0,s.jsxs)(n.aY,{className:"space-y-6 p-6 pt-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)(m.Z,{className:"h-5 w-5 text-teal-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Full Name"}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:(null==x?void 0:x.full_name)||"Not set"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)(u.Z,{className:"h-5 w-5 text-teal-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Email"}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:(null==a?void 0:a.email)||"Not set"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)(f,{className:"h-5 w-5 text-teal-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Role"}),(0,s.jsx)("p",{className:"font-medium text-gray-900 capitalize",children:(null==x?void 0:x.role)||"Not set"})]})]})]})]}),(0,s.jsx)("div",{className:"md:hidden mt-6",children:(0,s.jsxs)(p.z,{onClick:E,variant:"outline",className:"w-full flex items-center gap-2 text-red-600 border-red-200 hover:bg-red-50 hover:text-red-700",children:[(0,s.jsx)(h.Z,{className:"h-5 w-5"}),"Sign Out"]})})]}),(0,s.jsx)(A,{isOpen:b,onClose:()=>y(!1),onProfileUpdated:R}),(0,s.jsx)(I,{isOpen:w,onClose:()=>k(!1)})]}):(0,s.jsxs)(v,{breadcrumbs:C,children:[(0,s.jsxs)("div",{className:"container mx-auto px-0 lg:px-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mt-2 mb-6",children:[(0,s.jsx)("button",{type:"button",onClick:()=>Z.back(),className:"p-0 m-0 bg-transparent border-none outline-none flex items-center","aria-label":"Back",children:(0,s.jsx)(i.Z,{className:"h-6 w-6"})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Profile Settings"})]}),(0,s.jsx)(n.Zb,{className:"mb-6",children:(0,s.jsx)(n.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute right-0 top-0",children:(0,s.jsxs)(D.h_,{children:[(0,s.jsx)(D.$F,{asChild:!0,children:(0,s.jsx)(p.z,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-gray-100 rounded-full",children:(0,s.jsx)(o.Z,{className:"h-4 w-4 text-gray-500"})})}),(0,s.jsxs)(D.AW,{align:"end",className:"w-48",children:[(0,s.jsxs)(D.Xi,{onClick:z,className:"cursor-pointer",children:[(0,s.jsx)(c.Z,{className:"mr-2 h-4 w-4 text-gray-500"}),(0,s.jsx)("span",{children:"Edit Profile"})]}),(0,s.jsx)(D.VD,{}),(0,s.jsxs)(D.Xi,{onClick:F,className:"cursor-pointer text-red-600 focus:text-red-600",children:[(0,s.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Delete Account"})]})]})]})}),(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsxs)(j.qE,{className:"h-24 w-24 mb-4",children:[(0,s.jsx)(j.F$,{src:(null==x?void 0:x.avatar_url)||void 0}),(0,s.jsx)(j.Q5,{className:"bg-gradient-to-r from-green-400 to-teal-500 text-white text-xl",children:null==x?void 0:null===(t=x.full_name)||void 0===t?void 0:t.split(" ").map(e=>e[0]).join("").toUpperCase()})]}),(0,s.jsx)("h2",{className:"text-xl font-semibold mb-1",children:null==x?void 0:x.full_name}),(0,s.jsx)("p",{className:"text-gray-500 capitalize",children:null==x?void 0:x.role})]})]})})}),(0,s.jsxs)(n.Zb,{children:[(0,s.jsx)(n.Ol,{className:"p-6 pb-0",children:(0,s.jsxs)(n.ll,{className:"flex items-center gap-2 text-gray-800",children:[(0,s.jsx)(m.Z,{className:"h-5 w-5 text-teal-500"}),"Account Information"]})}),(0,s.jsxs)(n.aY,{className:"space-y-6 p-6 pt-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)(m.Z,{className:"h-5 w-5 text-teal-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Full Name"}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:(null==x?void 0:x.full_name)||"Not set"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)(u.Z,{className:"h-5 w-5 text-teal-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Email"}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:(null==a?void 0:a.email)||"Not set"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)(f,{className:"h-5 w-5 text-teal-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Role"}),(0,s.jsx)("p",{className:"font-medium text-gray-900 capitalize",children:(null==x?void 0:x.role)||"Not set"})]})]})]})]})]}),(0,s.jsx)(A,{isOpen:b,onClose:()=>y(!1),onProfileUpdated:R}),(0,s.jsx)(I,{isOpen:w,onClose:()=>k(!1)})]}):(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})},S=a(48223);function V(){return(0,s.jsx)(S.Z,{children:(0,s.jsx)(U,{})})}},48223:function(e,t,a){"use strict";var s=a(57437),l=a(2265),r=a(53528),n=a(99376);t.Z=e=>{let{children:t,requiredRole:a}=e,{user:i,profile:o,loading:c}=(0,r.a)(),d=(0,n.useRouter)();return((0,l.useEffect)(()=>{c||i||d.push("/auth"),!c&&i&&o&&a&&o.role!==a&&d.push("/dashboard")},[i,o,c,d,a]),c)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-islamic-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}):!i||a&&(null==o?void 0:o.role)!==a?null:(0,s.jsx)(s.Fragment,{children:t})}},82987:function(e,t,a){"use strict";var s=a(57437),l=a(2265),r=a(27648),n=a(99376),i=a(53528),o=a(14938),c=a(95805),d=a(36883),m=a(67815),u=a(47692),x=a(12381),f=a(96246);t.Z=e=>{var t;let{isMobileMenuOpen:a,setIsMobileMenuOpen:h}=e,p=(0,n.usePathname)(),g=(0,n.useRouter)(),{profile:j,signOut:N}=(0,i.a)();(0,l.useEffect)(()=>{h(!1)},[p,h]),(0,l.useEffect)(()=>{let e=e=>{let t=document.getElementById("teacher-sidebar");a&&t&&!t.contains(e.target)&&h(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[a,h]);let b=async()=>{await N(),g.push("/")};if((null==j?void 0:j.role)!=="teacher")return null;let v=[{href:"/dashboard",label:"Dashboard",icon:o.Z},{href:"/students",label:"Students",icon:c.Z},{href:"/tests/manage",label:"Level Tests",icon:d.Z},{href:"/profile",label:"Profile",icon:m.Z}];return(0,s.jsxs)(s.Fragment,{children:[a&&(0,s.jsx)("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>h(!1),"aria-hidden":"true"}),(0,s.jsxs)("aside",{id:"teacher-sidebar",className:"\n          w-64 min-h-screen bg-gradient-to-r from-green-400 to-teal-500 text-white shadow-lg \n          fixed top-0 left-0 z-40 transform transition-transform duration-300 ease-in-out\n          lg:translate-x-0 ".concat(a?"translate-x-0":"-translate-x-full","\n          overflow-y-auto scrollbar-thin scrollbar-thumb-teal-600 scrollbar-track-transparent\n        "),children:[(0,s.jsx)("div",{className:"sticky top-0 bg-gradient-to-r from-green-400 to-teal-500 pt-6 pb-4 px-5",children:(0,s.jsxs)(r.default,{href:"/dashboard",className:"flex items-center space-x-3",onClick:()=>h(!1),children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-teal-500 to-green-500 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-bold text-xl",children:"M"})}),(0,s.jsx)("span",{className:"font-sf-pro font-semibold text-xl text-white",children:"Mutabaahly"})]})}),(0,s.jsx)("nav",{className:"px-5 py-6 space-y-2",children:v.map(e=>{let t=e.icon,a=p===e.href||"/dashboard"!==e.href&&(null==p?void 0:p.startsWith(e.href))&&"/"!==e.href;return(0,s.jsxs)(r.default,{href:e.href,onClick:()=>h(!1),className:"\n                  flex items-center space-x-3 p-3 rounded-xl text-gray-200 \n                  hover:bg-teal-600/50 hover:text-white transition-all duration-150 ease-in-out\n                  ".concat(a?"bg-teal-600/70 text-white shadow-md":"","\n                "),children:[(0,s.jsx)(t,{className:"h-5 w-5 flex-shrink-0"}),(0,s.jsx)("span",{className:"text-base font-medium",children:e.label})]},e.label)})}),(0,s.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 px-5 py-4 bg-teal-600/30",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,s.jsx)(f.qE,{className:"h-10 w-10",children:(0,s.jsx)(f.Q5,{className:"bg-teal-600",children:null==j?void 0:null===(t=j.full_name)||void 0===t?void 0:t.split(" ").map(e=>e[0]).join("").toUpperCase()})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-white truncate",children:null==j?void 0:j.full_name}),(0,s.jsx)("p",{className:"text-xs text-gray-300 truncate",children:"Teacher"})]})]}),(0,s.jsxs)(x.z,{variant:"ghost",className:"w-full justify-start text-gray-200 hover:text-white hover:bg-teal-600/50",onClick:b,children:[(0,s.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})]})}},96657:function(e,t,a){"use strict";var s=a(57437),l=a(2265),r=a(53528),n=a(99376),i=a(98605),o=a(82804);t.Z=e=>{let{children:t,breadcrumbs:a}=e,{profile:c,loading:d}=(0,r.a)(),m=(0,n.useRouter)();return(l.useEffect(()=>{d||(null==c?void 0:c.role)==="parent"||m.push("/dashboard")},[d,c,m]),d)?(0,s.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-islamic-500"})}):(null==c?void 0:c.role)!=="parent"?null:(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100 pt-0",children:[(0,s.jsx)(o.Z,{}),a&&(0,s.jsx)("div",{className:"pt-6 px-4 lg:px-8",children:(0,s.jsx)(i.Z,{items:a})}),(0,s.jsx)("main",{className:"container mx-auto pt-2 pb-6 px-4 lg:px-8",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:t})})]})}},98605:function(e,t,a){"use strict";var s=a(57437);a(2265);var l=a(27648),r=a(10407);t.Z=e=>{let{items:t}=e;return(0,s.jsx)("nav",{className:"flex mb-4","aria-label":"Breadcrumb",children:(0,s.jsx)("ol",{className:"inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse",children:t.map((e,a)=>(0,s.jsx)("li",{className:"inline-flex items-center",children:e.href&&a<t.length-1?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(l.default,{href:e.href,className:"text-sm font-medium text-gray-700 hover:text-blue-600",children:e.label}),(0,s.jsx)(r.Z,{className:"h-4 w-4 text-gray-400 mx-1"})]}):(0,s.jsx)("span",{className:"text-sm font-medium text-gray-500",children:e.label})},a))})})}},30767:function(e,t,a){"use strict";a.d(t,{OL:function(){return g},_T:function(){return u},aR:function(){return o},f$:function(){return h},fY:function(){return x},le:function(){return j},vW:function(){return c},xo:function(){return f},yT:function(){return p}});var s=a(57437),l=a(2265),r=a(90277),n=a(93448),i=a(12381);let o=r.fC,c=r.xz,d=r.h_,m=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.aV,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l,ref:t})});m.displayName=r.aV.displayName;let u=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(m,{}),(0,s.jsx)(r.VY,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l})]})});u.displayName=r.VY.displayName;let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};x.displayName="AlertDialogHeader";let f=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};f.displayName="AlertDialogFooter";let h=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.Dx,{ref:t,className:(0,n.cn)("text-lg font-semibold",a),...l})});h.displayName=r.Dx.displayName;let p=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.dk,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...l})});p.displayName=r.dk.displayName;let g=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.aU,{ref:t,className:(0,n.cn)((0,i.d)(),a),...l})});g.displayName=r.aU.displayName;let j=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.$j,{ref:t,className:(0,n.cn)((0,i.d)({variant:"outline"}),"mt-2 sm:mt-0",a),...l})});j.displayName=r.$j.displayName},79820:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},Zb:function(){return n},aY:function(){return c},ll:function(){return o}});var s=a(57437),l=a(2265),r=a(93448);let n=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...l})});n.displayName="Card";let i=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...l})});i.displayName="CardHeader";let o=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...l})});o.displayName="CardTitle",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",a),...l})}).displayName="CardDescription";let c=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",a),...l})});c.displayName="CardContent",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",a),...l})}).displayName="CardFooter"},74291:function(e,t,a){"use strict";a.d(t,{$N:function(){return p},Be:function(){return g},GG:function(){return m},Vq:function(){return o},cN:function(){return h},cZ:function(){return x},fK:function(){return f},hg:function(){return c}});var s=a(57437),l=a(2265),r=a(49027),n=a(32489),i=a(93448);let o=r.fC,c=r.xz,d=r.h_,m=r.x8,u=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l})});u.displayName=r.aV.displayName;let x=l.forwardRef((e,t)=>{let{className:a,children:l,...o}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(r.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o,children:[l,(0,s.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(n.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=r.VY.displayName;let f=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};f.displayName="DialogHeader";let h=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};h.displayName="DialogFooter";let p=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...l})});p.displayName=r.Dx.displayName;let g=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...l})});g.displayName=r.dk.displayName},40279:function(e,t,a){"use strict";a.d(t,{I:function(){return n}});var s=a(57437),l=a(2265),r=a(93448);let n=l.forwardRef((e,t)=>{let{className:a,type:l,...n}=e;return(0,s.jsx)("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});n.displayName="Input"},75060:function(e,t,a){"use strict";a.d(t,{_:function(){return c}});var s=a(57437),l=a(2265),r=a(6394),n=a(90535),i=a(93448);let o=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.f,{ref:t,className:(0,i.cn)(o(),a),...l})});c.displayName=r.f.displayName},5526:function(e,t,a){"use strict";a.d(t,{O:function(){return s}});let s=(0,a(96580).eI)("https://isyhakwwgdozgtlquzis.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlzeWhha3d3Z2Rvemd0bHF1emlzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY5NTY3NzcsImV4cCI6MjA2MjUzMjc3N30.-2Ya944q8mgJzRAuhMpRAWgxWVmt2yc3CqM0jjgFuuY",{db:{schema:"public"}})},6394:function(e,t,a){"use strict";a.d(t,{f:function(){return i}});var s=a(2265),l=a(66840),r=a(57437),n=s.forwardRef((e,t)=>(0,r.jsx)(l.WV.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null===(a=e.onMouseDown)||void 0===a||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var i=n}},function(e){e.O(0,[3621,8977,8925,2426,8092,4438,2804,2971,2117,1744],function(){return e(e.s=84020)}),_N_E=e.O()}]);