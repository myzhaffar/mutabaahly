"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8887],{96657:function(a,e,r){var l=r(57437),n=r(2265),t=r(53528),i=r(99376),s=r(98605),u=r(82804);e.Z=a=>{let{children:e,breadcrumbs:r}=a,{profile:A,loading:d}=(0,t.a)(),h=(0,i.useRouter)();return(n.useEffect(()=>{d||(null==A?void 0:A.role)==="parent"||h.push("/dashboard")},[d,A,h]),d)?(0,l.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-islamic-500"})}):(null==A?void 0:A.role)!=="parent"?null:(0,l.jsxs)("div",{className:"min-h-screen bg-gray-100 pt-0",children:[(0,l.jsx)(u.Z,{}),r&&(0,l.jsx)("div",{className:"pt-6 px-4 lg:px-8",children:(0,l.jsx)(s.Z,{items:r})}),(0,l.jsx)("main",{className:"container mx-auto pt-2 pb-6 px-4 lg:px-8",children:(0,l.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e})})]})}},79820:function(a,e,r){r.d(e,{Ol:function(){return s},Zb:function(){return i},aY:function(){return A},ll:function(){return u}});var l=r(57437),n=r(2265),t=r(93448);let i=n.forwardRef((a,e)=>{let{className:r,...n}=a;return(0,l.jsx)("div",{ref:e,className:(0,t.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});i.displayName="Card";let s=n.forwardRef((a,e)=>{let{className:r,...n}=a;return(0,l.jsx)("div",{ref:e,className:(0,t.cn)("flex flex-col space-y-1.5 p-6",r),...n})});s.displayName="CardHeader";let u=n.forwardRef((a,e)=>{let{className:r,...n}=a;return(0,l.jsx)("h3",{ref:e,className:(0,t.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});u.displayName="CardTitle",n.forwardRef((a,e)=>{let{className:r,...n}=a;return(0,l.jsx)("p",{ref:e,className:(0,t.cn)("text-sm text-muted-foreground",r),...n})}).displayName="CardDescription";let A=n.forwardRef((a,e)=>{let{className:r,...n}=a;return(0,l.jsx)("div",{ref:e,className:(0,t.cn)("p-6 pt-0",r),...n})});A.displayName="CardContent",n.forwardRef((a,e)=>{let{className:r,...n}=a;return(0,l.jsx)("div",{ref:e,className:(0,t.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},10271:function(a,e,r){r.d(e,{LQ:function(){return c},X1:function(){return i},_G:function(){return o},tR:function(){return t}});var l=r(1072),n=r(28270);let t=async a=>{try{let e=l.O.from("students").select("\n        id,\n        name,\n        group_name,\n        teacher\n      ");if(a.teacher&&(e=e.eq("teacher",a.teacher)),a.grade&&"all"!==a.grade){if(a.grade.includes(",")){let r=a.grade.split(",").map(a=>a.trim()).filter(Boolean);e=e.in("group_name",r)}else e=e.eq("group_name",a.grade)}let{data:r,error:t}=await e;if(t)return console.error("Error fetching students for Tilawati ranking:",t),[];if(!r||0===r.length)return[];return(await Promise.all(r.map(async a=>{try{let{data:e}=await l.O.from("tilawah_progress").select("*").eq("student_id",a.id).maybeSingle(),{data:r}=await l.O.from("progress_entries").select("*").eq("student_id",a.id).eq("type","tilawah").order("date",{ascending:!1}),t=(0,n.L)(r||[]),i=e||{percentage:t.percentage,jilid:t.jilid,page:t.total_pages||0},u=i.jilid||t.jilid,A=s(u),d=i.page||t.total_pages||0;return{id:a.id,name:a.name,class:a.group_name||"Unknown",teacher:a.teacher||"Unknown",teacherId:a.teacher,grade:a.group_name||"Unknown",level:A,page:d,progress:i.percentage||t.percentage}}catch(e){return console.error("Error processing student ".concat(a.id,":"),e),{id:a.id,name:a.name,class:a.group_name||"Unknown",teacher:a.teacher||"Unknown",teacherId:a.teacher,grade:a.group_name||"Unknown",level:1,page:0,progress:0}}}))).filter(a=>a.level>0&&a.page>0).sort((a,e)=>a.level!==e.level?e.level-a.level:e.page-a.page)}catch(a){return console.error("Error in fetchTilawatiRankingData:",a),[]}},i=async a=>{try{let e=l.O.from("students").select("\n        id,\n        name,\n        group_name,\n        teacher\n      ");if(a.teacher){if(a.teacher.includes(",")){let r=a.teacher.split(",").map(a=>a.trim()).filter(Boolean);e=e.in("teacher",r)}else e=e.eq("teacher",a.teacher)}if(a.grade&&"all"!==a.grade){if(a.grade.includes(",")){let r=a.grade.split(",").map(a=>a.trim()).filter(Boolean);e=e.in("group_name",r)}else e=e.eq("group_name",a.grade)}let{data:r,error:t}=await e;if(t)return console.error("Error fetching students for Hafalan ranking:",t),[];if(!r||0===r.length)return[];return(await Promise.all(r.map(async a=>{try{let{data:e,error:r}=await l.O.from("progress_entries").select("*").eq("student_id",a.id).eq("type","hafalan").order("date",{ascending:!1});if(r)return console.error("Error fetching hafalan entries for student ".concat(a.id,":"),r),null;let t=(0,n.B)(e||[]),i=t.last_surah,s=d(i),u=(null==s?void 0:s.juz)||null,A=h(e||[]);return{id:a.id,name:a.name,class:a.group_name||"Unknown",teacher:a.teacher||"Unknown",teacherId:a.teacher,grade:a.group_name||"Unknown",juz:u,surah:i,verse:A,progress:t.percentage}}catch(e){return console.error("Error processing student ".concat(a.id,":"),e),null}}))).filter(a=>null!==a&&"number"==typeof a.verse&&a.verse>0).sort((a,e)=>{if(30===a.juz&&30===e.juz){let r=u(a.surah),l=u(e.surah);return r!==l?r-l:e.verse-a.verse}if(30===a.juz)return -1;if(30===e.juz)return 1;if(null!==a.juz&&null!==e.juz&&a.juz!==e.juz)return e.juz-a.juz;if(null!==a.juz&&null===e.juz)return -1;if(null===a.juz&&null!==e.juz)return 1;let r=A(a.surah),l=A(e.surah);return r!==l?l-r:e.verse-a.verse})}catch(a){return console.error("Error in fetchHafalanRankingData:",a),[]}},s=a=>{if(!a)return 1;let e=a.match(/(?:Jilid|Level)\s*(\d+)/i)||a.match(/(\d+)/);return e?parseInt(e[1]):1},u=a=>a&&({"An-Naba":1,"An-Nazi'at":2,Abasa:3,"At-Takwir":4,"Al-Infitar":5,"Al-Mutaffifin":6,"Al-Inshiqaq":7,"Al-Buruj":8,"At-Tariq":9,"Al-A'la":10,"Al-Ghashiyah":11,"Al-Fajr":12,"Al-Balad":13,"Ash-Shams":14,"Al-Layl":15,"Ad-Duha":16,"Ash-Sharh":17,"At-Tin":18,"Al-Alaq":19,"Al-Qadr":20,"Al-Bayyinah":21,"Az-Zalzalah":22,"Al-Adiyat":23,"Al-Qari'ah":24,"At-Takathur":25,"Al-Asr":26,"Al-Humazah":27,"Al-Fil":28,Quraish:29,"Al-Ma'un":30,"Al-Kawthar":31,"Al-Kafirun":32,"An-Nasr":33,"Al-Masad":34,"Al-Ikhlas":35,"Al-Falaq":36,"An-Nas":37})[a]||999,A=a=>a&&({"Al-Fatiha":1,"Al-Baqarah":2,"Al-Imran":3,"An-Nisa":4,"Al-Ma'idah":5,"Al-An'am":6,"Al-A'raf":7,"Al-Anfal":8,"At-Tawbah":9,Yunus:10,Hud:11,Yusuf:12,"Ar-Ra'd":13,Ibrahim:14,"Al-Hijr":15,"An-Nahl":16,"Al-Isra":17,"Al-Kahf":18,Maryam:19,"Ta-Ha":20,"Al-Anbiya":21,"Al-Hajj":22,"Al-Mu'minun":23,"An-Nur":24,"Al-Furqan":25,"Ash-Shu'ara":26,"An-Naml":27,"Al-Qasas":28,"Al-Ankabut":29,"Ar-Rum":30,Luqman:31,"As-Sajdah":32,"Al-Ahzab":33,Saba:34,Fatir:35,"Ya-Sin":36,"As-Saffat":37,Sad:38,"Az-Zumar":39,Ghafir:40,Fussilat:41,"Ash-Shura":42,"Az-Zukhruf":43,"Ad-Dukhan":44,"Al-Jathiyah":45,"Al-Ahqaf":46,Muhammad:47,"Al-Fath":48,"Al-Hujurat":49,Qaf:50,"Adh-Dhariyat":51,"At-Tur":52,"An-Najm":53,"Al-Qamar":54,"Ar-Rahman":55,"Al-Waqi'ah":56,"Al-Hadid":57,"Al-Mujadilah":58,"Al-Hashr":59,"Al-Mumtahanah":60,"As-Saff":61,"Al-Jumu'ah":62,"Al-Munafiqun":63,"At-Taghabun":64,"At-Talaq":65,"At-Tahrim":66,"Al-Mulk":67,"Al-Qalam":68,"Al-Haqqah":69,"Al-Ma'arij":70,Nuh:71,"Al-Jinn":72,"Al-Muzzammil":73,"Al-Muddathir":74,"Al-Qiyamah":75,"Al-Insan":76,"Al-Mursalat":77,"An-Naba":78,"An-Nazi'at":79,Abasa:80,"At-Takwir":81,"Al-Infitar":82,"Al-Mutaffifin":83,"Al-Inshiqaq":84,"Al-Buruj":85,"At-Tariq":86,"Al-A'la":87,"Al-Ghashiyah":88,"Al-Fajr":89,"Al-Balad":90,"Ash-Shams":91,"Al-Layl":92,"Ad-Duha":93,"Ash-Sharh":94,"At-Tin":95,"Al-Alaq":96,"Al-Qadr":97,"Al-Bayyinah":98,"Az-Zalzalah":99,"Al-Adiyat":100,"Al-Qari'ah":101,"At-Takathur":102,"Al-Asr":103,"Al-Humazah":104,"Al-Fil":105,Quraish:106,"Al-Ma'un":107,"Al-Kawthar":108,"Al-Kafirun":109,"An-Nasr":110,"Al-Masad":111,"Al-Ikhlas":112,"Al-Falaq":113,"An-Nas":114})[a]||0,d=a=>a?{juz:["An-Naba","An-Nazi'at","Abasa","At-Takwir","Al-Infitar","Al-Mutaffifin","Al-Inshiqaq","Al-Buruj","At-Tariq","Al-A'la","Al-Ghashiyah","Al-Fajr","Al-Balad","Ash-Shams","Al-Layl","Ad-Duha","Ash-Sharh","At-Tin","Al-Alaq","Al-Qadr","Al-Bayyinah","Az-Zalzalah","Al-Adiyat","Al-Qari'ah","At-Takathur","Al-Asr","Al-Humazah","Al-Fil","Quraish","Al-Ma'un","Al-Kawthar","Al-Kafirun","An-Nasr","Al-Masad","Al-Ikhlas","Al-Falaq","An-Nas"].includes(a)?30:null}:null,h=a=>{if(!a||0===a.length)return 1;let e=1;for(let r of a)if(r.ayat_or_page){let a=r.ayat_or_page.trim();if(a.includes("-")){let r=a.split("-");if(2===r.length){let a=parseInt(r[0].trim()),l=parseInt(r[1].trim());isNaN(a)||isNaN(l)||(e=Math.max(e,l))}}else{let r=parseInt(a);isNaN(r)||(e=Math.max(e,r))}}return e},o=async()=>{try{let{data:a,error:e}=await l.O.from("students").select("group_name").not("group_name","is",null);if(e)return console.error("Error fetching grades:",e),[];return[...new Set(null==a?void 0:a.map(a=>a.group_name).filter(Boolean))].map(a=>({id:a,name:a}))}catch(a){return console.error("Error in fetchGrades:",a),[]}},c=[{id:"titin",name:"Bu Titin"},{id:"witri",name:"Bu Witri"},{id:"lila",name:"Bu Lila"},{id:"alya",name:"Bu Alya"},{id:"liana",name:"Bu Liana"},{id:"talia",name:"Bu Talia"},{id:"liza",name:"Bu Liza"},{id:"zaedun",name:"Pak Zaedun"},{id:"heri",name:"Pak Heri"},{id:"sata",name:"Pak Sata"},{id:"kusnadi",name:"Pak Kusnadi"},{id:"riski",name:"Pak Riski"},{id:"hasib",name:"Pak Hasib"},{id:"muzhaffar",name:"Pak Muzhaffar"}]}}]);