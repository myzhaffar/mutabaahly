(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5518],{27619:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Students",function(){return a(28213)}])},24870:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(33592).Z)("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]])},21427:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(33592).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},19078:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(33592).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},114:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(33592).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},12438:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(33592).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},56286:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(33592).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},98408:function(e,t,a){"use strict";a.d(t,{Z:function(){return j}});var s=a(85893),r=a(67294),n=a(88055),l=a(39332),i=a(69750),d=a(41664),c=a.n(d),o=a(95364),x=a(42964),m=a(92568),u=a(99737),f=a(37663),h=a(62487),p=a(89934),g=a(3498),y=a(55051),b=()=>{var e;let{profile:t,signOut:a}=(0,n.a)(),r=(0,l.useRouter)(),i=(0,l.usePathname)(),d=async()=>{await a(),r.push("/")},b=[{href:"/dashboard",label:"Dashboard",icon:m.Z},{href:"/students",label:"Student Rankings",mobileLabel:"Student Ranks",icon:u.Z},{href:"/tests/view",label:"Test Results",icon:f.Z},{href:"/profile",label:"Profile",icon:h.Z}],j=e=>i===e||"/dashboard"!==e&&(null==i?void 0:i.startsWith(e));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60",children:(0,s.jsx)("nav",{className:"container mx-auto px-4",children:(0,s.jsxs)("div",{className:"flex h-16 items-center justify-between md:justify-between",children:[(0,s.jsx)("div",{className:"flex-1 flex justify-center md:justify-start items-center gap-2",children:(0,s.jsxs)(c(),{href:"/dashboard",className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-9 h-9 bg-gradient-to-r from-green-400 to-teal-500 rounded-lg flex items-center justify-center shadow-sm",children:(0,s.jsx)("span",{className:"text-white font-bold text-xl",children:"M"})}),(0,s.jsx)("span",{className:"font-sf-pro font-semibold text-base bg-gradient-to-r from-green-400 to-teal-500 bg-clip-text text-transparent hidden sm:block",children:"Mutabaahly"})]})}),(0,s.jsx)("div",{className:"hidden md:flex items-center gap-6",children:b.map(e=>(0,s.jsxs)(c(),{href:e.href,className:"\n                    flex items-center gap-2 text-sm font-medium transition-colors\n                    ".concat(j(e.href)?"bg-gradient-to-r from-green-400 to-teal-500 bg-clip-text text-transparent":"text-gray-600 hover:bg-gradient-to-r hover:from-green-400 hover:to-teal-500 hover:bg-clip-text hover:text-transparent","\n                  "),children:[(0,s.jsx)(e.icon,{className:"h-4 w-4 ".concat(j(e.href)?"text-teal-500":"text-gray-600 group-hover:text-teal-500")}),e.label]},e.label))}),(0,s.jsx)("div",{className:"hidden md:flex items-center gap-4",children:(0,s.jsxs)(y.h_,{children:[(0,s.jsx)(y.$F,{asChild:!0,children:(0,s.jsxs)(o.z,{variant:"ghost",className:"flex items-center gap-2",children:[(0,s.jsx)(x.qE,{className:"h-8 w-8",children:(0,s.jsx)(x.Q5,{className:"bg-green-100 text-teal-700",children:null==t?void 0:null===(e=t.full_name)||void 0===e?void 0:e.split(" ").map(e=>e[0]).join("").toUpperCase()})}),(0,s.jsx)("span",{className:"text-sm font-medium bg-gradient-to-r from-green-400 to-teal-500 bg-clip-text text-transparent",children:null==t?void 0:t.full_name}),(0,s.jsx)(p.Z,{className:"h-4 w-4 text-teal-500"})]})}),(0,s.jsx)(y.AW,{align:"end",className:"w-48",children:(0,s.jsxs)(y.Xi,{onClick:d,className:"text-red-600",children:[(0,s.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),"Sign Out"]})})]})})]})})}),(0,s.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-50 md:hidden bg-white border-t shadow-lg",children:(0,s.jsx)("div",{className:"flex justify-around items-center h-14",children:b.map(e=>(0,s.jsxs)(c(),{href:e.href,className:"flex flex-col items-center justify-center flex-1 py-2 transition-colors ".concat(j(e.href)?"text-teal-600":"text-gray-400 hover:text-teal-500"),children:[(0,s.jsx)(e.icon,{className:"h-6 w-6 mb-0.5 ".concat(j(e.href)?"text-teal-600":"text-gray-400")}),(0,s.jsx)("span",{className:"text-xs font-medium",children:e.mobileLabel||e.label})]},e.label))})})]})},j=e=>{let{children:t,breadcrumbs:a}=e,{profile:d,loading:c}=(0,n.a)(),o=(0,l.useRouter)();return(r.useEffect(()=>{c||(null==d?void 0:d.role)==="parent"||o.push("/dashboard")},[c,d,o]),c)?(0,s.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-islamic-500"})}):(null==d?void 0:d.role)!=="parent"?null:(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100 pt-0",children:[(0,s.jsx)(b,{}),a&&(0,s.jsx)("div",{className:"pt-6 px-4 lg:px-8",children:(0,s.jsx)(i.Z,{items:a})}),(0,s.jsx)("main",{className:"container mx-auto pt-2 pb-6 px-4 lg:px-8",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:t})})]})}},14866:function(e,t,a){"use strict";a.d(t,{C:function(){return d}});var s=a(85893),r=a(67294),n=a(12003),l=a(27742);let i=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-islamic-500 text-white hover:bg-islamic-600",warning:"border-transparent bg-accent-500 text-white hover:bg-accent-600",info:"border-transparent bg-blue-500 text-white hover:bg-blue-600",neutral:"border-transparent bg-gray-400 text-white hover:bg-accent-500"},size:{default:"text-xs px-2.5 py-0.5",sm:"text-[10px] px-2 py-0.5",lg:"text-sm px-3 py-1"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,size:n,...d}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)(i({variant:r,size:n}),a),...d})});d.displayName="Badge"},50947:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},Zb:function(){return l},aY:function(){return c},ll:function(){return d}});var s=a(85893),r=a(67294),n=a(27742);let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});l.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});d.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})}).displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},82698:function(e,t,a){"use strict";a.d(t,{X:function(){return d}});var s=a(85893),r=a(67294),n=a(46069),l=a(80906),i=a(27742);let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.fC,{ref:t,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:(0,s.jsx)(n.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(l.Z,{className:"h-4 w-4"})})})});d.displayName=n.fC.displayName},55051:function(e,t,a){"use strict";a.d(t,{$F:function(){return x},AW:function(){return m},VD:function(){return f},Xi:function(){return u},h_:function(){return o}});var s=a(85893),r=a(67294),n=a(93133),l=a(47782),i=a(80906),d=a(50231),c=a(27742);let o=n.fC,x=n.xz;n.ZA,n.Uv,n.Tr,n.Ee,r.forwardRef((e,t)=>{let{className:a,inset:r,children:i,...d}=e;return(0,s.jsxs)(n.fF,{ref:t,className:(0,c.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",a),...d,children:[i,(0,s.jsx)(l.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=n.fF.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.tu,{ref:t,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=n.tu.displayName;let m=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...l}=e;return(0,s.jsx)(n.Uv,{children:(0,s.jsx)(n.VY,{ref:t,sideOffset:r,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})})});m.displayName=n.VY.displayName;let u=r.forwardRef((e,t)=>{let{className:a,inset:r,...l}=e;return(0,s.jsx)(n.ck,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",a),...l})});u.displayName=n.ck.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,checked:l,...d}=e;return(0,s.jsxs)(n.oC,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:l,...d,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.wU,{children:(0,s.jsx)(i.Z,{className:"h-4 w-4"})})}),r]})}).displayName=n.oC.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(n.Rk,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.wU,{children:(0,s.jsx)(d.Z,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=n.Rk.displayName,r.forwardRef((e,t)=>{let{className:a,inset:r,...l}=e;return(0,s.jsx)(n.__,{ref:t,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...l})}).displayName=n.__.displayName;let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...r})});f.displayName=n.Z0.displayName},28213:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var s=a(85893),r=a(67294),n=a(88055),l=a(98408),i=a(58474),d=a(50947),c=a(14866),o=a(95364),x=a(114),m=a(37663),u=a(21427),f=a(47782),h=a(49175),p=e=>{let{filters:t,pagination:a}=e,[n,l]=(0,r.useState)([]),[i,p]=(0,r.useState)(!0),[g,y]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{p(!0),y(null);try{var e;let a={teacher:(null===(e=t.teachers)||void 0===e?void 0:e[0])||"",grade:t.grades[0]||""},s=await (0,h.tR)(a);l(s),console.log("[TilawatiTable] allStudents:",s),console.log("[TilawatiTable] filters:",t)}catch(e){console.error("Error fetching Tilawati ranking data:",e),y("Failed to load ranking data")}finally{p(!1)}})()},[t.teachers,t.grades]);let b=n.filter(e=>{let a=t.teachers||[],s=0===a.length||a.includes(e.teacherId),r=0===t.grades.length||t.grades.includes("all")||t.grades.includes(e.grade);return s&&r}).map((e,t)=>({...e,rank:t+1})),j=Math.ceil(b.length/a.itemsPerPage),N=(a.currentPage-1)*a.itemsPerPage,w=N+a.itemsPerPage,v=b.slice(N,w),k=e=>1===e?(0,s.jsx)("span",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-yellow-400 text-white text-xl font-bold shadow-md",children:"\uD83E\uDD47"}):2===e?(0,s.jsx)("span",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-300 text-white text-xl font-bold shadow-md",children:"\uD83E\uDD48"}):3===e?(0,s.jsx)("span",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-orange-300 text-white text-xl font-bold shadow-md",children:"\uD83E\uDD49"}):(0,s.jsx)("span",{className:"w-7 h-7 flex items-center justify-center rounded-full bg-gray-100 text-gray-500 text-base font-semibold border border-gray-200",children:e}),C=e=>e>=90?"text-green-600":e>=80?"text-blue-600":e>=70?"text-yellow-600":"text-red-600",P=e=>e>=90?"bg-green-500":e>=80?"bg-blue-500":e>=70?"bg-yellow-500":"bg-red-500",Z=e=>{e>=1&&e<=j&&a.onPageChange(e)};return i?(0,s.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(x.Z,{className:"h-6 w-6 animate-spin text-blue-600"}),(0,s.jsx)("span",{className:"text-gray-600",children:"Loading ranking data..."})]})}):g?(0,s.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-red-600 mb-2",children:g}),(0,s.jsx)(o.z,{onClick:()=>window.location.reload(),variant:"outline",children:"Retry"})]})}):(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)(d.Zb,{className:"bg-white shadow-lg border-0 rounded-xl",children:[(0,s.jsx)(d.Ol,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-100",children:(0,s.jsxs)(d.ll,{className:"flex items-center gap-3 text-gray-800",children:[(0,s.jsx)(m.Z,{className:"h-6 w-6 text-blue-600"}),"Tilawati Reading Rankings"]})}),(0,s.jsxs)(d.aY,{className:"p-0",children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teacher"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Level"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Page"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:v.length>0?v.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:k(e.rank)}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-400 to-indigo-500 flex items-center justify-center text-white font-semibold text-sm",children:e.name.split(" ").map(e=>e[0]).join("")}),(0,s.jsx)("div",{className:"ml-4",children:(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)(c.C,{variant:"outline",className:"border-gray-200 text-gray-700",children:e.class})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.teacher})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)(c.C,{variant:"outline",className:"border-blue-200 text-blue-700",children:["Level ",e.level]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"text-sm text-gray-900",children:["Page ",e.page]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-20 bg-gray-200 rounded-full h-2 mr-3",children:(0,s.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(P(e.progress)),style:{width:"".concat(e.progress,"%")}})}),(0,s.jsxs)("span",{className:"text-sm font-semibold ".concat(C(e.progress)),children:[e.progress,"%"]})]})})]},e.id)):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"No students found"})})})]})}),j>1&&(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-3 border-t border-gray-200",children:[(0,s.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>Z(a.currentPage-1),disabled:1===a.currentPage,"aria-label":"Previous Page",children:(0,s.jsx)(u.Z,{className:"h-4 w-4"})}),(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",a.currentPage," of ",j]}),(0,s.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>Z(a.currentPage+1),disabled:a.currentPage===j,"aria-label":"Next Page",children:(0,s.jsx)(f.Z,{className:"h-4 w-4"})})]})]})]})})},g=a(99737),y=e=>{let{filters:t,pagination:a}=e,[n,l]=(0,r.useState)([]),[i,p]=(0,r.useState)(!0),[y,b]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{p(!0),b(null);try{var e;let a={teacher:(null===(e=t.teachers)||void 0===e?void 0:e[0])||"",grade:t.grades[0]||""},s=await (0,h.X1)(a);l(s)}catch(e){console.error("Error fetching Hafalan ranking data:",e),b("Failed to load ranking data")}finally{p(!1)}})()},[t.teachers,t.grades]);let j=n.filter(e=>{let a=t.teachers||[],s=0===a.length||a.includes(e.teacherId),r=0===t.grades.length||t.grades.includes("all")||t.grades.includes(e.grade);return s&&r}).map((e,t)=>({...e,rank:t+1})),N=Math.ceil(j.length/a.itemsPerPage),w=(a.currentPage-1)*a.itemsPerPage,v=w+a.itemsPerPage,k=j.slice(w,v),C=e=>1===e?(0,s.jsx)("span",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-yellow-400 text-white text-xl font-bold shadow-md",children:"\uD83E\uDD47"}):2===e?(0,s.jsx)("span",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-300 text-white text-xl font-bold shadow-md",children:"\uD83E\uDD48"}):3===e?(0,s.jsx)("span",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-orange-300 text-white text-xl font-bold shadow-md",children:"\uD83E\uDD49"}):(0,s.jsx)("span",{className:"w-7 h-7 flex items-center justify-center rounded-full bg-gray-100 text-gray-500 text-base font-semibold border border-gray-200",children:e}),P=e=>e>=90?"text-green-600":e>=80?"text-blue-600":e>=70?"text-yellow-600":"text-red-600",Z=e=>e>=90?"bg-green-500":e>=80?"bg-blue-500":e>=70?"bg-yellow-500":"bg-red-500",R=e=>{e>=1&&e<=N&&a.onPageChange(e)};return i?(0,s.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(x.Z,{className:"h-6 w-6 animate-spin text-blue-600"}),(0,s.jsx)("span",{className:"text-gray-600",children:"Loading ranking data..."})]})}):y?(0,s.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-red-600 mb-2",children:y}),(0,s.jsx)(o.z,{onClick:()=>window.location.reload(),variant:"outline",children:"Retry"})]})}):(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)(d.Zb,{className:"bg-white shadow-lg border-0 rounded-xl",children:[(0,s.jsx)(d.Ol,{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-b border-gray-100",children:(0,s.jsxs)(d.ll,{className:"flex items-center gap-3 text-gray-800",children:[(0,s.jsx)(g.Z,{className:"h-6 w-6 text-green-600"}),"Al-Quran Memorization Rankings"]})}),(0,s.jsxs)(d.aY,{className:"p-0",children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teacher"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Juz"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Surah"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Verse"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:k.length>0?k.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:C(e.rank)}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-green-400 to-emerald-500 flex items-center justify-center text-white font-semibold text-sm",children:e.name.split(" ").map(e=>e[0]).join("")}),(0,s.jsx)("div",{className:"ml-4",children:(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)(c.C,{variant:"outline",className:"border-gray-200 text-gray-700",children:e.class})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.teacher})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900",children:30===e.juz?"Juz 30":"N/A"})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.surah||"N/A"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.verse||"N/A"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-20 bg-gray-200 rounded-full h-2 mr-3",children:(0,s.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(Z(e.progress)),style:{width:"".concat(e.progress,"%")}})}),(0,s.jsxs)("span",{className:"text-sm font-semibold ".concat(P(e.progress)),children:[e.progress,"%"]})]})})]},e.id)):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:8,className:"px-6 py-4 text-center text-gray-500",children:"No students found"})})})]})}),N>1&&(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-3 border-t border-gray-200",children:[(0,s.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>R(a.currentPage-1),disabled:1===a.currentPage,"aria-label":"Previous Page",children:(0,s.jsx)(u.Z,{className:"h-4 w-4"})}),(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",a.currentPage," of ",N]}),(0,s.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>R(a.currentPage+1),disabled:a.currentPage===N,"aria-label":"Next Page",children:(0,s.jsx)(f.Z,{className:"h-4 w-4"})})]})]})]})})},b=a(82698),j=a(39332),N=a(19078),w=()=>{let{profile:e}=(0,n.a)(),t=(0,j.useRouter)(),[a,d]=(0,r.useState)("tilawati"),[c,o]=(0,r.useState)(["all"]),[f,w]=(0,r.useState)(1),[v,k]=(0,r.useState)([]),[C,P]=(0,r.useState)(!0),[Z,R]=(0,r.useState)(!1),z=c.length>0&&!c.includes("all");(0,r.useEffect)(()=>{(async()=>{P(!0);try{let e=await (0,h._G)();k([{id:"all",name:"All Grades"},...e])}catch(e){console.error("Error fetching filter data:",e),k([{id:"all",name:"All Grades"}])}finally{P(!1)}})()},[]);let E=()=>{w(1)},S=e=>{o(t=>{let a;return a="all"===e?["all"]:t.includes(e)?t.filter(t=>t!==e&&"all"!==t):[...t.filter(e=>"all"!==e),e],E(),0===a.length?["all"]:a})},D=e=>{w(e)},_=[{label:"Dashboard",href:"/dashboard"},{label:"Student Rankings"}],T=(0,s.jsx)("div",{className:"container mx-auto px-0 py-0 md:px-6 md:py-6",children:(0,s.jsxs)("div",{className:"w-full flex flex-col gap-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4 mt-2 w-full",children:[(0,s.jsx)("button",{type:"button",onClick:()=>t.back(),className:"p-0 m-0 bg-transparent border-none outline-none flex items-center","aria-label":"Back",children:(0,s.jsx)(u.Z,{className:"h-6 w-6"})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Rankings"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden p-4 w-full",children:[(0,s.jsxs)("button",{className:"w-full flex items-center gap-3 px-4 py-3 sm:px-6 sm:py-4 border-b border-gray-100 hover:bg-gray-50 focus:outline-none",onClick:()=>R(e=>!e),"aria-expanded":Z,children:[(0,s.jsx)("div",{className:"p-2 bg-gray-100 rounded-lg",children:(0,s.jsx)(N.Z,{className:"h-4 w-4 text-gray-600"})}),(0,s.jsxs)("div",{className:"flex-1 text-left",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 text-base sm:text-lg",children:"Filters"}),(0,s.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:"Refine your search results"}),z&&(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap mt-2",children:[c.length>0&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 sm:px-3 sm:py-1 bg-green-50 text-green-700 text-xs sm:text-sm rounded-full border border-green-200",children:["Grades: ",c.map(e=>{var t;return(null===(t=v.find(t=>t.id===e))||void 0===t?void 0:t.name)||e}).join(", ")]}),(0,s.jsx)("button",{type:"button",onClick:()=>{o(["all"]),w(1)},className:"ml-2 text-xs text-gray-500 hover:text-red-600 underline",children:"Clear Filters"})]})]}),(0,s.jsx)("span",{className:"ml-auto text-xs text-gray-500",children:Z?"Hide":"Show"})]}),Z&&(C?(0,s.jsx)("div",{className:"flex items-center justify-center py-8 sm:py-12",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(x.Z,{className:"h-5 w-5 animate-spin text-blue-600"}),(0,s.jsx)("span",{className:"text-gray-600",children:"Loading filters..."})]})}):(0,s.jsx)("div",{className:"p-4 sm:p-6",children:(0,s.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 sm:gap-6",children:(0,s.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,s.jsxs)("label",{className:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Grade"]}),(0,s.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:v.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(b.X,{id:"grade-".concat(e.id),checked:c.includes(e.id),onCheckedChange:()=>S(e.id),className:"rounded-full"}),(0,s.jsx)("label",{htmlFor:"grade-".concat(e.id),className:"text-sm text-gray-600 cursor-pointer",children:e.name})]},e.id))})]})})}))]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 w-full",children:[(0,s.jsxs)("div",{className:"flex flex-col xs:flex-row border-b border-gray-200 overflow-x-auto min-w-0 w-full",children:[(0,s.jsx)("button",{onClick:()=>d("tilawati"),className:"flex-1 px-2 py-3 sm:px-6 sm:py-4 text-xs sm:text-sm font-medium transition-colors ".concat("tilawati"===a?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"),children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1 sm:gap-2",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4"}),"Tilawati Standing"]})}),(0,s.jsx)("button",{onClick:()=>d("hafalan"),className:"flex-1 px-2 py-3 sm:px-6 sm:py-4 text-xs sm:text-sm font-medium transition-colors ".concat("hafalan"===a?"text-green-600 border-b-2 border-green-600 bg-green-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"),children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1 sm:gap-2",children:[(0,s.jsx)(g.Z,{className:"h-4 w-4"}),"Tahfidz Standing"]})})]}),(0,s.jsx)("div",{className:"p-0 min-w-0 w-full",children:"tilawati"===a?(0,s.jsx)(p,{filters:{grades:c},pagination:{currentPage:f,itemsPerPage:10,onPageChange:D}}):(0,s.jsx)(y,{filters:{grades:c},pagination:{currentPage:f,itemsPerPage:10,onPageChange:D}})})]})]})});return(null==e?void 0:e.role)==="parent"?(0,s.jsx)(l.Z,{breadcrumbs:_,children:T}):(0,s.jsx)(i.Z,{breadcrumbs:_,children:T})}},46069:function(e,t,a){"use strict";a.d(t,{fC:function(){return N},z$:function(){return v}});var s=a(67294),r=a(28771),n=a(25360),l=a(36206),i=a(77342),d=a(57898),c=a(7546),o=a(29115),x=a(75320),m=a(85893),u="Checkbox",[f,h]=(0,n.b)(u),[p,g]=f(u);function y(e){let{__scopeCheckbox:t,checked:a,children:r,defaultChecked:n,disabled:l,form:d,name:c,onCheckedChange:o,required:x,value:f="on",internal_do_not_use_render:h}=e,[g,y]=(0,i.T)({prop:a,defaultProp:n??!1,onChange:o,caller:u}),[b,j]=s.useState(null),[N,w]=s.useState(null),v=s.useRef(!1),k=!b||!!d||!!b.closest("form"),C={checked:g,disabled:l,setChecked:y,control:b,setControl:j,name:c,form:d,value:f,hasConsumerStoppedPropagationRef:v,required:x,defaultChecked:!P(n)&&n,isFormControl:k,bubbleInput:N,setBubbleInput:w};return(0,m.jsx)(p,{scope:t,...C,children:"function"==typeof h?h(C):r})}var b="CheckboxTrigger",j=s.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:a,...n},i)=>{let{control:d,value:c,disabled:o,checked:u,required:f,setControl:h,setChecked:p,hasConsumerStoppedPropagationRef:y,isFormControl:j,bubbleInput:N}=g(b,e),w=(0,r.e)(i,h),v=s.useRef(u);return s.useEffect(()=>{let e=d?.form;if(e){let t=()=>p(v.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[d,p]),(0,m.jsx)(x.WV.button,{type:"button",role:"checkbox","aria-checked":P(u)?"mixed":u,"aria-required":f,"data-state":Z(u),"data-disabled":o?"":void 0,disabled:o,value:c,...n,ref:w,onKeyDown:(0,l.M)(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,l.M)(a,e=>{p(e=>!!P(e)||!e),N&&j&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})})});j.displayName=b;var N=s.forwardRef((e,t)=>{let{__scopeCheckbox:a,name:s,checked:r,defaultChecked:n,required:l,disabled:i,value:d,onCheckedChange:c,form:o,...x}=e;return(0,m.jsx)(y,{__scopeCheckbox:a,checked:r,defaultChecked:n,disabled:i,required:l,onCheckedChange:c,name:s,form:o,value:d,internal_do_not_use_render:({isFormControl:e})=>(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(j,{...x,ref:t,__scopeCheckbox:a}),e&&(0,m.jsx)(C,{__scopeCheckbox:a})]})})});N.displayName=u;var w="CheckboxIndicator",v=s.forwardRef((e,t)=>{let{__scopeCheckbox:a,forceMount:s,...r}=e,n=g(w,a);return(0,m.jsx)(o.z,{present:s||P(n.checked)||!0===n.checked,children:(0,m.jsx)(x.WV.span,{"data-state":Z(n.checked),"data-disabled":n.disabled?"":void 0,...r,ref:t,style:{pointerEvents:"none",...e.style}})})});v.displayName=w;var k="CheckboxBubbleInput",C=s.forwardRef(({__scopeCheckbox:e,...t},a)=>{let{control:n,hasConsumerStoppedPropagationRef:l,checked:i,defaultChecked:o,required:u,disabled:f,name:h,value:p,form:y,bubbleInput:b,setBubbleInput:j}=g(k,e),N=(0,r.e)(a,j),w=(0,d.D)(i),v=(0,c.t)(n);s.useEffect(()=>{if(!b)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!l.current;if(w!==i&&e){let a=new Event("click",{bubbles:t});b.indeterminate=P(i),e.call(b,!P(i)&&i),b.dispatchEvent(a)}},[b,w,i,l]);let C=s.useRef(!P(i)&&i);return(0,m.jsx)(x.WV.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??C.current,required:u,disabled:f,name:h,value:p,form:y,...t,tabIndex:-1,ref:N,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function P(e){return"indeterminate"===e}function Z(e){return P(e)?"indeterminate":e?"checked":"unchecked"}C.displayName=k},57898:function(e,t,a){"use strict";a.d(t,{D:function(){return r}});var s=a(67294);function r(e){let t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}}},function(e){e.O(0,[9332,1799,8288,1664,1063,318,7800,2888,9774,179],function(){return e(e.s=27619)}),_N_E=e.O()}]);