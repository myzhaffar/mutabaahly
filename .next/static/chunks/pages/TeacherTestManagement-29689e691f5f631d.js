(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9994],{20525:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/TeacherTestManagement",function(){return t(42367)}])},58474:function(e,s,t){"use strict";var a=t(85893),r=t(67294),l=t(88055),n=t(39332),i=t(1462),d=t(69750),c=t(12438);s.Z=e=>{let{children:s,breadcrumbs:t}=e,{profile:o,loading:u}=(0,l.a)(),m=(0,n.useRouter)(),[h,f]=(0,r.useState)(!1);return(r.useEffect(()=>{u||(null==o?void 0:o.role)==="teacher"||m.push("/dashboard")},[u,o,m]),u)?(0,a.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-islamic-500"})}):(null==o?void 0:o.role)!=="teacher"?null:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,a.jsxs)("header",{className:"sticky top-0 z-40 bg-white shadow-sm flex items-center justify-between h-16 px-4 lg:px-8 lg:hidden",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-9 h-9 bg-gradient-to-br from-teal-500 to-green-500 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold text-lg",children:"M"})}),(0,a.jsx)("span",{className:"font-semibold text-lg text-gray-900 hidden sm:inline",children:"Mutabaahly"})]}),(0,a.jsx)("button",{className:"lg:hidden p-2 rounded-md text-teal-700 hover:bg-teal-50",onClick:()=>f(e=>!e),children:(0,a.jsx)(c.Z,{className:"h-7 w-7"})})]}),(0,a.jsx)(i.Z,{isMobileMenuOpen:h,setIsMobileMenuOpen:f}),(0,a.jsxs)("main",{className:"lg:pl-64 min-h-screen",children:[t&&(0,a.jsx)("div",{className:"pt-6 px-4 lg:px-8",children:(0,a.jsx)(d.Z,{items:t})}),(0,a.jsx)("div",{className:"container mx-auto pt-2 pb-6 px-4 lg:px-8",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:s})})]})]})}},46257:function(e,s,t){"use strict";var a=t(85893),r=t(67294),l=t(53487),n=t(19078),i=t(87095),d=t(82698);let c=[{value:"scheduled",label:"Scheduled"},{value:"passed",label:"Passed"},{value:"failed",label:"Failed"}],o=[{value:"Level 1",label:"Level 1"},{value:"Level 2",label:"Level 2"},{value:"Level 3",label:"Level 3"},{value:"Level 4",label:"Level 4"},{value:"Level 5",label:"Level 5"},{value:"Level 6",label:"Level 6"}];s.Z=e=>{let{searchTerm:s="",status:t=[],jilidLevel:u=[],date:m,onFilterChange:h,showDateFilter:f=!1}=e,[x,p]=(0,r.useState)(!1),v=t&&t.length>0||u&&u.length>0||m;return(0,a.jsxs)("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl shadow-lg border border-gray-200 mb-6 px-0 sm:px-0",children:[(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"relative w-full mb-4",children:[(0,a.jsx)(l.Z,{className:"absolute left-3 top-2.5 h-4 w-4 text-blue-400"}),(0,a.jsx)(i.I,{placeholder:"Search students by name...",value:s,onChange:e=>h("searchTerm",e.target.value),className:"pl-9 pr-4 w-full bg-blue-50 border border-blue-200 rounded-lg focus:border-blue-400 focus:ring-2 focus:ring-blue-100 text-base py-2 shadow-sm"})]}),(0,a.jsxs)("button",{className:"w-full flex items-center gap-3 px-0 py-3 border-b border-gray-100 hover:bg-gray-50 focus:outline-none",onClick:()=>p(e=>!e),"aria-expanded":x,children:[(0,a.jsx)("div",{className:"p-2 bg-gray-100 rounded-lg",children:(0,a.jsx)(n.Z,{className:"h-4 w-4 text-gray-600"})}),(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 text-base sm:text-lg",children:"Filters"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:"Refine your search results"}),v&&(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap mt-2",children:[t.length>0&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 sm:px-3 sm:py-1 bg-blue-50 text-blue-700 text-xs sm:text-sm rounded-full border border-blue-200",children:["Status: ",t.map(e=>{var s;return(null===(s=c.find(s=>s.value===e))||void 0===s?void 0:s.label)||e}).join(", ")]}),u.length>0&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 sm:px-3 sm:py-1 bg-blue-50 text-blue-700 text-xs sm:text-sm rounded-full border border-blue-200",children:["Level: ",u.map(e=>{var s;return(null===(s=o.find(s=>s.value===e))||void 0===s?void 0:s.label)||e}).join(", ")]}),(0,a.jsx)("button",{type:"button",onClick:()=>{h("searchTerm",""),h("status",[]),h("jilidLevel",[]),f&&h("date",void 0)},className:"ml-2 text-xs text-gray-500 hover:text-red-600 underline",children:"Clear Filters"})]})]}),(0,a.jsx)("span",{className:"ml-auto text-xs text-gray-500",children:x?"Hide":"Show"})]})]}),x&&(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 sm:gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,a.jsxs)("label",{className:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Status"]}),(0,a.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:c.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.X,{id:"status-filter-".concat(e.value),checked:t.includes(e.value),onCheckedChange:()=>{h("status",t.includes(e.value)?t.filter(s=>s!==e.value):[...t,e.value])},className:"rounded-full"}),(0,a.jsx)("label",{htmlFor:"status-filter-".concat(e.value),className:"text-sm text-gray-700 cursor-pointer",children:e.label})]},e.value))})]}),(0,a.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,a.jsxs)("label",{className:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),"Level"]}),(0,a.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:o.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.X,{id:"jilid-filter-".concat(e.value),checked:u.includes(e.value),onCheckedChange:()=>{h("jilidLevel",u.includes(e.value)?u.filter(s=>s!==e.value):[...u,e.value])},className:"rounded-full"}),(0,a.jsx)("label",{htmlFor:"jilid-filter-".concat(e.value),className:"text-sm text-gray-700 cursor-pointer",children:e.label})]},e.value))})]})]})})]})}},11099:function(e,s,t){"use strict";t.d(s,{OL:function(){return v},_T:function(){return m},aR:function(){return d},f$:function(){return x},fY:function(){return h},le:function(){return b},vW:function(){return c},xo:function(){return f},yT:function(){return p}});var a=t(85893),r=t(67294),l=t(89532),n=t(27742),i=t(95364);let d=l.fC,c=l.xz,o=l.h_,u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.aV,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r,ref:s})});u.displayName=l.aV.displayName;let m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(u,{}),(0,a.jsx)(l.VY,{ref:s,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r})]})});m.displayName=l.VY.displayName;let h=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...t})};h.displayName="AlertDialogHeader";let f=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};f.displayName="AlertDialogFooter";let x=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.Dx,{ref:s,className:(0,n.cn)("text-lg font-semibold",t),...r})});x.displayName=l.Dx.displayName;let p=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.dk,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});p.displayName=l.dk.displayName;let v=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.aU,{ref:s,className:(0,n.cn)((0,i.d)(),t),...r})});v.displayName=l.aU.displayName;let b=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.$j,{ref:s,className:(0,n.cn)((0,i.d)({variant:"outline"}),"mt-2 sm:mt-0",t),...r})});b.displayName=l.$j.displayName},14866:function(e,s,t){"use strict";t.d(s,{C:function(){return d}});var a=t(85893),r=t(67294),l=t(12003),n=t(27742);let i=(0,l.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-islamic-500 text-white hover:bg-islamic-600",warning:"border-transparent bg-accent-500 text-white hover:bg-accent-600",info:"border-transparent bg-blue-500 text-white hover:bg-blue-600",neutral:"border-transparent bg-gray-400 text-white hover:bg-accent-500"},size:{default:"text-xs px-2.5 py-0.5",sm:"text-[10px] px-2 py-0.5",lg:"text-sm px-3 py-1"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,s)=>{let{className:t,variant:r,size:l,...d}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)(i({variant:r,size:l}),t),...d})});d.displayName="Badge"},82698:function(e,s,t){"use strict";t.d(s,{X:function(){return d}});var a=t(85893),r=t(67294),l=t(46069),n=t(80906),i=t(27742);let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.fC,{ref:s,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...r,children:(0,a.jsx)(l.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})})});d.displayName=l.fC.displayName},37435:function(e,s,t){"use strict";t.d(s,{$N:function(){return p},Be:function(){return v},GG:function(){return u},Vq:function(){return d},cN:function(){return x},cZ:function(){return h},fK:function(){return f},hg:function(){return c}});var a=t(85893),r=t(67294),l=t(12854),n=t(22972),i=t(27742);let d=l.fC,c=l.xz,o=l.h_,u=l.x8,m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.aV,{ref:s,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});m.displayName=l.aV.displayName;let h=r.forwardRef((e,s)=>{let{className:t,children:r,...d}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(l.VY,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...d,children:[r,(0,a.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=l.VY.displayName;let f=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};f.displayName="DialogHeader";let x=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};x.displayName="DialogFooter";let p=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.Dx,{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});p.displayName=l.Dx.displayName;let v=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.dk,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...r})});v.displayName=l.dk.displayName},20362:function(e,s,t){"use strict";t.d(s,{O:function(){return i}});var a=t(85893),r=t(67294),l=t(95364),n=t(27742);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.z,{className:(0,n.cn)("bg-gradient-to-r from-emerald-500 to-teal-400 hover:opacity-90 text-white",t),ref:s,...r})});i.displayName="GradientButton"},87095:function(e,s,t){"use strict";t.d(s,{I:function(){return n}});var a=t(85893),r=t(67294),l=t(27742);let n=r.forwardRef((e,s)=>{let{className:t,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...n})});n.displayName="Input"},7825:function(e,s,t){"use strict";t.d(s,{_:function(){return c}});var a=t(85893),r=t(67294),l=t(49102),n=t(12003),i=t(27742);let d=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.f,{ref:s,className:(0,i.cn)(d(),t),...r})});c.displayName=l.f.displayName},15659:function(e,s,t){"use strict";t.d(s,{Bw:function(){return x},Ph:function(){return o},Ql:function(){return p},i4:function(){return m},ki:function(){return u}});var a=t(85893),r=t(67294),l=t(73952),n=t(89934),i=t(87493),d=t(80906),c=t(27742);let o=l.fC;l.ZA;let u=l.B4,m=r.forwardRef((e,s)=>{let{className:t,children:r,...i}=e;return(0,a.jsxs)(l.xz,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[r,(0,a.jsx)(l.JO,{asChild:!0,children:(0,a.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=l.xz.displayName;let h=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.u_,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});h.displayName=l.u_.displayName;let f=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.$G,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})});f.displayName=l.$G.displayName;let x=r.forwardRef((e,s)=>{let{className:t,children:r,position:n="popper",...i}=e;return(0,a.jsx)(l.h_,{children:(0,a.jsxs)(l.VY,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[(0,a.jsx)(h,{}),(0,a.jsx)(l.l_,{className:(0,c.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(f,{})]})})});x.displayName=l.VY.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.__,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=l.__.displayName;let p=r.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(l.ck,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.wU,{children:(0,a.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(l.eT,{children:r})]})});p.displayName=l.ck.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.Z0,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=l.Z0.displayName},70207:function(e,s,t){"use strict";t.d(s,{RM:function(){return d},SC:function(){return c},iA:function(){return n},pj:function(){return u},ss:function(){return o},xD:function(){return i}});var a=t(85893),r=t(67294),l=t(27742);let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,l.cn)("w-full caption-bottom text-sm",t),...r})})});n.displayName="Table";let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("thead",{ref:s,className:(0,l.cn)("[&_tr]:border-b",t),...r})});i.displayName="TableHeader";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tbody",{ref:s,className:(0,l.cn)("[&_tr:last-child]:border-0",t),...r})});d.displayName="TableBody",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tfoot",{ref:s,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r})}).displayName="TableFooter";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tr",{ref:s,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r})});c.displayName="TableRow";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("th",{ref:s,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...r})});o.displayName="TableHead";let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("td",{ref:s,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...r})});u.displayName="TableCell",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("caption",{ref:s,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",t),...r})}).displayName="TableCaption"},9451:function(e,s,t){"use strict";t.d(s,{g:function(){return n}});var a=t(85893),r=t(67294),l=t(27742);let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r})});n.displayName="Textarea"},150:function(e,s,t){"use strict";t.d(s,{p:function(){return a.pm}});var a=t(12987)},12987:function(e,s,t){"use strict";t.d(s,{pm:function(){return m}});var a=t(67294);let r=0,l=new Map,n=e=>{if(l.has(e))return;let s=setTimeout(()=>{l.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,s)},i=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},d=[],c={toasts:[]};function o(e){c=i(c,e),d.forEach(e=>{e(c)})}function u(e){let{...s}=e,t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,s]=a.useState(c);return a.useEffect(()=>(d.push(s),()=>{let e=d.indexOf(s);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},46573:function(e,s,t){"use strict";t.d(s,{O:function(){return a}});let a=(0,t(56844).eI)("https://isyhakwwgdozgtlquzis.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlzeWhha3d3Z2Rvemd0bHF1emlzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY5NTY3NzcsImV4cCI6MjA2MjUzMjc3N30.-2Ya944q8mgJzRAuhMpRAWgxWVmt2yc3CqM0jjgFuuY",{db:{schema:"public"}})},42367:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return O}});var a=t(85893),r=t(67294),l=t(30202),n=t(54033),i=t(21427),d=t(36460),c=t(20362),o=t(150),u=t(37435),m=t(95364),h=t(87095),f=t(7825),x=t(15659),p=t(9451),v=t(88055),b=t(46573);let j=async e=>{try{console.log("Fetching tests with filters:",e);let s=b.O.from("tilawati_level_tests").select("*").order("date",{ascending:!1});e.status&&"all"!==e.status&&Array.isArray(e.status)&&e.status.length>0?s=1===e.status.length?s.eq("status",e.status[0]):s.in("status",e.status):e.status&&"all"!==e.status&&"string"==typeof e.status&&(s=s.eq("status",e.status)),e.jilidLevel&&"all"!==e.jilidLevel&&Array.isArray(e.jilidLevel)&&e.jilidLevel.length>0?s=1===e.jilidLevel.length?s.eq("tilawati_level",e.jilidLevel[0]):s.in("tilawati_level",e.jilidLevel):e.jilidLevel&&"all"!==e.jilidLevel&&"string"==typeof e.jilidLevel&&(s=s.eq("tilawati_level",e.jilidLevel)),e.searchTerm&&(s=s.ilike("class_name","%".concat(e.searchTerm,"%"))),e.date&&(s=s.eq("date",e.date));let{data:t,error:a}=await s;if(a)throw console.error("Error fetching tests with filters:",a),a;return console.log("Fetched tests:",t),t||[]}catch(e){throw console.error("Error in fetchTestsWithFilters:",e),e}},g=async(e,s)=>{try{if(s){let{data:t,error:a}=await b.O.from("tilawati_level_tests").update(e).eq("id",s).select().single();if(a)throw console.error("Error updating test:",a),a;return t}{let{data:s,error:t}=await b.O.from("tilawati_level_tests").insert([e]).select().single();if(t)throw console.error("Error creating test:",t),t;return s}}catch(e){throw console.error("Error in saveTest:",e),e}},y=async e=>{if(!e)throw Error("Test ID is required");try{let{error:s}=await b.O.from("tilawati_level_tests").delete().eq("id",e);if(s)throw console.error("Error deleting test:",s),Error(s.message)}catch(e){throw console.error("Error in deleteTest:",e),e}},N=["Level 1","Level 2","Level 3","Level 4","Level 5","Level 6"],w=["scheduled","passed","failed"];var A=e=>{let{isOpen:s,onClose:t,onTestAddedOrUpdated:l,students:n,currentTest:i}=e,{profile:d}=(0,v.a)(),[o,b]=(0,r.useState)(""),[j,y]=(0,r.useState)(""),[A,_]=(0,r.useState)(""),[T,S]=(0,r.useState)(""),[C,k]=(0,r.useState)((null==d?void 0:d.full_name)||""),[L,I]=(0,r.useState)("scheduled"),[q,z]=(0,r.useState)(""),[D,R]=(0,r.useState)(!1),[M,E]=(0,r.useState)(null);(0,r.useEffect)(()=>{i?(b(i.student_id),y(i.class_name||""),_(i.tilawati_level),S(i.date?new Date(i.date).toISOString().substring(0,10):""),k(i.munaqisy),I(i.status),z(i.notes||"")):(b(""),y(""),_(""),S(""),k((null==d?void 0:d.full_name)||""),I("scheduled"),z(""))},[i,s,null==d?void 0:d.full_name]),(0,r.useEffect)(()=>{if(o&&!i){let e=n.find(e=>e.id===o);(null==e?void 0:e.class_name)&&y(e.class_name),(null==e?void 0:e.current_tilawati_jilid)&&_(e.current_tilawati_jilid)}},[o,n,i]);let F=async e=>{if(e.preventDefault(),R(!0),E(null),!o||!A||!T||!C||!j){E("All required fields must be filled."),R(!1);return}try{let e=await g({student_id:o,class_name:j,tilawati_level:A,date:T,munaqisy:C,status:L,notes:q||""},null==i?void 0:i.id);l(e),t()}catch(e){console.error("Error saving test:",e),E(e instanceof Error?e.message:"An unexpected error occurred.")}finally{R(!1)}},O=n.find(e=>e.id===o);return(0,a.jsx)(u.Vq,{open:s,onOpenChange:e=>!e&&t(),children:(0,a.jsxs)(u.cZ,{className:"sm:max-w-[525px] bg-white flex flex-col h-[calc(100vh-32px)] sm:h-auto max-h-[calc(100vh-32px)] p-0","aria-describedby":"add-test-description",children:[(0,a.jsxs)(u.fK,{className:"px-6 pt-6 flex-shrink-0",children:[(0,a.jsx)(u.$N,{children:i?"Edit Tilawati Test":"Schedule Tilawati Test"}),(0,a.jsx)(u.Be,{id:"add-test-description",children:i?"Edit test details below.":"Fill in the Tilawati test details for the student."})]}),(0,a.jsxs)("form",{onSubmit:F,className:"flex flex-col min-h-0 flex-1",children:[(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto px-6",children:[(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(f._,{htmlFor:"student",children:"Student"}),(0,a.jsxs)(x.Ph,{value:o,onValueChange:b,disabled:!!i,children:[(0,a.jsx)(x.i4,{id:"student",children:(0,a.jsx)(x.ki,{placeholder:"Select Student"})}),(0,a.jsx)(x.Bw,{children:n.map(e=>(0,a.jsxs)(x.Ql,{value:e.id,children:[e.name," ",e.class_name?"(".concat(e.class_name,")"):""," - ",e.current_tilawati_jilid]},e.id))})]}),o&&(0,a.jsxs)("div",{className:"text-sm mt-1",children:[(0,a.jsx)("p",{className:"text-green-600",children:"âœ… Student has completed their current level and is ready for testing"}),O&&(0,a.jsxs)("p",{className:"text-muted-foreground mt-1",children:["Teacher: ",O.teacher]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(f._,{htmlFor:"className",children:"Class Name"}),(0,a.jsx)(h.I,{id:"className",value:j,onChange:e=>y(e.target.value),placeholder:"Class Name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(f._,{htmlFor:"tilawatiLevel",children:"Tilawati Level"}),(0,a.jsxs)(x.Ph,{value:A,onValueChange:e=>_(e),children:[(0,a.jsx)(x.i4,{id:"tilawatiLevel",children:(0,a.jsx)(x.ki,{placeholder:"Select Tilawati Level"})}),(0,a.jsx)(x.Bw,{children:N.map(e=>(0,a.jsx)(x.Ql,{value:e,children:e},e))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(f._,{htmlFor:"testDate",children:"Test Date"}),(0,a.jsx)(h.I,{id:"testDate",type:"date",value:T,onChange:e=>S(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(f._,{htmlFor:"munaqisy",children:"Examiner"}),(0,a.jsx)(h.I,{id:"munaqisy",value:C,onChange:e=>k(e.target.value),placeholder:"Examiner Name"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(f._,{htmlFor:"status",children:"Status"}),(0,a.jsxs)(x.Ph,{value:L,onValueChange:e=>I(e),children:[(0,a.jsx)(x.i4,{id:"status",children:(0,a.jsx)(x.ki,{placeholder:"Select Status"})}),(0,a.jsx)(x.Bw,{children:w.map(e=>(0,a.jsx)(x.Ql,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1).replace("_"," ")},e))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(f._,{htmlFor:"notes",children:"Notes"}),(0,a.jsx)(p.g,{id:"notes",value:q,onChange:e=>z(e.target.value),placeholder:"Add notes if needed...",className:"h-20"})]})]}),M&&(0,a.jsx)("div",{className:"text-sm font-medium text-red-500 mt-2 mb-4",children:M})]}),(0,a.jsx)(u.cN,{className:"px-6 py-4 bg-gray-50 border-t mt-auto flex-shrink-0",children:(0,a.jsxs)("div",{className:"flex justify-end gap-4 w-full",children:[(0,a.jsx)(u.GG,{asChild:!0,children:(0,a.jsx)(m.z,{variant:"outline",onClick:t,children:"Cancel"})}),(0,a.jsx)(c.O,{type:"submit",disabled:D,children:D?"Saving...":i?"Save Changes":"Add Test"})]})})]})]})})},_=t(58474),T=t(46257),S=t(84784),C=t(70207),k=t(14866),L=t(69972),I=t(39163),q=e=>{let{test:s,onTestUpdated:t}=e,[l,n]=(0,r.useState)(!1),[i,d]=(0,r.useState)(!1),[c,v]=(0,r.useState)({student_id:s.student_id,class_name:s.class_name,tilawati_level:s.tilawati_level,date:s.date,munaqisy:s.munaqisy,status:s.status,notes:s.notes||""}),{toast:j}=(0,o.p)(),g=async e=>{e.preventDefault(),d(!0);try{let{error:e}=await b.O.from("tilawati_level_tests").update(c).eq("id",s.id);if(e)throw e;j({title:"Success",description:"Test updated successfully!"}),n(!1),t()}catch(e){console.error("Error updating test:",e),j({title:"Error",description:"Failed to update test. Please try again.",variant:"destructive"})}finally{d(!1)}},y=(e,s)=>{v(t=>({...t,[e]:s}))};return(0,a.jsxs)(u.Vq,{open:l,onOpenChange:n,children:[(0,a.jsx)(u.hg,{asChild:!0,children:(0,a.jsx)(m.z,{variant:"ghost",size:"sm",children:(0,a.jsx)(I.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)(u.cZ,{className:"sm:max-w-[425px]","aria-describedby":"edit-test-description",children:[(0,a.jsxs)(u.fK,{children:[(0,a.jsx)(u.$N,{children:"Edit Test"}),(0,a.jsx)(u.Be,{id:"edit-test-description",children:"Update the test details for this student."})]}),(0,a.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"date",children:"Test Date"}),(0,a.jsx)(h.I,{id:"date",type:"date",value:c.date,onChange:e=>y("date",e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"tilawati_level",children:"Target Level"}),(0,a.jsxs)(x.Ph,{value:c.tilawati_level,onValueChange:e=>y("tilawati_level",e),children:[(0,a.jsx)(x.i4,{children:(0,a.jsx)(x.ki,{placeholder:"Select target level"})}),(0,a.jsxs)(x.Bw,{children:[(0,a.jsx)(x.Ql,{value:"Jilid 1",children:"Jilid 1"}),(0,a.jsx)(x.Ql,{value:"Jilid 2",children:"Jilid 2"}),(0,a.jsx)(x.Ql,{value:"Jilid 3",children:"Jilid 3"}),(0,a.jsx)(x.Ql,{value:"Jilid 4",children:"Jilid 4"}),(0,a.jsx)(x.Ql,{value:"Jilid 5",children:"Jilid 5"}),(0,a.jsx)(x.Ql,{value:"Jilid 6",children:"Jilid 6"}),(0,a.jsx)(x.Ql,{value:"Al-Quran",children:"Al-Quran"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"munaqisy",children:"Examiner"}),(0,a.jsx)(h.I,{id:"munaqisy",value:c.munaqisy,onChange:e=>y("munaqisy",e.target.value),placeholder:"Examiner name",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"status",children:"Status"}),(0,a.jsxs)(x.Ph,{value:c.status,onValueChange:e=>y("status",e),children:[(0,a.jsx)(x.i4,{children:(0,a.jsx)(x.ki,{placeholder:"Select test status"})}),(0,a.jsxs)(x.Bw,{children:[(0,a.jsx)(x.Ql,{value:"scheduled",children:"Scheduled"}),(0,a.jsx)(x.Ql,{value:"passed",children:"Passed"}),(0,a.jsx)(x.Ql,{value:"failed",children:"Failed"}),(0,a.jsx)(x.Ql,{value:"pending_retake",children:"Pending Retake"}),(0,a.jsx)(x.Ql,{value:"cancelled",children:"Cancelled"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"notes",children:"Notes"}),(0,a.jsx)(p.g,{id:"notes",value:c.notes,onChange:e=>y("notes",e.target.value),placeholder:"Additional notes...",rows:3})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(m.z,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),(0,a.jsx)(m.z,{type:"submit",disabled:i,children:i?"Updating...":"Update Test"})]})]})]})]})},z=t(97613),D=t(11099),R=e=>{let{testId:s,onTestDeleted:t}=e,{toast:r}=(0,o.p)(),n=(0,l.NL)(),i=async()=>{try{await y(s),await n.invalidateQueries({queryKey:["tilawati-tests"]}),r({title:"Success",description:"Test deleted successfully!"}),t&&t()}catch(e){console.error("Error deleting test:",e),r({title:"Error",description:"Failed to delete test. Please try again.",variant:"destructive"})}};return(0,a.jsxs)(D.aR,{children:[(0,a.jsx)(D.vW,{asChild:!0,children:(0,a.jsx)(m.z,{variant:"ghost",size:"sm",children:(0,a.jsx)(z.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)(D._T,{children:[(0,a.jsxs)(D.fY,{children:[(0,a.jsx)(D.f$,{children:"Delete Test"}),(0,a.jsx)(D.yT,{children:"Are you sure you want to delete this test? This action cannot be undone."})]}),(0,a.jsxs)(D.xo,{children:[(0,a.jsx)(D.le,{children:"Cancel"}),(0,a.jsx)(D.OL,{onClick:i,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})},M=e=>{let{tests:s,isLoading:t,onTestUpdated:r,showStudentName:l=!1,getStudentName:n}=e,i=e=>(0,a.jsx)(k.C,{className:{scheduled:"bg-blue-100 text-blue-800",passed:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",pending_retake:"bg-yellow-100 text-yellow-800",cancelled:"bg-gray-100 text-gray-800"}[e],children:e.charAt(0).toUpperCase()+e.slice(1).replace("_"," ")}),d=e=>{alert("Test Details:\nStudent: ".concat(n?n(e.student_id):e.student_id,"\nDate: ").concat((0,S.WU)(new Date(e.date),"dd/MM/yyyy"),"\nClass: ").concat(e.class_name||"-","\nLevel: ").concat(e.tilawati_level,"\nMunaqisy: ").concat(e.munaqisy,"\nStatus: ").concat(e.status,"\nNotes: ").concat(e.notes||"No notes"))};return t?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(()=>(0,a.jsx)("div",{className:"space-y-4 md:hidden",children:s.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 space-y-3",children:[l&&(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-medium",children:n?n(e.student_id):e.student_id}),i(e.status)]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Class"}),(0,a.jsx)("p",{className:"font-medium",children:e.class_name||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Level"}),(0,a.jsx)("p",{className:"font-medium",children:e.tilawati_level})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Date"}),(0,a.jsx)("p",{className:"font-medium",children:(0,S.WU)(new Date(e.date),"dd/MM/yyyy")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Examiner"}),(0,a.jsx)("p",{className:"font-medium",children:e.munaqisy})]})]}),e.notes&&(0,a.jsxs)("div",{className:"border-t pt-2",children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Notes"}),(0,a.jsx)("p",{className:"text-sm",children:e.notes})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-2 border-t",children:[(0,a.jsx)(m.z,{variant:"ghost",size:"sm",onClick:()=>d(e),children:(0,a.jsx)(L.Z,{className:"h-4 w-4"})}),(0,a.jsx)(q,{test:e,onTestUpdated:r}),(0,a.jsx)(R,{testId:e.id,onTestDeleted:r})]})]},e.id))}),{}),(0,a.jsx)(()=>(0,a.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,a.jsxs)(C.iA,{children:[(0,a.jsx)(C.xD,{children:(0,a.jsxs)(C.SC,{children:[l&&(0,a.jsx)(C.ss,{children:"Student Name"}),(0,a.jsx)(C.ss,{children:"Class"}),(0,a.jsx)(C.ss,{children:"Tilawati Level"}),(0,a.jsx)(C.ss,{children:"Date"}),(0,a.jsx)(C.ss,{children:"Examiner"}),(0,a.jsx)(C.ss,{children:"Status"}),(0,a.jsx)(C.ss,{children:"Notes"}),(0,a.jsx)(C.ss,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(C.RM,{children:s.map(e=>(0,a.jsxs)(C.SC,{children:[l&&(0,a.jsx)(C.pj,{children:n?n(e.student_id):e.student_id}),(0,a.jsx)(C.pj,{children:e.class_name||"-"}),(0,a.jsx)(C.pj,{children:e.tilawati_level}),(0,a.jsx)(C.pj,{children:(0,S.WU)(new Date(e.date),"dd/MM/yyyy")}),(0,a.jsx)(C.pj,{children:e.munaqisy}),(0,a.jsx)(C.pj,{children:i(e.status)}),(0,a.jsx)(C.pj,{children:e.notes||"-"}),(0,a.jsx)(C.pj,{className:"text-right",children:(0,a.jsxs)("div",{className:"flex justify-end space-x-1",children:[(0,a.jsx)(m.z,{variant:"ghost",size:"sm",onClick:()=>d(e),children:(0,a.jsx)(L.Z,{className:"h-4 w-4"})}),(0,a.jsx)(q,{test:e,onTestUpdated:r}),(0,a.jsx)(R,{testId:e.id,onTestDeleted:r})]})})]},e.id))})]})}),{})]})},E=t(43463),F=t(39332),O=()=>{let e=(0,F.useRouter)(),{profile:s}=(0,v.a)(),{toast:t}=(0,o.p)(),u=(0,l.NL)(),[m,h]=(0,r.useState)(!1),[f,x]=(0,r.useState)(null),[p,g]=(0,r.useState)({status:[],jilidLevel:[]}),{data:y,refetch:N}=(0,n.a)({queryKey:["teacher-students",null==s?void 0:s.id],queryFn:async()=>{if(!(null==s?void 0:s.id))return[];let{data:e,error:t}=await b.O.from("students").select("\n          id,\n          name,\n          group_name,\n          grade,\n          teacher,\n          photo\n        ").order("name");if(t)throw console.error("Error fetching students:",t),t;return e&&0!==e.length?(await Promise.all(e.map(async e=>{try{let{data:s,error:t}=await b.O.from("progress_entries").select("*").eq("student_id",e.id).eq("type","tilawah").order("date",{ascending:!1});if(t)return console.error("Error fetching tilawah entries for student ".concat(e.id,":"),t),null;let a=(0,E.L)(s||[]);if(100!==a.percentage)return null;return{id:e.id,name:e.name,current_tilawati_jilid:a.jilid||"Jilid 1",class_name:e.group_name||"",teacher:e.teacher,progress_percentage:a.percentage,is_eligible_for_test:!0}}catch(s){return console.error("Error processing student ".concat(e.id,":"),s),null}}))).filter(e=>null!==e):[]},enabled:!!(null==s?void 0:s.id)}),{data:w,isLoading:S}=(0,n.a)({queryKey:["tilawati-tests",p],queryFn:()=>j(p),enabled:!!(null==s?void 0:s.id),staleTime:0,gcTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0}),C=()=>{u.invalidateQueries({queryKey:["tilawati-tests"]}),N(),t({title:"Success",description:"Test data has been updated successfully."})};return(0,a.jsx)(_.Z,{breadcrumbs:[{label:"Dashboard",href:"/dashboard"},{label:"Tilawati Tests"}],children:(0,a.jsxs)("div",{className:"container mx-auto px-0 md:px-6 md:py-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6 w-full mb-6",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center gap-3 sm:gap-4 mt-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>e.push("/dashboard"),className:"p-0 m-0 bg-transparent border-none outline-none flex items-center","aria-label":"Back",children:(0,a.jsx)(i.Z,{className:"h-6 w-6"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Tilawati Tests"})]}),(0,a.jsxs)(c.O,{onClick:()=>h(!0),className:"w-full md:w-auto",children:[(0,a.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),"Schedule Test"]})]}),(0,a.jsx)(T.Z,{searchTerm:p.searchTerm,status:p.status,jilidLevel:p.jilidLevel,date:p.date,onFilterChange:(e,s)=>{g(t=>({...t,[e]:s}))},showDateFilter:!0}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,a.jsx)(M,{tests:w||[],isLoading:S,onTestUpdated:C,showStudentName:!0,getStudentName:e=>{let s=null==y?void 0:y.find(s=>s.id===e);return(null==s?void 0:s.name)||"Unknown Student"}})}),m&&(0,a.jsx)(A,{isOpen:m,onClose:()=>{h(!1),x(null)},onTestAddedOrUpdated:C,currentTest:f,students:y||[]})]})})}},43463:function(e,s,t){"use strict";t.d(s,{B:function(){return r},L:function(){return l}});var a=t(81462);let r=e=>{if(!e||0===e.length)return{percentage:0,last_surah:null,total_verses:0};let s=[...e].sort((e,s)=>new Date(s.date).getTime()-new Date(e.date).getTime()),t=s[0].surah_or_jilid,r=(0,a.Ig)(t);if(!r)return{percentage:0,last_surah:t,total_verses:0};let l=new Date(s[0].date);for(let e=1;e<s.length;e++)if(s[e].surah_or_jilid!==t){l=new Date(s[0].date);break}let n=e.filter(e=>e.surah_or_jilid===t&&new Date(e.date)>=l),i=new Set;for(let e of n)if(e.ayat_or_page){let s=e.ayat_or_page;if(s.includes("-")){let[e,t]=s.split("-").map(e=>parseInt(e.trim()));if(!isNaN(e)&&!isNaN(t)&&t>=e)for(let s=e;s<=t;s++)s<=r.verses&&i.add(s)}else{let e=parseInt(s);!isNaN(e)&&e<=r.verses&&i.add(e)}}let d=i.size;return{percentage:Math.min(Math.round(d/r.verses*100),100),last_surah:t,total_verses:d,start_date:l.toISOString().split("T")[0]}},l=e=>{if(!e||0===e.length)return console.log("No entries provided for progress calculation"),{percentage:0,jilid:null,total_pages:0};let s=[...e].sort((e,s)=>new Date(s.date).getTime()-new Date(e.date).getTime())[0],t=0,a=null;if(s&&(a=s.surah_or_jilid,console.log("Latest entry:",s),s.ayat_or_page)){let e=s.ayat_or_page;if(console.log("Processing page range:",e),e&&e.includes("-")){let[,s]=e.split("-").map(e=>parseInt(e.trim()));isNaN(s)||(t=s)}else if(e){let s=parseInt(e.trim());isNaN(s)||(t=s)}}let r=Math.min(Math.round(t/44*100),100);return console.log("Calculated percentage:",r,"based on page",t,"out of",44),{percentage:r,jilid:a,total_pages:t}}},81462:function(e,s,t){"use strict";t.d(s,{Ig:function(){return r},n5:function(){return a}});let a=[{number:1,name:"Al-Fatihah",verses:7},{number:2,name:"Al-Baqarah",verses:286},{number:3,name:"Ali 'Imran",verses:200},{number:4,name:"An-Nisa",verses:176},{number:5,name:"Al-Ma'idah",verses:120},{number:6,name:"Al-An'am",verses:165},{number:7,name:"Al-A'raf",verses:206},{number:8,name:"Al-Anfal",verses:75},{number:9,name:"At-Tawbah",verses:129},{number:10,name:"Yunus",verses:109},{number:11,name:"Hud",verses:123},{number:12,name:"Yusuf",verses:111},{number:13,name:"Ar-Ra'd",verses:43},{number:14,name:"Ibrahim",verses:52},{number:15,name:"Al-Hijr",verses:99},{number:16,name:"An-Nahl",verses:128},{number:17,name:"Al-Isra",verses:111},{number:18,name:"Al-Kahf",verses:110},{number:19,name:"Maryam",verses:98},{number:20,name:"Taha",verses:135},{number:21,name:"Al-Anbya",verses:112},{number:22,name:"Al-Hajj",verses:78},{number:23,name:"Al-Mu'minun",verses:118},{number:24,name:"An-Nur",verses:64},{number:25,name:"Al-Furqan",verses:77},{number:26,name:"Ash-Shu'ara",verses:227},{number:27,name:"An-Naml",verses:93},{number:28,name:"Al-Qasas",verses:88},{number:29,name:"Al-'Ankabut",verses:69},{number:30,name:"Ar-Rum",verses:60},{number:31,name:"Luqman",verses:34},{number:32,name:"As-Sajdah",verses:30},{number:33,name:"Al-Ahzab",verses:73},{number:34,name:"Saba",verses:54},{number:35,name:"Fatir",verses:45},{number:36,name:"Ya-Sin",verses:83},{number:37,name:"As-Saffat",verses:182},{number:38,name:"Sad",verses:88},{number:39,name:"Az-Zumar",verses:75},{number:40,name:"Ghafir",verses:85},{number:41,name:"Fussilat",verses:54},{number:42,name:"Ash-Shuraa",verses:53},{number:43,name:"Az-Zukhruf",verses:89},{number:44,name:"Ad-Dukhan",verses:59},{number:45,name:"Al-Jathiyah",verses:37},{number:46,name:"Al-Ahqaf",verses:35},{number:47,name:"Muhammad",verses:38},{number:48,name:"Al-Fath",verses:29},{number:49,name:"Al-Hujurat",verses:18},{number:50,name:"Qaf",verses:45},{number:51,name:"Adh-Dhariyat",verses:60},{number:52,name:"At-Tur",verses:49},{number:53,name:"An-Najm",verses:62},{number:54,name:"Al-Qamar",verses:55},{number:55,name:"Ar-Rahman",verses:78},{number:56,name:"Al-Waqi'ah",verses:96},{number:57,name:"Al-Hadid",verses:29},{number:58,name:"Al-Mujadila",verses:22},{number:59,name:"Al-Hashr",verses:24},{number:60,name:"Al-Mumtahanah",verses:13},{number:61,name:"As-Saff",verses:14},{number:62,name:"Al-Jumu'ah",verses:11},{number:63,name:"Al-Munafiqun",verses:11},{number:64,name:"At-Taghabun",verses:18},{number:65,name:"At-Talaq",verses:12},{number:66,name:"At-Tahrim",verses:12},{number:67,name:"Al-Mulk",verses:30},{number:68,name:"Al-Qalam",verses:52},{number:69,name:"Al-Haqqah",verses:52},{number:70,name:"Al-Ma'arij",verses:44},{number:71,name:"Nuh",verses:28},{number:72,name:"Al-Jinn",verses:28},{number:73,name:"Al-Muzzammil",verses:20},{number:74,name:"Al-Muddaththir",verses:56},{number:75,name:"Al-Qiyamah",verses:40},{number:76,name:"Al-Insan",verses:31},{number:77,name:"Al-Mursalat",verses:50},{number:78,name:"An-Naba",verses:40},{number:79,name:"An-Nazi'at",verses:46},{number:80,name:"Abasa",verses:42},{number:81,name:"At-Takwir",verses:29},{number:82,name:"Al-Infitar",verses:19},{number:83,name:"Al-Mutaffifin",verses:36},{number:84,name:"Al-Inshiqaq",verses:25},{number:85,name:"Al-Buruj",verses:22},{number:86,name:"At-Tariq",verses:17},{number:87,name:"Al-A'la",verses:19},{number:88,name:"Al-Ghashiyah",verses:26},{number:89,name:"Al-Fajr",verses:30},{number:90,name:"Al-Balad",verses:20},{number:91,name:"Ash-Shams",verses:15},{number:92,name:"Al-Layl",verses:21},{number:93,name:"Ad-Duhaa",verses:11},{number:94,name:"Ash-Sharh",verses:8},{number:95,name:"At-Tin",verses:8},{number:96,name:"Al-'Alaq",verses:19},{number:97,name:"Al-Qadr",verses:5},{number:98,name:"Al-Bayyinah",verses:8},{number:99,name:"Az-Zalzalah",verses:8},{number:100,name:"Al-'Adiyat",verses:11},{number:101,name:"Al-Qari'ah",verses:11},{number:102,name:"At-Takathur",verses:8},{number:103,name:"Al-'Asr",verses:3},{number:104,name:"Al-Humazah",verses:9},{number:105,name:"Al-Fil",verses:5},{number:106,name:"Quraysh",verses:4},{number:107,name:"Al-Ma'un",verses:7},{number:108,name:"Al-Kawthar",verses:3},{number:109,name:"Al-Kafirun",verses:6},{number:110,name:"An-Nasr",verses:3},{number:111,name:"Al-Masad",verses:5},{number:112,name:"Al-Ikhlas",verses:4},{number:113,name:"Al-Falaq",verses:5},{number:114,name:"An-Nas",verses:6}],r=e=>{let s=e.toLowerCase().replace(/[''`-]/g,"").replace(/^(al|at|an|ar|ad|as|ash|az)[\s-]*/i,"");return a.find(e=>{let t=e.name.toLowerCase().replace(/[''`-]/g,"").replace(/^(al|at|an|ar|ad|as|ash|az)[\s-]*/i,"");return t===s||t.includes(s)||s.includes(t)})}}},function(e){e.O(0,[9332,1799,8288,1664,7197,4033,1134,7220,318,2888,9774,179],function(){return e(e.s=20525)}),_N_E=e.O()}]);