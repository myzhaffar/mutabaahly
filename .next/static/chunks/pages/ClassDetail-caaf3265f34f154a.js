(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3811],{86241:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ClassDetail",function(){return s(75485)}])},24870:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(33592).Z)("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]])},21427:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(33592).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},19078:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(33592).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},12438:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(33592).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},17911:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(33592).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},56286:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(33592).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},22972:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(33592).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},98408:function(e,t,s){"use strict";s.d(t,{Z:function(){return v}});var r=s(85893),a=s(67294),n=s(88055),l=s(39332),i=s(69750),o=s(41664),d=s.n(o),c=s(95364),u=s(42964),m=s(92568),f=s(99737),x=s(37663),p=s(62487),h=s(89934),g=s(3498),b=s(55051),y=()=>{var e;let{profile:t,signOut:s}=(0,n.a)(),a=(0,l.useRouter)(),i=(0,l.usePathname)(),o=async()=>{await s(),a.push("/")},y=[{href:"/dashboard",label:"Dashboard",icon:m.Z},{href:"/students",label:"Student Rankings",mobileLabel:"Student Ranks",icon:f.Z},{href:"/tests/view",label:"Test Results",icon:x.Z},{href:"/profile",label:"Profile",icon:p.Z}],v=e=>i===e||"/dashboard"!==e&&(null==i?void 0:i.startsWith(e));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60",children:(0,r.jsx)("nav",{className:"container mx-auto px-4",children:(0,r.jsxs)("div",{className:"flex h-16 items-center justify-between md:justify-between",children:[(0,r.jsx)("div",{className:"flex-1 flex justify-center md:justify-start items-center gap-2",children:(0,r.jsxs)(d(),{href:"/dashboard",className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-9 h-9 bg-gradient-to-r from-green-400 to-teal-500 rounded-lg flex items-center justify-center shadow-sm",children:(0,r.jsx)("span",{className:"text-white font-bold text-xl",children:"M"})}),(0,r.jsx)("span",{className:"font-sf-pro font-semibold text-base bg-gradient-to-r from-green-400 to-teal-500 bg-clip-text text-transparent hidden sm:block",children:"Mutabaahly"})]})}),(0,r.jsx)("div",{className:"hidden md:flex items-center gap-6",children:y.map(e=>(0,r.jsxs)(d(),{href:e.href,className:"\n                    flex items-center gap-2 text-sm font-medium transition-colors\n                    ".concat(v(e.href)?"bg-gradient-to-r from-green-400 to-teal-500 bg-clip-text text-transparent":"text-gray-600 hover:bg-gradient-to-r hover:from-green-400 hover:to-teal-500 hover:bg-clip-text hover:text-transparent","\n                  "),children:[(0,r.jsx)(e.icon,{className:"h-4 w-4 ".concat(v(e.href)?"text-teal-500":"text-gray-600 group-hover:text-teal-500")}),e.label]},e.label))}),(0,r.jsx)("div",{className:"hidden md:flex items-center gap-4",children:(0,r.jsxs)(b.h_,{children:[(0,r.jsx)(b.$F,{asChild:!0,children:(0,r.jsxs)(c.z,{variant:"ghost",className:"flex items-center gap-2",children:[(0,r.jsx)(u.qE,{className:"h-8 w-8",children:(0,r.jsx)(u.Q5,{className:"bg-green-100 text-teal-700",children:null==t?void 0:null===(e=t.full_name)||void 0===e?void 0:e.split(" ").map(e=>e[0]).join("").toUpperCase()})}),(0,r.jsx)("span",{className:"text-sm font-medium bg-gradient-to-r from-green-400 to-teal-500 bg-clip-text text-transparent",children:null==t?void 0:t.full_name}),(0,r.jsx)(h.Z,{className:"h-4 w-4 text-teal-500"})]})}),(0,r.jsx)(b.AW,{align:"end",className:"w-48",children:(0,r.jsxs)(b.Xi,{onClick:o,className:"text-red-600",children:[(0,r.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),"Sign Out"]})})]})})]})})}),(0,r.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-50 md:hidden bg-white border-t shadow-lg",children:(0,r.jsx)("div",{className:"flex justify-around items-center h-14",children:y.map(e=>(0,r.jsxs)(d(),{href:e.href,className:"flex flex-col items-center justify-center flex-1 py-2 transition-colors ".concat(v(e.href)?"text-teal-600":"text-gray-400 hover:text-teal-500"),children:[(0,r.jsx)(e.icon,{className:"h-6 w-6 mb-0.5 ".concat(v(e.href)?"text-teal-600":"text-gray-400")}),(0,r.jsx)("span",{className:"text-xs font-medium",children:e.mobileLabel||e.label})]},e.label))})})]})},v=e=>{let{children:t,breadcrumbs:s}=e,{profile:o,loading:d}=(0,n.a)(),c=(0,l.useRouter)();return(a.useEffect(()=>{d||(null==o?void 0:o.role)==="parent"||c.push("/dashboard")},[d,o,c]),d)?(0,r.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-islamic-500"})}):(null==o?void 0:o.role)!=="parent"?null:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100 pt-0",children:[(0,r.jsx)(y,{}),s&&(0,r.jsx)("div",{className:"pt-6 px-4 lg:px-8",children:(0,r.jsx)(i.Z,{items:s})}),(0,r.jsx)("main",{className:"container mx-auto pt-2 pb-6 px-4 lg:px-8",children:(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:t})})]})}},14866:function(e,t,s){"use strict";s.d(t,{C:function(){return o}});var r=s(85893),a=s(67294),n=s(12003),l=s(27742);let i=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-islamic-500 text-white hover:bg-islamic-600",warning:"border-transparent bg-accent-500 text-white hover:bg-accent-600",info:"border-transparent bg-blue-500 text-white hover:bg-blue-600",neutral:"border-transparent bg-gray-400 text-white hover:bg-accent-500"},size:{default:"text-xs px-2.5 py-0.5",sm:"text-[10px] px-2 py-0.5",lg:"text-sm px-3 py-1"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:s,variant:a,size:n,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)(i({variant:a,size:n}),s),...o})});o.displayName="Badge"},50947:function(e,t,s){"use strict";s.d(t,{Ol:function(){return i},Zb:function(){return l},aY:function(){return d},ll:function(){return o}});var r=s(85893),a=s(67294),n=s(27742);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});l.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});i.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});o.displayName="CardTitle",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})}).displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});d.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},82698:function(e,t,s){"use strict";s.d(t,{X:function(){return o}});var r=s(85893),a=s(67294),n=s(46069),l=s(80906),i=s(27742);let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.fC,{ref:t,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...a,children:(0,r.jsx)(n.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})})});o.displayName=n.fC.displayName},55051:function(e,t,s){"use strict";s.d(t,{$F:function(){return u},AW:function(){return m},VD:function(){return x},Xi:function(){return f},h_:function(){return c}});var r=s(85893),a=s(67294),n=s(93133),l=s(47782),i=s(80906),o=s(50231),d=s(27742);let c=n.fC,u=n.xz;n.ZA,n.Uv,n.Tr,n.Ee,a.forwardRef((e,t)=>{let{className:s,inset:a,children:i,...o}=e;return(0,r.jsxs)(n.fF,{ref:t,className:(0,d.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",a&&"pl-8",s),...o,children:[i,(0,r.jsx)(l.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=n.fF.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.tu,{ref:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})}).displayName=n.tu.displayName;let m=a.forwardRef((e,t)=>{let{className:s,sideOffset:a=4,...l}=e;return(0,r.jsx)(n.Uv,{children:(0,r.jsx)(n.VY,{ref:t,sideOffset:a,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})})});m.displayName=n.VY.displayName;let f=a.forwardRef((e,t)=>{let{className:s,inset:a,...l}=e;return(0,r.jsx)(n.ck,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a&&"pl-8",s),...l})});f.displayName=n.ck.displayName,a.forwardRef((e,t)=>{let{className:s,children:a,checked:l,...o}=e;return(0,r.jsxs)(n.oC,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:l,...o,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})}),a]})}).displayName=n.oC.displayName,a.forwardRef((e,t)=>{let{className:s,children:a,...l}=e;return(0,r.jsxs)(n.Rk,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(o.Z,{className:"h-2 w-2 fill-current"})})}),a]})}).displayName=n.Rk.displayName,a.forwardRef((e,t)=>{let{className:s,inset:a,...l}=e;return(0,r.jsx)(n.__,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",s),...l})}).displayName=n.__.displayName;let x=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",s),...a})});x.displayName=n.Z0.displayName},87095:function(e,t,s){"use strict";s.d(t,{I:function(){return l}});var r=s(85893),a=s(67294),n=s(27742);let l=a.forwardRef((e,t)=>{let{className:s,type:a,...l}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...l})});l.displayName="Input"},75485:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Z}});var r=s(85893),a=s(67294),n=s(39332),l=s(58474),i=s(98408),o=s(88055),d=s(50947),c=s(56286),u=s(95364),m=s(14866),f=s(42964),x=s(17911),p=s(99737),h=s(37663),g=e=>{let{student:t,onViewDetails:s}=e,a=e=>{switch(e){case"completed":return"success";case"inProgress":return"info";default:return"neutral"}},n=e=>{switch(e){case"completed":return"Completed";case"inProgress":return"In Progress";case"notStarted":return"Not Started";default:return e}},l=e=>e>=80?"bg-islamic-500":e>=60?"bg-blue-500":e>=40?"bg-accent-500":"bg-gray-500";return(0,r.jsxs)(d.Zb,{className:"bg-white hover:shadow-xl transition-all duration-300 border-0 shadow-md rounded-xl overflow-hidden",children:[(0,r.jsx)(d.Ol,{className:"p-4 sm:p-6 pb-4 bg-gradient-to-r from-islamic-50 to-accent-50",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-center sm:items-center space-y-3 sm:space-y-0 sm:space-x-4 text-center sm:text-left",children:[(0,r.jsxs)(f.qE,{className:"h-16 w-16 border-3 border-white shadow-lg mx-auto sm:mx-0",children:[(0,r.jsx)(f.F$,{src:t.photo||"/avatars/placeholder.png",alt:t.name,className:"object-cover"}),(0,r.jsx)(f.Q5,{className:"bg-islamic-500 text-white text-lg font-semibold",children:t.name.split(" ").map(e=>e[0]).join("").substring(0,2)})]}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col items-center sm:items-start",children:[(0,r.jsx)(d.ll,{className:"text-lg font-bold text-gray-900 mb-1 text-center sm:text-left",children:t.name}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 justify-center sm:justify-start",children:[(0,r.jsx)(m.C,{variant:"outline",size:"sm",className:"border-islamic-500 text-islamic-700",children:t.class}),(0,r.jsxs)(m.C,{variant:"secondary",size:"sm",className:"bg-accent/10 text-accent-foreground/80",children:[(0,r.jsx)(x.Z,{className:"h-3 w-3 mr-1"}),t.studyGroup]})]})]})]})}),(0,r.jsxs)(d.aY,{className:"p-4 sm:p-6 space-y-5",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p.Z,{className:"h-5 w-5 text-islamic-600"}),(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-800",children:"Tahfidz Al-Quran"})]}),(0,r.jsx)(m.C,{variant:a(t.memorization.status),size:"sm",className:"whitespace-nowrap self-start sm:self-auto",children:n(t.memorization.status)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-xs text-gray-600",children:"Progress"}),(0,r.jsxs)("span",{className:"text-xs font-bold text-gray-800",children:[t.memorization.progress,"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 overflow-hidden",children:(0,r.jsx)("div",{className:"h-2.5 rounded-full transition-all duration-500 ".concat(l(t.memorization.progress)),style:{width:"".concat(t.memorization.progress,"%")}})}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Current: ",t.memorization.currentSurah]})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(h.Z,{className:"h-5 w-5 text-accent-600"}),(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-800",children:"Tahsin/Tilawati"})]}),(0,r.jsx)(m.C,{variant:a(t.tilawati.status),size:"sm",className:"whitespace-nowrap self-start sm:self-auto",children:n(t.tilawati.status)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-xs text-gray-600",children:"Progress"}),(0,r.jsxs)("span",{className:"text-xs font-bold text-gray-800",children:[t.tilawati.progress,"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 overflow-hidden",children:(0,r.jsx)("div",{className:"h-2.5 rounded-full transition-all duration-500 ".concat(l(t.tilawati.progress)),style:{width:"".concat(t.tilawati.progress,"%")}})}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Level: ",t.tilawati.currentLevel]})]})]}),(0,r.jsx)(u.z,{onClick:()=>s(t.id),className:"w-full mt-6 bg-gradient-to-r from-emerald-500 to-teal-400 hover:opacity-90 text-white shadow-lg rounded-full font-medium transition-all duration-300",children:"View Details"})]})]})},b=e=>{let{students:t,filteredStudents:s,onViewDetails:a,userRole:n}=e;return 0===s.length?(0,r.jsx)(d.Zb,{className:"bg-white shadow-sm",children:(0,r.jsxs)(d.aY,{className:"p-12 text-center",children:[(0,r.jsx)(c.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:0===t.length?"No Students Found":"No Students Match Your Filters"}),(0,r.jsx)("p",{className:"text-gray-600",children:0===t.length?"teacher"===n?"Start by adding students to your class.":"No students assigned to your account.":"Try adjusting your search or filter criteria."})]})}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.map(e=>{var t,s,n,l,i,o,d,c;return(0,r.jsx)(g,{student:{id:e.id,name:e.name,class:e.group_name,studyGroup:e.teacher,memorization:{progress:(null===(t=e.hafalan_progress)||void 0===t?void 0:t.percentage)||0,status:100===((null===(s=e.hafalan_progress)||void 0===s?void 0:s.percentage)||0)?"completed":((null===(n=e.hafalan_progress)||void 0===n?void 0:n.percentage)||0)>0?"inProgress":"notStarted",currentSurah:(null===(l=e.hafalan_progress)||void 0===l?void 0:l.last_surah)||"Not started"},tilawati:{progress:(null===(i=e.tilawah_progress)||void 0===i?void 0:i.percentage)||0,status:100===((null===(o=e.tilawah_progress)||void 0===o?void 0:o.percentage)||0)?"completed":((null===(d=e.tilawah_progress)||void 0===d?void 0:d.percentage)||0)>0?"inProgress":"notStarted",currentLevel:(null===(c=e.tilawah_progress)||void 0===c?void 0:c.jilid)||"Not started"}},onViewDetails:a},e.id)})})},y=s(87095),v=s(82698),j=s(70550),N=s(43463),w=s(21427),k=s(19078),C=s(22972),_=s(49175),Z=()=>{let e=(0,n.useParams)(),t=decodeURIComponent(null==e?void 0:e.className);console.log("DEBUG: className param:",t);let{profile:s}=(0,o.a)(),d=(0,n.useRouter)(),[c,u]=(0,a.useState)([]),[m,f]=(0,a.useState)(!0),[x,p]=(0,a.useState)(""),[h,g]=(0,a.useState)([]),[Z,R]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{f(!0);let{data:e,error:s}=await j.O.from("students").select("*").eq("group_name",t);if(console.log("DEBUG: studentsData:",e,"studentsError:",s),s||!e){u([]),f(!1);return}u(await Promise.all(e.map(async e=>{try{let{data:t}=await j.O.from("progress_entries").select("*").eq("student_id",e.id).eq("type","hafalan"),{data:s}=await j.O.from("progress_entries").select("*").eq("student_id",e.id).eq("type","tilawah"),r=(0,N.B)(t||[]),a=(0,N.L)(s||[]);return{...e,hafalan_progress:r.percentage>0?r:null,tilawah_progress:a.percentage>0?a:null}}catch(t){return{...e,hafalan_progress:null,tilawah_progress:null}}}))),f(!1)})()},[t]);let z=_.LQ,S=e=>{if(z.some(t=>t.id===e.teacher))return e.teacher;let t=z.find(t=>t.name===e.teacher);return t?t.id:e.teacher},E=c.filter(e=>e.name.toLowerCase().includes(x.toLowerCase())&&(0===h.length||h.includes(S(e)))),P=h.length>0,D=()=>g([]),M=[{label:"Dashboard",href:"/dashboard"},{label:t}],F=(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("button",{type:"button",onClick:()=>d.back(),className:"p-0 m-0 bg-transparent border-none outline-none flex items-center mr-2","aria-label":"Back",children:(0,r.jsx)(w.Z,{className:"h-6 w-6"})}),(0,r.jsxs)("h1",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[t,(0,r.jsx)("span",{className:"inline-flex items-center justify-center px-2 py-0.5 ml-1 text-xs font-semibold leading-none text-white bg-emerald-500 rounded-full",children:E.length})]})]})}),(0,r.jsxs)("div",{className:"sticky top-14 z-20 bg-gradient-to-br from-white to-gray-50 rounded-2xl shadow-lg border border-gray-200 mb-6 px-0 sm:px-0",children:[(0,r.jsx)("div",{className:"px-6 pt-6 pb-2",children:(0,r.jsx)(y.I,{placeholder:"Search students in this class...",value:x,onChange:e=>p(e.target.value),className:"w-full bg-gray-50 border border-gray-200 rounded-lg focus:border-blue-400 focus:ring-2 focus:ring-blue-100 text-base py-2 px-4 shadow-sm"})}),(0,r.jsx)("div",{className:"border-t border-gray-100 mx-6"}),(0,r.jsxs)("button",{type:"button",className:"w-full flex items-center gap-3 px-6 py-4 border-b border-gray-100 hover:bg-gray-50 focus:outline-none",onClick:()=>R(e=>!e),"aria-expanded":Z,children:[(0,r.jsx)("div",{className:"p-2 bg-blue-50 rounded-lg",children:(0,r.jsx)(k.Z,{className:"h-4 w-4 text-blue-600"})}),(0,r.jsxs)("div",{className:"flex-1 text-left",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 text-base sm:text-lg",children:"Teacher Filters"}),(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:"Select one or more teachers to filter students"}),P&&(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-wrap mt-2",children:[h.map(e=>{let t=z.find(t=>t.id===e);return(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 sm:px-3 sm:py-1 bg-blue-100 text-blue-700 text-xs sm:text-sm rounded-full border border-blue-200",children:[(null==t?void 0:t.name)||e,(0,r.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),g(t=>t.filter(t=>t!==e))},className:"ml-1 text-xs text-gray-400 hover:text-red-600","aria-label":"Remove teacher filter",children:(0,r.jsx)(C.Z,{className:"h-3 w-3"})})]},e)}),(0,r.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),D()},className:"ml-2 text-xs text-gray-500 hover:text-red-600 underline",children:"Clear Filters"})]})]}),(0,r.jsx)("span",{className:"ml-auto text-xs text-gray-500 font-medium",children:Z?"Hide":"Show"})]}),Z&&(0,r.jsx)("div",{className:"px-6 pb-6 pt-2",children:(0,r.jsx)("div",{className:"max-h-48 overflow-y-auto flex flex-col gap-2 pr-2",children:z.map(e=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(v.X,{id:"teacher-filter-".concat(e.id),checked:h.includes(e.id),onCheckedChange:()=>{g(t=>t.includes(e.id)?t.filter(t=>t!==e.id):[...t,e.id])},className:"rounded-full"}),(0,r.jsx)("label",{htmlFor:"teacher-filter-".concat(e.id),className:"text-sm text-gray-700 cursor-pointer",children:e.name})]},e.id))})})]}),m?(0,r.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Loading students..."}):(0,r.jsx)(b,{students:c.map(e=>({...e,grade:e.grade||"Unknown"})),filteredStudents:E.map(e=>({...e,grade:e.grade||"Unknown"})),onViewDetails:e=>{d.push("/student/".concat(e))},userRole:(null==s?void 0:s.role)||"parent"})]});return(null==s?void 0:s.role)==="parent"?(0,r.jsx)(i.Z,{breadcrumbs:M,children:F}):(0,r.jsx)(l.Z,{breadcrumbs:M,children:(0,r.jsx)("div",{className:"container mx-auto px-0 py-0 md:px-6 md:py-6",children:F})})}},46069:function(e,t,s){"use strict";s.d(t,{fC:function(){return j},z$:function(){return w}});var r=s(67294),a=s(28771),n=s(25360),l=s(36206),i=s(77342),o=s(57898),d=s(7546),c=s(29115),u=s(75320),m=s(85893),f="Checkbox",[x,p]=(0,n.b)(f),[h,g]=x(f);function b(e){let{__scopeCheckbox:t,checked:s,children:a,defaultChecked:n,disabled:l,form:o,name:d,onCheckedChange:c,required:u,value:x="on",internal_do_not_use_render:p}=e,[g,b]=(0,i.T)({prop:s,defaultProp:n??!1,onChange:c,caller:f}),[y,v]=r.useState(null),[j,N]=r.useState(null),w=r.useRef(!1),k=!y||!!o||!!y.closest("form"),C={checked:g,disabled:l,setChecked:b,control:y,setControl:v,name:d,form:o,value:x,hasConsumerStoppedPropagationRef:w,required:u,defaultChecked:!_(n)&&n,isFormControl:k,bubbleInput:j,setBubbleInput:N};return(0,m.jsx)(h,{scope:t,...C,children:"function"==typeof p?p(C):a})}var y="CheckboxTrigger",v=r.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:s,...n},i)=>{let{control:o,value:d,disabled:c,checked:f,required:x,setControl:p,setChecked:h,hasConsumerStoppedPropagationRef:b,isFormControl:v,bubbleInput:j}=g(y,e),N=(0,a.e)(i,p),w=r.useRef(f);return r.useEffect(()=>{let e=o?.form;if(e){let t=()=>h(w.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[o,h]),(0,m.jsx)(u.WV.button,{type:"button",role:"checkbox","aria-checked":_(f)?"mixed":f,"aria-required":x,"data-state":Z(f),"data-disabled":c?"":void 0,disabled:c,value:d,...n,ref:N,onKeyDown:(0,l.M)(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,l.M)(s,e=>{h(e=>!!_(e)||!e),j&&v&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})})});v.displayName=y;var j=r.forwardRef((e,t)=>{let{__scopeCheckbox:s,name:r,checked:a,defaultChecked:n,required:l,disabled:i,value:o,onCheckedChange:d,form:c,...u}=e;return(0,m.jsx)(b,{__scopeCheckbox:s,checked:a,defaultChecked:n,disabled:i,required:l,onCheckedChange:d,name:r,form:c,value:o,internal_do_not_use_render:({isFormControl:e})=>(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(v,{...u,ref:t,__scopeCheckbox:s}),e&&(0,m.jsx)(C,{__scopeCheckbox:s})]})})});j.displayName=f;var N="CheckboxIndicator",w=r.forwardRef((e,t)=>{let{__scopeCheckbox:s,forceMount:r,...a}=e,n=g(N,s);return(0,m.jsx)(c.z,{present:r||_(n.checked)||!0===n.checked,children:(0,m.jsx)(u.WV.span,{"data-state":Z(n.checked),"data-disabled":n.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});w.displayName=N;var k="CheckboxBubbleInput",C=r.forwardRef(({__scopeCheckbox:e,...t},s)=>{let{control:n,hasConsumerStoppedPropagationRef:l,checked:i,defaultChecked:c,required:f,disabled:x,name:p,value:h,form:b,bubbleInput:y,setBubbleInput:v}=g(k,e),j=(0,a.e)(s,v),N=(0,o.D)(i),w=(0,d.t)(n);r.useEffect(()=>{if(!y)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!l.current;if(N!==i&&e){let s=new Event("click",{bubbles:t});y.indeterminate=_(i),e.call(y,!_(i)&&i),y.dispatchEvent(s)}},[y,N,i,l]);let C=r.useRef(!_(i)&&i);return(0,m.jsx)(u.WV.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??C.current,required:f,disabled:x,name:p,value:h,form:b,...t,tabIndex:-1,ref:j,style:{...t.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function _(e){return"indeterminate"===e}function Z(e){return _(e)?"indeterminate":e?"checked":"unchecked"}C.displayName=k},57898:function(e,t,s){"use strict";s.d(t,{D:function(){return a}});var r=s(67294);function a(e){let t=r.useRef({value:e,previous:e});return r.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}}},function(e){e.O(0,[9332,1799,8288,1664,1063,318,7800,2888,9774,179],function(){return e(e.s=86241)}),_N_E=e.O()}]);