"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2804],{82804:function(e,t,a){var r=a(57437);a(2265);var n=a(27648),s=a(99376),l=a(53528),i=a(12381),o=a(96246),d=a(14938),c=a(33327),u=a(71769),f=a(67815),m=a(40875),h=a(47692),p=a(32060);t.Z=()=>{var e;let{profile:t,signOut:a}=(0,l.a)(),x=(0,s.useRouter)(),g=(0,s.usePathname)(),b=async()=>{await a(),x.push("/")},v=[{href:"/dashboard",label:"Dashboard",icon:d.Z},{href:"/students",label:"Student Rankings",mobileLabel:"Student Ranks",icon:c.Z},{href:"/tests/view",label:"Test Results",icon:u.Z},{href:"/profile",label:"Profile",icon:f.Z}],y=e=>g===e||"/dashboard"!==e&&(null==g?void 0:g.startsWith(e));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60",children:(0,r.jsx)("nav",{className:"container mx-auto px-4",children:(0,r.jsxs)("div",{className:"flex h-16 items-center justify-between md:justify-between",children:[(0,r.jsx)("div",{className:"flex-1 flex justify-center md:justify-start items-center gap-2",children:(0,r.jsxs)(n.default,{href:"/dashboard",className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-9 h-9 bg-gradient-to-r from-green-400 to-teal-500 rounded-lg flex items-center justify-center shadow-sm",children:(0,r.jsx)("span",{className:"text-white font-bold text-xl",children:"M"})}),(0,r.jsx)("span",{className:"font-sf-pro font-semibold text-base bg-gradient-to-r from-green-400 to-teal-500 bg-clip-text text-transparent hidden sm:block",children:"Mutabaahly"})]})}),(0,r.jsx)("div",{className:"hidden md:flex items-center gap-6",children:v.map(e=>(0,r.jsxs)(n.default,{href:e.href,className:"\n                    flex items-center gap-2 text-sm font-medium transition-colors\n                    ".concat(y(e.href)?"bg-gradient-to-r from-green-400 to-teal-500 bg-clip-text text-transparent":"text-gray-600 hover:bg-gradient-to-r hover:from-green-400 hover:to-teal-500 hover:bg-clip-text hover:text-transparent","\n                  "),children:[(0,r.jsx)(e.icon,{className:"h-4 w-4 ".concat(y(e.href)?"text-teal-500":"text-gray-600 group-hover:text-teal-500")}),e.label]},e.label))}),(0,r.jsx)("div",{className:"hidden md:flex items-center gap-4",children:(0,r.jsxs)(p.h_,{children:[(0,r.jsx)(p.$F,{asChild:!0,children:(0,r.jsxs)(i.z,{variant:"ghost",className:"flex items-center gap-2",children:[(0,r.jsx)(o.qE,{className:"h-8 w-8",children:(0,r.jsx)(o.Q5,{className:"bg-green-100 text-teal-700",children:null==t?void 0:null===(e=t.full_name)||void 0===e?void 0:e.split(" ").map(e=>e[0]).join("").toUpperCase()})}),(0,r.jsx)("span",{className:"text-sm font-medium bg-gradient-to-r from-green-400 to-teal-500 bg-clip-text text-transparent",children:null==t?void 0:t.full_name}),(0,r.jsx)(m.Z,{className:"h-4 w-4 text-teal-500"})]})}),(0,r.jsx)(p.AW,{align:"end",className:"w-48",children:(0,r.jsxs)(p.Xi,{onClick:b,className:"text-red-600",children:[(0,r.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),"Sign Out"]})})]})})]})})}),(0,r.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-50 md:hidden bg-white border-t shadow-lg",children:(0,r.jsx)("div",{className:"flex justify-around items-center h-14",children:v.map(e=>(0,r.jsxs)(n.default,{href:e.href,className:"flex flex-col items-center justify-center flex-1 py-2 transition-colors ".concat(y(e.href)?"text-teal-600":"text-gray-400 hover:text-teal-500"),children:[(0,r.jsx)(e.icon,{className:"h-6 w-6 mb-0.5 ".concat(y(e.href)?"text-teal-600":"text-gray-400")}),(0,r.jsx)("span",{className:"text-xs font-medium",children:e.mobileLabel||e.label})]},e.label))})})]})}},96246:function(e,t,a){a.d(t,{F$:function(){return o},Q5:function(){return d},qE:function(){return i}});var r=a(57437),n=a(2265),s=a(61146),l=a(93448);let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.fC,{ref:t,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...n})});i.displayName=s.fC.displayName;let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.Ee,{ref:t,className:(0,l.cn)("aspect-square h-full w-full",a),...n})});o.displayName=s.Ee.displayName;let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.NY,{ref:t,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...n})});d.displayName=s.NY.displayName},12381:function(e,t,a){a.d(t,{d:function(){return o},z:function(){return d}});var r=a(57437),n=a(2265),s=a(37053),l=a(90535),i=a(93448);let o=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 px-3",lg:"h-11 px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:a,variant:n,size:l,asChild:d=!1,...c}=e,u=d?s.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(o({variant:n,size:l,className:a})),ref:t,...c})});d.displayName="Button"},32060:function(e,t,a){a.d(t,{$F:function(){return u},AW:function(){return f},VD:function(){return h},Xi:function(){return m},h_:function(){return c}});var r=a(57437),n=a(2265),s=a(70085),l=a(10407),i=a(30401),o=a(40519),d=a(93448);let c=s.fC,u=s.xz;s.ZA,s.Uv,s.Tr,s.Ee,n.forwardRef((e,t)=>{let{className:a,inset:n,children:i,...o}=e;return(0,r.jsxs)(s.fF,{ref:t,className:(0,d.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",n&&"pl-8",a),...o,children:[i,(0,r.jsx)(l.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=s.fF.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.tu,{ref:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})}).displayName=s.tu.displayName;let f=n.forwardRef((e,t)=>{let{className:a,sideOffset:n=4,...l}=e;return(0,r.jsx)(s.Uv,{children:(0,r.jsx)(s.VY,{ref:t,sideOffset:n,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})})});f.displayName=s.VY.displayName;let m=n.forwardRef((e,t)=>{let{className:a,inset:n,...l}=e;return(0,r.jsx)(s.ck,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",a),...l})});m.displayName=s.ck.displayName,n.forwardRef((e,t)=>{let{className:a,children:n,checked:l,...o}=e;return(0,r.jsxs)(s.oC,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:l,...o,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(s.wU,{children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})}),n]})}).displayName=s.oC.displayName,n.forwardRef((e,t)=>{let{className:a,children:n,...l}=e;return(0,r.jsxs)(s.Rk,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(s.wU,{children:(0,r.jsx)(o.Z,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=s.Rk.displayName,n.forwardRef((e,t)=>{let{className:a,inset:n,...l}=e;return(0,r.jsx)(s.__,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",a),...l})}).displayName=s.__.displayName;let h=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...n})});h.displayName=s.Z0.displayName},14362:function(e,t,a){a.d(t,{H:function(){return i},V:function(){return l}});var r=a(57437),n=a(2265),s=a(1072);let l=(0,n.createContext)(void 0),i=e=>{let{children:t}=e,[a,i]=(0,n.useState)(null),[o,d]=(0,n.useState)(null),[c,u]=(0,n.useState)(null),[f,m]=(0,n.useState)(!0),h=async e=>{try{let{data:t,error:a}=await s.O.from("profiles").select("*").eq("id",e).single();if(a)console.error("Error fetching profile:",a);else if(t){let e={id:t.id,full_name:t.full_name,role:t.role,email:t.email,avatar_url:t.avatar_url,created_at:t.created_at,updated_at:t.updated_at};u(e)}}catch(e){console.error("Error in profile fetch:",e)}};(0,n.useEffect)(()=>{let{data:{subscription:e}}=s.O.auth.onAuthStateChange(async(e,t)=>{var a;console.log("Auth state changed:",e,t),d(t),i(null!==(a=null==t?void 0:t.user)&&void 0!==a?a:null),(null==t?void 0:t.user)?setTimeout(async()=>{await h(t.user.id),m(!1)},0):(u(null),m(!1))});return s.O.auth.getSession().then(e=>{var t;let{data:{session:a}}=e;d(a),i(null!==(t=null==a?void 0:a.user)&&void 0!==t?t:null),a||m(!1)}),()=>e.unsubscribe()},[]);let p=async()=>{a&&await h(a.id)},x=async(e,t)=>{let{data:a,error:r}=await s.O.auth.signInWithPassword({email:e,password:t});return{data:a,error:r}},g=async(e,t,a,r)=>{let{data:n,error:l}=await s.O.auth.signUp({email:e,password:t,options:{data:{full_name:a,role:r}}});if(n.user&&!l)try{await v(n.user,r)}catch(e){return console.error("Error creating profile:",e),await s.O.auth.admin.deleteUser(n.user.id),{data:{user:null,session:null},error:e}}return{data:n,error:l}},b=async()=>{try{let{error:e}=await s.O.auth.signOut();if(e)throw e;return i(null),d(null),u(null),{error:null}}catch(e){return console.error("Error signing out:",e),{error:e}}},v=async(e,t)=>{let{data:a,error:r}=await s.O.from("profiles").insert([{id:e.id,full_name:e.user_metadata.full_name||"",role:t,email:e.email||void 0,avatar_url:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(r)throw console.error("Error creating profile:",r),r;return a};return(0,r.jsx)(l.Provider,{value:{user:a,session:o,profile:c,loading:f,signIn:x,signUp:g,signOut:b,refreshProfile:p},children:t})}},53528:function(e,t,a){a.d(t,{a:function(){return s}});var r=a(2265),n=a(14362);let s=()=>{let e=(0,r.useContext)(n.V);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1072:function(e,t,a){a.d(t,{O:function(){return r}});let r=(0,a(96580).eI)("https://isyhakwwgdozgtlquzis.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlzeWhha3d3Z2Rvemd0bHF1emlzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY5NTY3NzcsImV4cCI6MjA2MjUzMjc3N30.-2Ya944q8mgJzRAuhMpRAWgxWVmt2yc3CqM0jjgFuuY")},93448:function(e,t,a){a.d(t,{cn:function(){return s}});var r=a(61994),n=a(53335);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m6)((0,r.W)(t))}}}]);