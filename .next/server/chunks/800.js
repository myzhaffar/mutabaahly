"use strict";exports.id=800,exports.ids=[800],exports.modules={12438:(e,a,r)=>{r.d(a,{Z:()=>n});let n=(0,r(33592).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},58474:(e,a,r)=>{r.a(e,async(e,n)=>{try{r.d(a,{Z:()=>o});var s=r(20997),l=r(16689),t=r.n(l),m=r(88055),u=r(39332),i=r(1462),A=r(69750),h=r(12438),d=e([i]);i=(d.then?(await d)():d)[0];let o=({children:e,breadcrumbs:a})=>{let{profile:r,loading:n}=(0,m.a)(),d=(0,u.useRouter)(),[o,b]=(0,l.useState)(!1);return(t().useEffect(()=>{n||r?.role==="teacher"||d.push("/dashboard")},[n,r,d]),n)?s.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-islamic-500"})}):r?.role!=="teacher"?null:(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,s.jsxs)("header",{className:"sticky top-0 z-40 bg-white shadow-sm flex items-center justify-between h-16 px-4 lg:px-8 lg:hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-teal-500 to-green-500 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-lg",children:"M"})}),s.jsx("span",{className:"font-semibold text-lg text-gray-900 hidden sm:inline",children:"Mutabaahly"})]}),s.jsx("button",{className:"lg:hidden p-2 rounded-md text-teal-700 hover:bg-teal-50",onClick:()=>b(e=>!e),children:s.jsx(h.Z,{className:"h-7 w-7"})})]}),s.jsx(i.Z,{isMobileMenuOpen:o,setIsMobileMenuOpen:b}),(0,s.jsxs)("main",{className:"lg:pl-64 min-h-screen",children:[a&&s.jsx("div",{className:"pt-6 px-4 lg:px-8",children:s.jsx(A.Z,{items:a})}),s.jsx("div",{className:"container mx-auto pt-2 pb-6 px-4 lg:px-8",children:s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e})})]})]})};n()}catch(e){n(e)}})},43463:(e,a,r)=>{r.d(a,{B:()=>s,L:()=>l});var n=r(81462);let s=e=>{if(!e||0===e.length)return{percentage:0,last_surah:null,total_verses:0};let a=[...e].sort((e,a)=>new Date(a.date).getTime()-new Date(e.date).getTime()),r=a[0].surah_or_jilid,s=(0,n.Ig)(r);if(!s)return{percentage:0,last_surah:r,total_verses:0};let l=new Date(a[0].date);for(let e=1;e<a.length;e++)if(a[e].surah_or_jilid!==r){l=new Date(a[0].date);break}let t=e.filter(e=>e.surah_or_jilid===r&&new Date(e.date)>=l),m=new Set;for(let e of t)if(e.ayat_or_page){let a=e.ayat_or_page;if(a.includes("-")){let[e,r]=a.split("-").map(e=>parseInt(e.trim()));if(!isNaN(e)&&!isNaN(r)&&r>=e)for(let a=e;a<=r;a++)a<=s.verses&&m.add(a)}else{let e=parseInt(a);!isNaN(e)&&e<=s.verses&&m.add(e)}}let u=m.size;return{percentage:Math.min(Math.round(u/s.verses*100),100),last_surah:r,total_verses:u,start_date:l.toISOString().split("T")[0]}},l=e=>{if(!e||0===e.length)return console.log("No entries provided for progress calculation"),{percentage:0,jilid:null,total_pages:0};let a=[...e].sort((e,a)=>new Date(a.date).getTime()-new Date(e.date).getTime())[0],r=0,n=null;if(a&&(n=a.surah_or_jilid,console.log("Latest entry:",a),a.ayat_or_page)){let e=a.ayat_or_page;if(console.log("Processing page range:",e),e&&e.includes("-")){let[,a]=e.split("-").map(e=>parseInt(e.trim()));isNaN(a)||(r=a)}else if(e){let a=parseInt(e.trim());isNaN(a)||(r=a)}}let s=Math.min(Math.round(r/44*100),100);return console.log("Calculated percentage:",s,"based on page",r,"out of",44),{percentage:s,jilid:n,total_pages:r}}},81462:(e,a,r)=>{r.d(a,{Ig:()=>s,n5:()=>n});let n=[{number:1,name:"Al-Fatihah",verses:7},{number:2,name:"Al-Baqarah",verses:286},{number:3,name:"Ali 'Imran",verses:200},{number:4,name:"An-Nisa",verses:176},{number:5,name:"Al-Ma'idah",verses:120},{number:6,name:"Al-An'am",verses:165},{number:7,name:"Al-A'raf",verses:206},{number:8,name:"Al-Anfal",verses:75},{number:9,name:"At-Tawbah",verses:129},{number:10,name:"Yunus",verses:109},{number:11,name:"Hud",verses:123},{number:12,name:"Yusuf",verses:111},{number:13,name:"Ar-Ra'd",verses:43},{number:14,name:"Ibrahim",verses:52},{number:15,name:"Al-Hijr",verses:99},{number:16,name:"An-Nahl",verses:128},{number:17,name:"Al-Isra",verses:111},{number:18,name:"Al-Kahf",verses:110},{number:19,name:"Maryam",verses:98},{number:20,name:"Taha",verses:135},{number:21,name:"Al-Anbya",verses:112},{number:22,name:"Al-Hajj",verses:78},{number:23,name:"Al-Mu'minun",verses:118},{number:24,name:"An-Nur",verses:64},{number:25,name:"Al-Furqan",verses:77},{number:26,name:"Ash-Shu'ara",verses:227},{number:27,name:"An-Naml",verses:93},{number:28,name:"Al-Qasas",verses:88},{number:29,name:"Al-'Ankabut",verses:69},{number:30,name:"Ar-Rum",verses:60},{number:31,name:"Luqman",verses:34},{number:32,name:"As-Sajdah",verses:30},{number:33,name:"Al-Ahzab",verses:73},{number:34,name:"Saba",verses:54},{number:35,name:"Fatir",verses:45},{number:36,name:"Ya-Sin",verses:83},{number:37,name:"As-Saffat",verses:182},{number:38,name:"Sad",verses:88},{number:39,name:"Az-Zumar",verses:75},{number:40,name:"Ghafir",verses:85},{number:41,name:"Fussilat",verses:54},{number:42,name:"Ash-Shuraa",verses:53},{number:43,name:"Az-Zukhruf",verses:89},{number:44,name:"Ad-Dukhan",verses:59},{number:45,name:"Al-Jathiyah",verses:37},{number:46,name:"Al-Ahqaf",verses:35},{number:47,name:"Muhammad",verses:38},{number:48,name:"Al-Fath",verses:29},{number:49,name:"Al-Hujurat",verses:18},{number:50,name:"Qaf",verses:45},{number:51,name:"Adh-Dhariyat",verses:60},{number:52,name:"At-Tur",verses:49},{number:53,name:"An-Najm",verses:62},{number:54,name:"Al-Qamar",verses:55},{number:55,name:"Ar-Rahman",verses:78},{number:56,name:"Al-Waqi'ah",verses:96},{number:57,name:"Al-Hadid",verses:29},{number:58,name:"Al-Mujadila",verses:22},{number:59,name:"Al-Hashr",verses:24},{number:60,name:"Al-Mumtahanah",verses:13},{number:61,name:"As-Saff",verses:14},{number:62,name:"Al-Jumu'ah",verses:11},{number:63,name:"Al-Munafiqun",verses:11},{number:64,name:"At-Taghabun",verses:18},{number:65,name:"At-Talaq",verses:12},{number:66,name:"At-Tahrim",verses:12},{number:67,name:"Al-Mulk",verses:30},{number:68,name:"Al-Qalam",verses:52},{number:69,name:"Al-Haqqah",verses:52},{number:70,name:"Al-Ma'arij",verses:44},{number:71,name:"Nuh",verses:28},{number:72,name:"Al-Jinn",verses:28},{number:73,name:"Al-Muzzammil",verses:20},{number:74,name:"Al-Muddaththir",verses:56},{number:75,name:"Al-Qiyamah",verses:40},{number:76,name:"Al-Insan",verses:31},{number:77,name:"Al-Mursalat",verses:50},{number:78,name:"An-Naba",verses:40},{number:79,name:"An-Nazi'at",verses:46},{number:80,name:"Abasa",verses:42},{number:81,name:"At-Takwir",verses:29},{number:82,name:"Al-Infitar",verses:19},{number:83,name:"Al-Mutaffifin",verses:36},{number:84,name:"Al-Inshiqaq",verses:25},{number:85,name:"Al-Buruj",verses:22},{number:86,name:"At-Tariq",verses:17},{number:87,name:"Al-A'la",verses:19},{number:88,name:"Al-Ghashiyah",verses:26},{number:89,name:"Al-Fajr",verses:30},{number:90,name:"Al-Balad",verses:20},{number:91,name:"Ash-Shams",verses:15},{number:92,name:"Al-Layl",verses:21},{number:93,name:"Ad-Duhaa",verses:11},{number:94,name:"Ash-Sharh",verses:8},{number:95,name:"At-Tin",verses:8},{number:96,name:"Al-'Alaq",verses:19},{number:97,name:"Al-Qadr",verses:5},{number:98,name:"Al-Bayyinah",verses:8},{number:99,name:"Az-Zalzalah",verses:8},{number:100,name:"Al-'Adiyat",verses:11},{number:101,name:"Al-Qari'ah",verses:11},{number:102,name:"At-Takathur",verses:8},{number:103,name:"Al-'Asr",verses:3},{number:104,name:"Al-Humazah",verses:9},{number:105,name:"Al-Fil",verses:5},{number:106,name:"Quraysh",verses:4},{number:107,name:"Al-Ma'un",verses:7},{number:108,name:"Al-Kawthar",verses:3},{number:109,name:"Al-Kafirun",verses:6},{number:110,name:"An-Nasr",verses:3},{number:111,name:"Al-Masad",verses:5},{number:112,name:"Al-Ikhlas",verses:4},{number:113,name:"Al-Falaq",verses:5},{number:114,name:"An-Nas",verses:6}],s=e=>{let a=e.toLowerCase().replace(/[''`-]/g,"").replace(/^(al|at|an|ar|ad|as|ash|az)[\s-]*/i,"");return n.find(e=>{let r=e.name.toLowerCase().replace(/[''`-]/g,"").replace(/^(al|at|an|ar|ad|as|ash|az)[\s-]*/i,"");return r===a||r.includes(a)||a.includes(r)})}},49175:(e,a,r)=>{r.d(a,{LQ:()=>o,X1:()=>t,_G:()=>d,tR:()=>l});var n=r(70550),s=r(43463);let l=async e=>{try{let a=n.O.from("students").select(`
        id,
        name,
        group_name,
        teacher
      `);if(e.teacher&&(a=a.eq("teacher",e.teacher)),e.grade&&"all"!==e.grade){if(e.grade.includes(",")){let r=e.grade.split(",").map(e=>e.trim()).filter(Boolean);a=a.in("group_name",r)}else a=a.eq("group_name",e.grade)}let{data:r,error:l}=await a;if(l)return console.error("Error fetching students for Tilawati ranking:",l),[];if(!r||0===r.length)return[];return(await Promise.all(r.map(async e=>{try{let{data:a}=await n.O.from("tilawah_progress").select("*").eq("student_id",e.id).maybeSingle(),{data:r}=await n.O.from("progress_entries").select("*").eq("student_id",e.id).eq("type","tilawah").order("date",{ascending:!1}),l=(0,s.L)(r||[]),t=a||{percentage:l.percentage,jilid:l.jilid,page:l.total_pages||0},u=t.jilid||l.jilid,i=m(u),A=t.page||l.total_pages||0;return{id:e.id,name:e.name,class:e.group_name||"Unknown",teacher:e.teacher||"Unknown",teacherId:e.teacher,grade:e.group_name||"Unknown",level:i,page:A,progress:t.percentage||l.percentage}}catch(a){return console.error(`Error processing student ${e.id}:`,a),{id:e.id,name:e.name,class:e.group_name||"Unknown",teacher:e.teacher||"Unknown",teacherId:e.teacher,grade:e.group_name||"Unknown",level:1,page:0,progress:0}}}))).filter(e=>e.level>0&&e.page>0).sort((e,a)=>e.level!==a.level?a.level-e.level:a.page-e.page)}catch(e){return console.error("Error in fetchTilawatiRankingData:",e),[]}},t=async e=>{try{let a=n.O.from("students").select(`
        id,
        name,
        group_name,
        teacher
      `);if(e.teacher){if(e.teacher.includes(",")){let r=e.teacher.split(",").map(e=>e.trim()).filter(Boolean);a=a.in("teacher",r)}else a=a.eq("teacher",e.teacher)}if(e.grade&&"all"!==e.grade){if(e.grade.includes(",")){let r=e.grade.split(",").map(e=>e.trim()).filter(Boolean);a=a.in("group_name",r)}else a=a.eq("group_name",e.grade)}let{data:r,error:l}=await a;if(l)return console.error("Error fetching students for Hafalan ranking:",l),[];if(!r||0===r.length)return[];return(await Promise.all(r.map(async e=>{try{let{data:a,error:r}=await n.O.from("progress_entries").select("*").eq("student_id",e.id).eq("type","hafalan").order("date",{ascending:!1});if(r)return console.error(`Error fetching hafalan entries for student ${e.id}:`,r),null;let l=(0,s.B)(a||[]),t=l.last_surah,m=A(t),u=m?.juz||null,i=h(a||[]);return{id:e.id,name:e.name,class:e.group_name||"Unknown",teacher:e.teacher||"Unknown",teacherId:e.teacher,grade:e.group_name||"Unknown",juz:u,surah:t,verse:i,progress:l.percentage}}catch(a){return console.error(`Error processing student ${e.id}:`,a),null}}))).filter(e=>null!==e&&"number"==typeof e.verse&&e.verse>0).sort((e,a)=>{if(30===e.juz&&30===a.juz){let r=u(e.surah),n=u(a.surah);return r!==n?r-n:a.verse-e.verse}if(30===e.juz)return -1;if(30===a.juz)return 1;if(null!==e.juz&&null!==a.juz&&e.juz!==a.juz)return a.juz-e.juz;if(null!==e.juz&&null===a.juz)return -1;if(null===e.juz&&null!==a.juz)return 1;let r=i(e.surah),n=i(a.surah);return r!==n?n-r:a.verse-e.verse})}catch(e){return console.error("Error in fetchHafalanRankingData:",e),[]}},m=e=>{if(!e)return 1;let a=e.match(/(?:Jilid|Level)\s*(\d+)/i)||e.match(/(\d+)/);return a?parseInt(a[1]):1},u=e=>e&&({"An-Naba":1,"An-Nazi'at":2,Abasa:3,"At-Takwir":4,"Al-Infitar":5,"Al-Mutaffifin":6,"Al-Inshiqaq":7,"Al-Buruj":8,"At-Tariq":9,"Al-A'la":10,"Al-Ghashiyah":11,"Al-Fajr":12,"Al-Balad":13,"Ash-Shams":14,"Al-Layl":15,"Ad-Duha":16,"Ash-Sharh":17,"At-Tin":18,"Al-Alaq":19,"Al-Qadr":20,"Al-Bayyinah":21,"Az-Zalzalah":22,"Al-Adiyat":23,"Al-Qari'ah":24,"At-Takathur":25,"Al-Asr":26,"Al-Humazah":27,"Al-Fil":28,Quraish:29,"Al-Ma'un":30,"Al-Kawthar":31,"Al-Kafirun":32,"An-Nasr":33,"Al-Masad":34,"Al-Ikhlas":35,"Al-Falaq":36,"An-Nas":37})[e]||999,i=e=>e&&({"Al-Fatiha":1,"Al-Baqarah":2,"Al-Imran":3,"An-Nisa":4,"Al-Ma'idah":5,"Al-An'am":6,"Al-A'raf":7,"Al-Anfal":8,"At-Tawbah":9,Yunus:10,Hud:11,Yusuf:12,"Ar-Ra'd":13,Ibrahim:14,"Al-Hijr":15,"An-Nahl":16,"Al-Isra":17,"Al-Kahf":18,Maryam:19,"Ta-Ha":20,"Al-Anbiya":21,"Al-Hajj":22,"Al-Mu'minun":23,"An-Nur":24,"Al-Furqan":25,"Ash-Shu'ara":26,"An-Naml":27,"Al-Qasas":28,"Al-Ankabut":29,"Ar-Rum":30,Luqman:31,"As-Sajdah":32,"Al-Ahzab":33,Saba:34,Fatir:35,"Ya-Sin":36,"As-Saffat":37,Sad:38,"Az-Zumar":39,Ghafir:40,Fussilat:41,"Ash-Shura":42,"Az-Zukhruf":43,"Ad-Dukhan":44,"Al-Jathiyah":45,"Al-Ahqaf":46,Muhammad:47,"Al-Fath":48,"Al-Hujurat":49,Qaf:50,"Adh-Dhariyat":51,"At-Tur":52,"An-Najm":53,"Al-Qamar":54,"Ar-Rahman":55,"Al-Waqi'ah":56,"Al-Hadid":57,"Al-Mujadilah":58,"Al-Hashr":59,"Al-Mumtahanah":60,"As-Saff":61,"Al-Jumu'ah":62,"Al-Munafiqun":63,"At-Taghabun":64,"At-Talaq":65,"At-Tahrim":66,"Al-Mulk":67,"Al-Qalam":68,"Al-Haqqah":69,"Al-Ma'arij":70,Nuh:71,"Al-Jinn":72,"Al-Muzzammil":73,"Al-Muddathir":74,"Al-Qiyamah":75,"Al-Insan":76,"Al-Mursalat":77,"An-Naba":78,"An-Nazi'at":79,Abasa:80,"At-Takwir":81,"Al-Infitar":82,"Al-Mutaffifin":83,"Al-Inshiqaq":84,"Al-Buruj":85,"At-Tariq":86,"Al-A'la":87,"Al-Ghashiyah":88,"Al-Fajr":89,"Al-Balad":90,"Ash-Shams":91,"Al-Layl":92,"Ad-Duha":93,"Ash-Sharh":94,"At-Tin":95,"Al-Alaq":96,"Al-Qadr":97,"Al-Bayyinah":98,"Az-Zalzalah":99,"Al-Adiyat":100,"Al-Qari'ah":101,"At-Takathur":102,"Al-Asr":103,"Al-Humazah":104,"Al-Fil":105,Quraish:106,"Al-Ma'un":107,"Al-Kawthar":108,"Al-Kafirun":109,"An-Nasr":110,"Al-Masad":111,"Al-Ikhlas":112,"Al-Falaq":113,"An-Nas":114})[e]||0,A=e=>e?{juz:["An-Naba","An-Nazi'at","Abasa","At-Takwir","Al-Infitar","Al-Mutaffifin","Al-Inshiqaq","Al-Buruj","At-Tariq","Al-A'la","Al-Ghashiyah","Al-Fajr","Al-Balad","Ash-Shams","Al-Layl","Ad-Duha","Ash-Sharh","At-Tin","Al-Alaq","Al-Qadr","Al-Bayyinah","Az-Zalzalah","Al-Adiyat","Al-Qari'ah","At-Takathur","Al-Asr","Al-Humazah","Al-Fil","Quraish","Al-Ma'un","Al-Kawthar","Al-Kafirun","An-Nasr","Al-Masad","Al-Ikhlas","Al-Falaq","An-Nas"].includes(e)?30:null}:null,h=e=>{if(!e||0===e.length)return 1;let a=1;for(let r of e)if(r.ayat_or_page){let e=r.ayat_or_page.trim();if(e.includes("-")){let r=e.split("-");if(2===r.length){let e=parseInt(r[0].trim()),n=parseInt(r[1].trim());isNaN(e)||isNaN(n)||(a=Math.max(a,n))}}else{let r=parseInt(e);isNaN(r)||(a=Math.max(a,r))}}return a},d=async()=>{try{let{data:e,error:a}=await n.O.from("students").select("group_name").not("group_name","is",null);if(a)return console.error("Error fetching grades:",a),[];return[...new Set(e?.map(e=>e.group_name).filter(Boolean))].map(e=>({id:e,name:e}))}catch(e){return console.error("Error in fetchGrades:",e),[]}},o=[{id:"titin",name:"Bu Titin"},{id:"witri",name:"Bu Witri"},{id:"lila",name:"Bu Lila"},{id:"alya",name:"Bu Alya"},{id:"liana",name:"Bu Liana"},{id:"talia",name:"Bu Talia"},{id:"liza",name:"Bu Liza"},{id:"zaedun",name:"Pak Zaedun"},{id:"heri",name:"Pak Heri"},{id:"sata",name:"Pak Sata"},{id:"kusnadi",name:"Pak Kusnadi"},{id:"riski",name:"Pak Riski"},{id:"hasib",name:"Pak Hasib"},{id:"muzhaffar",name:"Pak Muzhaffar"}]}};