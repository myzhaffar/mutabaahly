"use strict";(()=>{var e={};e.id=766,e.ids=[766,660],e.modules={42226:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{config:()=>j,default:()=>u,getServerSideProps:()=>g,getStaticPaths:()=>p,getStaticProps:()=>m,reportWebVitals:()=>f,routeModule:()=>_,unstable_getServerProps:()=>N,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>y});var r=s(87093),l=s(35244),i=s(1323),n=s(61682),d=s.n(n),o=s(48141),c=s.n(o),h=s(25113),x=e([h]);h=(x.then?(await x)():x)[0];let u=(0,i.l)(h,"default"),m=(0,i.l)(h,"getStaticProps"),p=(0,i.l)(h,"getStaticPaths"),g=(0,i.l)(h,"getServerSideProps"),j=(0,i.l)(h,"config"),f=(0,i.l)(h,"reportWebVitals"),y=(0,i.l)(h,"unstable_getStaticProps"),v=(0,i.l)(h,"unstable_getStaticPaths"),b=(0,i.l)(h,"unstable_getStaticParams"),N=(0,i.l)(h,"unstable_getServerProps"),w=(0,i.l)(h,"unstable_getServerSideProps"),_=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/StudentDetails",pathname:"/StudentDetails",bundlePath:"",filename:""},components:{App:c(),Document:d()},userland:h});a()}catch(e){a(e)}})},32604:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(33592).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},39163:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(33592).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},39803:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{Z:()=>y});var r=s(20997),l=s(16689),i=s(37435),n=s(95364),d=s(20362),o=s(87095),c=s(7825),h=s(9451),x=s(15659),u=s(36460),m=s(70550),p=s(12987),g=s(88055),j=s(81462),f=e([i,n,d,o,c,h,x]);[i,n,d,o,c,h,x]=f.then?(await f)():f;let y=({studentId:e,onProgressAdded:t})=>{let[s,a]=(0,l.useState)(!1),[f,y]=(0,l.useState)(!1),{profile:v}=(0,g.a)(),[b,N]=(0,l.useState)({type:"",date:new Date().toISOString().split("T")[0],surah_or_jilid:"",ayat_or_page:"",notes:""}),{toast:w}=(0,p.pm)();if(v?.role!=="teacher")return null;let _=async s=>{s.preventDefault(),y(!0);try{if(v?.role!=="teacher"){w({title:"Unauthorized",description:"Only teachers can add progress entries.",variant:"destructive"});return}let{error:s}=await m.O.from("progress_entries").insert([{student_id:e,...b}]);if(s)throw s;w({title:"Success",description:"Progress entry added successfully!"}),N({type:"",date:new Date().toISOString().split("T")[0],surah_or_jilid:"",ayat_or_page:"",notes:""}),a(!1),t()}catch(e){console.error("Error adding progress:",e),w({title:"Error",description:"Failed to add progress entry. Please try again.",variant:"destructive"})}finally{y(!1)}},S=(e,t)=>{N(s=>({...s,[e]:t}))};return(0,r.jsxs)(i.Vq,{open:s,onOpenChange:a,children:[r.jsx(i.hg,{asChild:!0,children:(0,r.jsxs)(n.z,{className:"bg-gradient-to-r from-emerald-500 to-teal-400 hover:opacity-90",children:[r.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"Add Progress"]})}),(0,r.jsxs)(i.cZ,{className:"sm:max-w-[425px]","aria-describedby":"add-progress-description",children:[(0,r.jsxs)(i.fK,{children:[r.jsx(i.$N,{children:"Add Daily Progress"}),r.jsx(i.Be,{id:"add-progress-description",children:"Fill in the details to add a new daily progress entry for the student."})]}),(0,r.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(c._,{htmlFor:"type",children:"Progress Type"}),(0,r.jsxs)(x.Ph,{value:b.type,onValueChange:e=>S("type",e),children:[r.jsx(x.i4,{children:r.jsx(x.ki,{placeholder:"Select progress type"})}),(0,r.jsxs)(x.Bw,{children:[r.jsx(x.Ql,{value:"hafalan",children:"Tahfidz"}),r.jsx(x.Ql,{value:"tilawah",children:"Tahsin"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(c._,{htmlFor:"date",children:"Date"}),r.jsx(o.I,{id:"date",type:"date",value:b.date,onChange:e=>S("date",e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(c._,{htmlFor:"surah_or_jilid",children:"hafalan"===b.type?"Surah":"Jilid/Level"}),"hafalan"===b.type?(0,r.jsxs)(x.Ph,{value:b.surah_or_jilid,onValueChange:e=>S("surah_or_jilid",e),children:[r.jsx(x.i4,{children:r.jsx(x.ki,{placeholder:"Select a surah"})}),r.jsx(x.Bw,{children:j.n5.map(e=>(0,r.jsxs)(x.Ql,{value:e.name,children:[e.name," (",e.verses," verses)"]},e.number))})]}):r.jsx(o.I,{id:"surah_or_jilid",value:b.surah_or_jilid,onChange:e=>S("surah_or_jilid",e.target.value),placeholder:"e.g., Jilid 1"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(c._,{htmlFor:"ayat_or_page",children:"hafalan"===b.type?"Ayat":"Page/Verse"}),r.jsx(o.I,{id:"ayat_or_page",value:b.ayat_or_page,onChange:e=>S("ayat_or_page",e.target.value),placeholder:"hafalan"===b.type?"e.g., 1-7":"e.g., Page 15"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(c._,{htmlFor:"notes",children:"Notes (Optional)"}),r.jsx(h.g,{id:"notes",value:b.notes,onChange:e=>S("notes",e.target.value),placeholder:"Additional notes about the progress..."})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[r.jsx(n.z,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),r.jsx(d.O,{type:"submit",disabled:f,children:f?"Adding...":"Add Progress"})]})]})]})]})};a()}catch(e){a(e)}})},48693:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{Z:()=>x});var r=s(20997),l=s(16689),i=s(11099),n=s(95364),d=s(91560),o=s(70550),c=s(12987),h=e([i,n]);[i,n]=h.then?(await h)():h;let x=({entryId:e,entryType:t,onProgressDeleted:s})=>{let[a,h]=(0,l.useState)(!1),{toast:x}=(0,c.pm)(),u=async()=>{h(!0);try{let{error:t}=await o.O.from("progress_entries").delete().eq("id",e);if(t)throw t;x({title:"Success",description:"Progress entry deleted successfully!"}),s()}catch(e){console.error("Error deleting progress:",e),x({title:"Error",description:"Failed to delete progress entry. Please try again.",variant:"destructive"})}finally{h(!1)}};return(0,r.jsxs)(i.aR,{children:[r.jsx(i.vW,{asChild:!0,children:r.jsx(n.z,{variant:"ghost",size:"sm",children:r.jsx(d.Z,{className:"h-4 w-4"})})}),(0,r.jsxs)(i._T,{children:[(0,r.jsxs)(i.fY,{children:[r.jsx(i.f$,{children:"Delete Progress Entry"}),(0,r.jsxs)(i.yT,{children:["Are you sure you want to delete this ",t," progress entry? This action cannot be undone."]})]}),(0,r.jsxs)(i.xo,{children:[r.jsx(i.le,{children:"Cancel"}),r.jsx(i.OL,{onClick:u,disabled:a,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:a?"Deleting...":"Delete"})]})]})]})};a()}catch(e){a(e)}})},74682:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{Z:()=>u});var r=s(20997),l=s(16689),i=s(11099),n=s(95364),d=s(91560),o=s(70550),c=s(12987),h=s(88055),x=e([i,n]);[i,n]=x.then?(await x)():x;let u=({studentId:e,studentName:t,onStudentDeleted:s})=>{let[a,x]=(0,l.useState)(!1),{toast:u}=(0,c.pm)(),{profile:m}=(0,h.a)();if(m?.role!=="teacher")return null;let p=async()=>{if(m?.role!=="teacher"){u({title:"Error",description:"You don't have permission to delete students.",variant:"destructive"});return}x(!0);try{await o.O.from("progress_entries").delete().eq("student_id",e),await o.O.from("hafalan_progress").delete().eq("student_id",e),await o.O.from("tilawah_progress").delete().eq("student_id",e);let{error:t}=await o.O.from("students").delete().eq("id",e);if(t)throw t;u({title:"Success",description:"Student deleted successfully!"}),s()}catch(e){console.error("Error deleting student:",e),u({title:"Error",description:"Failed to delete student. Please try again.",variant:"destructive"})}finally{x(!1)}};return(0,r.jsxs)(i.aR,{children:[r.jsx(i.vW,{asChild:!0,children:(0,r.jsxs)(n.z,{variant:"destructive",size:"sm",id:"delete-student-trigger",children:[r.jsx(d.Z,{className:"h-4 w-4 mr-2"}),"Delete"]})}),(0,r.jsxs)(i._T,{children:[(0,r.jsxs)(i.fY,{children:[r.jsx(i.f$,{children:"Are you sure?"}),(0,r.jsxs)(i.yT,{children:["This will permanently delete ",r.jsx("strong",{children:t})," and all their progress data. This action cannot be undone."]})]}),(0,r.jsxs)(i.xo,{children:[r.jsx(i.le,{children:"Cancel"}),r.jsx(i.OL,{onClick:p,disabled:a,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:a?"Deleting...":"Delete"})]})]})]})};a()}catch(e){a(e)}})},32759:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{Z:()=>j});var r=s(20997),l=s(16689),i=s(37435),n=s(95364),d=s(87095),o=s(7825),c=s(9451),h=s(15659),x=s(39163),u=s(70550),m=s(12987),p=s(81462),g=e([i,n,d,o,c,h]);[i,n,d,o,c,h]=g.then?(await g)():g;let j=({entry:e,onProgressUpdated:t})=>{let[s,a]=(0,l.useState)(!1),[g,j]=(0,l.useState)(!1),[f,y]=(0,l.useState)({date:e.date,surah_or_jilid:e.surah_or_jilid||"",ayat_or_page:e.ayat_or_page||"",notes:e.notes||""}),{toast:v}=(0,m.pm)(),b=async s=>{s.preventDefault(),j(!0);try{let{error:s}=await u.O.from("progress_entries").update(f).eq("id",e.id);if(s)throw s;v({title:"Success",description:"Progress updated successfully!"}),a(!1),t()}catch(e){console.error("Error updating progress:",e),v({title:"Error",description:"Failed to update progress. Please try again.",variant:"destructive"})}finally{j(!1)}},N=(e,t)=>{y(s=>({...s,[e]:t}))};return(0,r.jsxs)(i.Vq,{open:s,onOpenChange:a,children:[r.jsx(i.hg,{asChild:!0,children:r.jsx(n.z,{variant:"ghost",size:"sm",children:r.jsx(x.Z,{className:"h-4 w-4"})})}),(0,r.jsxs)(i.cZ,{className:"sm:max-w-[425px]","aria-describedby":"edit-progress-description",children:[(0,r.jsxs)(i.fK,{children:[(0,r.jsxs)(i.$N,{children:["Edit ","hafalan"===e.type?"Hafalan":"Tilawati"," Progress"]}),r.jsx(i.Be,{id:"edit-progress-description",children:"Update the progress details for this entry."})]}),(0,r.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{htmlFor:"date",children:"Date"}),r.jsx(d.I,{id:"date",type:"date",value:f.date,onChange:e=>N("date",e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{htmlFor:"surah_or_jilid",children:"hafalan"===e.type?"Surah":"Jilid/Level"}),"hafalan"===e.type?(0,r.jsxs)(h.Ph,{value:f.surah_or_jilid,onValueChange:e=>N("surah_or_jilid",e),children:[r.jsx(h.i4,{children:r.jsx(h.ki,{placeholder:"Select a surah"})}),r.jsx(h.Bw,{children:p.n5.map(e=>(0,r.jsxs)(h.Ql,{value:e.name,children:[e.name," (",e.verses," verses)"]},e.number))})]}):r.jsx(d.I,{id:"surah_or_jilid",value:f.surah_or_jilid,onChange:e=>N("surah_or_jilid",e.target.value),placeholder:"e.g., Jilid 1"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{htmlFor:"ayat_or_page",children:"hafalan"===e.type?"Ayat":"Page"}),r.jsx(d.I,{id:"ayat_or_page",value:f.ayat_or_page,onChange:e=>N("ayat_or_page",e.target.value),placeholder:"hafalan"===e.type?"e.g., 1-7":"e.g., 5"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{htmlFor:"notes",children:"Notes"}),r.jsx(c.g,{id:"notes",value:f.notes,onChange:e=>N("notes",e.target.value),placeholder:"Additional notes...",rows:3})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[r.jsx(n.z,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),r.jsx(n.z,{type:"submit",disabled:g,children:g?"Updating...":"Update Progress"})]})]})]})]})};a()}catch(e){a(e)}})},26114:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{Z:()=>f});var r=s(20997),l=s(16689),i=s(37435),n=s(95364),d=s(87095),o=s(7825),c=s(39163),h=s(70550),x=s(12987),u=s(32581),m=s(88055),p=s(15659),g=s(49175),j=e([i,n,d,o,u,p]);[i,n,d,o,u,p]=j.then?(await j)():j;let f=({student:e,onStudentUpdated:t})=>{let[s,a]=(0,l.useState)(!1),[j,f]=(0,l.useState)(!1),[y,v]=(0,l.useState)(null),[b,N]=(0,l.useState)({name:e.name,group_name:e.group_name,teacher:e.teacher}),{toast:w}=(0,x.pm)(),{profile:_}=(0,m.a)();if(_?.role!=="teacher")return null;let S=async t=>{try{let s=t.name.split(".").pop(),a=`${e.id}-${Math.random()}.${s}`,r=`student-photos/${a}`,{error:l}=await h.O.storage.from("student-photos").upload(r,t);if(l)throw l;let{data:i}=h.O.storage.from("student-photos").getPublicUrl(r);return i.publicUrl}catch(e){return console.error("Error uploading image:",e),null}},P=async s=>{if(s.preventDefault(),_?.role!=="teacher"){w({title:"Error",description:"You don't have permission to edit students.",variant:"destructive"});return}f(!0);try{let s=e.photo;if(y&&!(s=await S(y)))throw Error("Failed to upload image");let{error:r}=await h.O.from("students").update({...b,photo:s}).eq("id",e.id);if(r)throw r;w({title:"Success",description:"Student updated successfully!"}),a(!1),t()}catch(e){console.error("Error updating student:",e),w({title:"Error",description:"Failed to update student. Please try again.",variant:"destructive"})}finally{f(!1)}},C=(e,t)=>{N(s=>({...s,[e]:t}))};return(0,r.jsxs)(i.Vq,{open:s,onOpenChange:a,children:[r.jsx(i.hg,{asChild:!0,children:(0,r.jsxs)(n.z,{variant:"outline",size:"sm",id:"edit-student-trigger",children:[r.jsx(c.Z,{className:"h-4 w-4 mr-2"}),"Edit"]})}),(0,r.jsxs)(i.cZ,{className:"sm:max-w-[425px]","aria-describedby":"edit-student-description",children:[(0,r.jsxs)(i.fK,{children:[r.jsx(i.$N,{children:"Edit Student"}),r.jsx(i.Be,{id:"edit-student-description",children:"Update the student information below."})]}),(0,r.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{htmlFor:"photo",children:"Profile Photo"}),r.jsx(u.Z,{onFileSelect:v,currentImage:e.photo})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{htmlFor:"name",children:"Student Name"}),r.jsx(d.I,{id:"name",value:b.name,onChange:e=>C("name",e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{htmlFor:"group_name",children:"Group/Class"}),r.jsx(d.I,{id:"group_name",value:b.group_name,onChange:e=>C("group_name",e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{htmlFor:"teacher",children:"Teacher"}),(0,r.jsxs)(p.Ph,{value:b.teacher,onValueChange:e=>C("teacher",e),required:!0,children:[r.jsx(p.i4,{className:"w-full",children:r.jsx(p.ki,{placeholder:"Select teacher"})}),r.jsx(p.Bw,{children:g.LQ.map(e=>r.jsx(p.Ql,{value:e.name,children:e.name},e.id))})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[r.jsx(n.z,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),r.jsx(n.z,{type:"submit",disabled:j,children:j?"Updating...":"Update Student"})]})]})]})]})};a()}catch(e){a(e)}})},70657:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{Z:()=>m});var r=s(20997),l=s(16689),i=s.n(l),n=s(50947),d=s(21728),o=s(96485),c=s(95364),h=s(34067),x=s(70550),u=e([n,d,o,c,h]);[n,d,o,c,h]=u.then?(await u)():u;let m=({hafalanEntries:e,tilawahEntries:t,onProgressUpdated:s,studentId:a})=>{let[l,u]=i().useState(!1),m=async(e,t)=>{if(!a)return;let r={student_id:a,date:new Date().toISOString().split("T")[0],type:t.type,surah_or_jilid:t.surah_or_jilid,ayat_or_page:t.ayat_or_page,notes:t.notes},{error:l}=await x.O.from("progress_entries").insert([r]);l||s()};return(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between",children:[r.jsx(n.ll,{children:"Daily Progress Records"}),r.jsx(c.z,{variant:"outline",onClick:()=>u(!0),children:"Export"}),r.jsx(h.Z,{open:l,onOpenChange:u,hafalanEntries:e,tilawahEntries:t})]}),r.jsx(n.aY,{children:(0,r.jsxs)(d.mQ,{defaultValue:"hafalan",className:"w-full",children:[(0,r.jsxs)(d.dr,{className:"grid w-full grid-cols-2",children:[r.jsx(d.SP,{value:"hafalan",className:"data-[state=active]:bg-green-100 data-[state=active]:text-green-700",children:"Tahfidz"}),r.jsx(d.SP,{value:"tilawah",className:"data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700",children:"Tahsin"})]}),r.jsx(d.nU,{value:"hafalan",className:"mt-6",children:r.jsx(o.Z,{entries:e,type:"hafalan",onProgressUpdated:s,onDuplicateEntry:e=>m("hafalan",e)})}),r.jsx(d.nU,{value:"tilawah",className:"mt-6",children:r.jsx(o.Z,{entries:t,type:"tilawah",onProgressUpdated:s,onDuplicateEntry:e=>m("tilawah",e)})})]})})]})};a()}catch(e){a(e)}})},34067:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{Z:()=>f});var r=s(20997),l=s(16689),i=s.n(l),n=s(37435),d=s(95364),o=s(15659),c=s(6302),h=s(15158),x=s.n(h),u=s(11099),m=e([n,d,o,u]);[n,d,o,u]=m.then?(await m)():m;let p=e=>{let t=new Date(e);if(isNaN(t.getTime())){let t=e.split("-");if(3===t.length)return new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2]));throw Error(`Invalid date format: ${e}`)}return t},g=e=>{let t=new Date(e);return t.setHours(0,0,0,0),t},j=e=>{let t=new Date(e);return t.setHours(23,59,59,999),t},f=({open:e,onOpenChange:t,hafalanEntries:s,tilawahEntries:a})=>{let[h]=(0,l.useState)([...s,...a]),m=h.map(e=>({...e,parsedDate:p(e.date)})).sort((e,t)=>e.parsedDate.getTime()-t.parsedDate.getTime()),[f,y]=(0,l.useState)(!1),[v,b]=(0,l.useState)("today"),[N,w]=(0,l.useState)(null);i().useEffect(()=>{},[v,m.length]);let _=new Date,S=g(_),P=j(_),C=g(new Date(_.getFullYear(),_.getMonth(),_.getDate()-6)),D=g(new Date(_.getFullYear(),_.getMonth(),1)),E=j(new Date(_.getFullYear(),_.getMonth()+1,0)),Z=m,k="";"today"===v?(Z=m.filter(e=>e.parsedDate>=S&&e.parsedDate<=P),k=`Today (${S.toLocaleDateString()})`):"7days"===v?(Z=m.filter(e=>e.parsedDate>=C&&e.parsedDate<=P),k=`Last 7 Days (${C.toLocaleDateString()} - ${P.toLocaleDateString()})`):"month"===v&&(Z=m.filter(e=>e.parsedDate>=D&&e.parsedDate<=E),k=`This Month (${D.toLocaleDateString()} - ${E.toLocaleDateString()})`);let T=()=>{if(0!==Z.length){y(!0);try{let e=Z.map(e=>({Date:e.parsedDate.toLocaleDateString("en-CA"),Type:e.type,"Surah/Jilid":e.surah_or_jilid||"-","Ayat/Page":e.ayat_or_page||"-",Notes:e.notes||"-"})),s=c.utils.json_to_sheet(e),a=c.utils.decode_range(s["!ref"]||"A1"),r=[];for(let e=a.s.c;e<=a.e.c;++e){let t=10;for(let r=a.s.r;r<=a.e.r;++r){let a=s[c.utils.encode_cell({r:r,c:e})];if(a&&a.v){let e=a.v.toString().length;e>t&&(t=e)}}r.push({wch:Math.min(t+2,50)})}s["!cols"]=r;let l=c.utils.book_new();c.utils.book_append_sheet(l,s,"Progress Entries");let i=`progress_entries_${v}_${new Date().toLocaleDateString("en-CA")}.xlsx`;c.writeFile(l,i),t(!1)}catch(e){console.error("Error exporting Excel:",e)}finally{y(!1)}}},z=()=>{if(0!==Z.length){y(!0);try{let e=new(x());e.setFontSize(16),e.text("Progress Entries Report",20,20),e.setFontSize(10),e.text(k,20,30),e.text(`Total Entries: ${Z.length}`,20,35);let s=45;e.setFontSize(8),e.text("Date",20,s),e.text("Type",50,s),e.text("Surah/Jilid",80,s),e.text("Ayat/Page",120,s),e.text("Notes",150,s),e.line(20,s+2,190,s+2),s+=8,Z.forEach(t=>{s>280&&(e.addPage(),s=20,e.setFontSize(8),e.text("Date",20,s),e.text("Type",50,s),e.text("Surah/Jilid",80,s),e.text("Ayat/Page",120,s),e.text("Notes",150,s),e.line(20,s+2,190,s+2),s+=8),e.setFontSize(8),e.text(t.parsedDate.toLocaleDateString(),20,s),e.text(t.type,50,s),e.text(t.surah_or_jilid||"-",80,s),e.text(t.ayat_or_page||"-",120,s);let a=t.notes||"-",r=a.length>25?a.substring(0,25)+"...":a;e.text(r,150,s),s+=6});let a=`progress_entries_${v}_${new Date().toLocaleDateString("en-CA")}.pdf`;e.save(a),t(!1)}catch(e){console.error("Error exporting PDF:",e)}finally{y(!1)}}},F=()=>{"excel"===N&&T(),"pdf"===N&&z(),w(null)};return r.jsx(n.Vq,{open:e,onOpenChange:t,children:(0,r.jsxs)(n.cZ,{className:"max-w-md w-full p-6",children:[(0,r.jsxs)(n.fK,{children:[r.jsx(n.$N,{children:"Export Progress Entries"}),r.jsx(n.Be,{children:"Choose a range and export the student's progress as Excel or PDF."})]}),(0,r.jsxs)("div",{className:"mb-4 bg-gray-50 rounded p-3",children:[r.jsx("label",{className:"block mb-2 font-medium",children:"Select Range"}),(0,r.jsxs)(o.Ph,{value:v,onValueChange:e=>b(e),children:[r.jsx(o.i4,{className:"w-full",children:r.jsx(o.ki,{placeholder:"Select range"})}),(0,r.jsxs)(o.Bw,{children:[r.jsx(o.Ql,{value:"today",children:"This Day"}),r.jsx(o.Ql,{value:"7days",children:"Last 7 Days"}),r.jsx(o.Ql,{value:"month",children:"This Month"})]})]}),r.jsx("p",{className:"text-xs text-gray-600 mt-2 mb-1",children:k.replace(/'/g,"&apos;")}),(0,r.jsxs)("div",{className:"text-xs text-gray-600",children:[Z.length," entries will be exported."]}),Z.length>0&&r.jsx("div",{className:"mt-4 border rounded bg-white overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-xs",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-600",children:"Date"}),r.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-600",children:"Type"}),r.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-600",children:"Surah/Jilid"}),r.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-600",children:"Ayat/Page"}),r.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-600",children:"Notes"})]})}),r.jsx("tbody",{children:Z.map(e=>(0,r.jsxs)("tr",{className:"border-b last:border-0",children:[r.jsx("td",{className:"px-2 py-1",children:e.parsedDate.toLocaleDateString()}),r.jsx("td",{className:"px-2 py-1",children:e.type}),r.jsx("td",{className:"px-2 py-1",children:e.surah_or_jilid||"-"}),r.jsx("td",{className:"px-2 py-1",children:e.ayat_or_page||"-"}),r.jsx("td",{className:"px-2 py-1",children:e.notes?e.notes.length>20?e.notes.slice(0,20)+"...":e.notes:"-"})]},e.id))})]})})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 justify-end",children:[(0,r.jsxs)(u.aR,{children:[r.jsx(u.vW,{asChild:!0,children:r.jsx(d.z,{onClick:()=>w("excel"),disabled:f||0===Z.length,variant:"outline",className:"flex-1 transition-transform duration-200 hover:scale-105 border-2 border-gray-400 text-gray-700 hover:border-green-400 hover:bg-gradient-to-r hover:from-green-400 hover:to-teal-500 hover:text-white",children:"Export as Excel"})}),(0,r.jsxs)(u._T,{children:[(0,r.jsxs)(u.fY,{children:[r.jsx(u.f$,{children:"Confirm Export"}),r.jsx(u.yT,{children:`Are you sure you want to export progress for ${k}?`})]}),(0,r.jsxs)(u.xo,{children:[r.jsx(u.le,{onClick:()=>w(null),children:"Cancel"}),r.jsx(u.OL,{onClick:F,children:"Export"})]})]})]}),(0,r.jsxs)(u.aR,{children:[r.jsx(u.vW,{asChild:!0,children:r.jsx(d.z,{onClick:()=>w("pdf"),disabled:f||0===Z.length,variant:"outline",className:"flex-1 transition-transform duration-200 hover:scale-105 border-2 border-gray-400 text-gray-700 hover:border-green-400 hover:bg-gradient-to-r hover:from-green-400 hover:to-teal-500 hover:text-white",children:"Export as PDF"})}),(0,r.jsxs)(u._T,{children:[(0,r.jsxs)(u.fY,{children:[r.jsx(u.f$,{children:"Confirm Export"}),r.jsx(u.yT,{children:`Are you sure you want to export progress for ${k}?`})]}),(0,r.jsxs)(u.xo,{children:[r.jsx(u.le,{onClick:()=>w(null),children:"Cancel"}),r.jsx(u.OL,{onClick:F,children:"Export"})]})]})]}),r.jsx(n.GG,{asChild:!0,children:r.jsx(d.z,{variant:"ghost",className:"flex-1",children:"Cancel"})})]}),0===Z.length&&r.jsx("div",{className:"text-center text-sm text-red-500 mt-2",children:"No entries found in the selected range."}),0===h.length&&r.jsx("div",{className:"text-center text-sm text-gray-500 mt-2",children:"No entries available to export."})]})})};a()}catch(e){a(e)}})},96485:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{Z:()=>j});var r=s(20997),l=s(16689),i=s.n(l),n=s(70207),d=s(32759),o=s(48693),c=s(88055),h=s(32604),x=s(21427),u=s(47782),m=s(95364),p=s(15659),g=e([n,d,o,m,p]);[n,d,o,m,p]=g.then?(await g)():g;let j=({entries:e,type:t,onProgressUpdated:s,onDuplicateEntry:a})=>{let{profile:g}=(0,c.a)(),j=g?.role==="teacher",f="hafalan"===t,[y,v]=(0,l.useState)(10),[b,N]=(0,l.useState)(1),w=Math.ceil(e.length/y),_=e.slice((b-1)*y,b*y);return i().useEffect(()=>{N(1)},[e.length,y]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.iA,{children:[r.jsx(n.xD,{children:(0,r.jsxs)(n.SC,{children:[r.jsx(n.ss,{children:"Date"}),r.jsx(n.ss,{children:f?"Surah":"Jilid/Level"}),r.jsx(n.ss,{children:f?"Ayat":"Page/Verse"}),r.jsx(n.ss,{children:"Notes"}),j&&r.jsx(n.ss,{children:"Actions"})]})}),r.jsx(n.RM,{children:0===e.length?r.jsx(n.SC,{children:(0,r.jsxs)(n.pj,{colSpan:j?5:4,className:"text-center text-gray-500",children:["No ",t," progress recorded yet"]})}):_.map(e=>(0,r.jsxs)(n.SC,{children:[r.jsx(n.pj,{children:new Date(e.date).toLocaleDateString()}),r.jsx(n.pj,{children:e.surah_or_jilid||"-"}),r.jsx(n.pj,{children:e.ayat_or_page||"-"}),r.jsx(n.pj,{children:e.notes||"-"}),j&&r.jsx(n.pj,{children:(0,r.jsxs)("div",{className:"flex space-x-1",children:[r.jsx(d.Z,{entry:e,onProgressUpdated:s}),r.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded p-2 text-black transition-transform duration-150 hover:scale-110 hover:text-blue-600 focus:outline-none",title:"Duplicate",onClick:()=>a&&a(e),children:r.jsx(h.Z,{className:"h-4 w-4"})}),r.jsx(o.Z,{entryId:e.id,entryType:t,onProgressDeleted:s})]})})]},e.id))})]}),w>1||e.length>0?(0,r.jsxs)("div",{className:"px-4 py-3 border-t border-gray-200 bg-white gap-2 flex flex-col sm:flex-row sm:items-center sm:relative",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2 sm:mb-0",children:[r.jsx("span",{className:"text-xs text-gray-600",children:"Rows per page:"}),(0,r.jsxs)(p.Ph,{value:String(y),onValueChange:e=>v(Number(e)),children:[r.jsx(p.i4,{className:"w-16 h-8 text-xs",children:r.jsx(p.ki,{})}),(0,r.jsxs)(p.Bw,{children:[r.jsx(p.Ql,{value:"5",children:"5"}),r.jsx(p.Ql,{value:"10",children:"10"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 w-full sm:w-auto sm:ml-auto",children:[(0,r.jsxs)("span",{className:"text-xs text-gray-600 font-medium sm:absolute sm:left-1/2 sm:-translate-x-1/2 sm:w-auto",children:["Page ",b," of ",w]}),(0,r.jsxs)(m.z,{variant:"outline",size:"sm",onClick:()=>N(b-1),disabled:1===b,"aria-label":"Previous Page",className:"ml-2 sm:ml-4",children:[r.jsx(x.Z,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Previous"})]}),(0,r.jsxs)(m.z,{variant:"outline",size:"sm",onClick:()=>N(b+1),disabled:b===w,"aria-label":"Next Page",children:[r.jsx(u.Z,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Next"})]})]})]}):null]})};a()}catch(e){a(e)}})},8982:(e,t,s)=>{s.d(t,{Z:()=>i});var a=s(20997);s(16689);var r=s(39332),l=s(21427);let i=()=>{let e=(0,r.useRouter)();return a.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 sm:gap-0 mb-6",children:(0,a.jsxs)("div",{className:"flex flex-row items-center gap-4 w-full sm:w-auto",children:[a.jsx("button",{type:"button",onClick:()=>e.back(),className:"p-0 m-0 bg-transparent border-none outline-none flex items-center","aria-label":"Back",children:a.jsx(l.Z,{className:"h-6 w-6"})}),a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Student Details"})]})})}},7118:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{Z:()=>N});var r=s(20997);s(16689);var l=s(50947),i=s(81600),n=s(42964),d=s(88886),o=s(9464),c=s(91560),h=s(17911),x=s(99737),u=s(37663),m=s(39803),p=s(26114),g=s(74682),j=s(88055),f=s(55051),y=s(95364),v=s(14866),b=e([l,i,n,m,p,g,f,y,v]);[l,i,n,m,p,g,f,y,v]=b.then?(await b)():b;let N=({student:e,progressData:t,onProgressAdded:s,onStudentUpdated:a,onStudentDeleted:b})=>{let{profile:N}=(0,j.a)(),w=N?.role==="teacher",_=t?.hafalan_progress?.percentage||0,S=t?.hafalan_progress?.last_surah||"Not started",P=t?.tilawah_progress?.percentage||0,C=t?.tilawah_progress?.jilid||"Not started",D=e=>e>=80?"bg-islamic-500":e>=60?"bg-blue-500":e>=40?"bg-accent-500":"bg-gray-500";return r.jsx(l.Zb,{className:"mb-8",children:r.jsx(l.aY,{className:"p-4 sm:p-6",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start lg:space-x-6",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center mb-4 lg:mb-0 w-full lg:w-auto relative",children:[w&&r.jsx("div",{className:"absolute right-0 top-0 lg:hidden",children:(0,r.jsxs)(f.h_,{children:[r.jsx(f.$F,{asChild:!0,children:r.jsx(y.z,{variant:"ghost",size:"icon",className:"h-8 w-8",children:r.jsx(d.Z,{className:"h-4 w-4"})})}),(0,r.jsxs)(f.AW,{align:"end",children:[(0,r.jsxs)(f.Xi,{onSelect:()=>document.getElementById("edit-student-trigger")?.click(),children:[r.jsx(o.Z,{className:"mr-2 h-4 w-4"}),"Edit Profile"]}),(0,r.jsxs)(f.Xi,{className:"text-destructive focus:text-destructive",onSelect:()=>document.getElementById("delete-student-trigger")?.click(),children:[r.jsx(c.Z,{className:"mr-2 h-4 w-4"}),"Delete Profile"]})]})]})}),(0,r.jsxs)(n.qE,{className:"h-24 w-24 sm:h-28 sm:w-28 lg:h-32 lg:w-32",children:[r.jsx(n.F$,{src:e.photo||"",alt:e.name}),r.jsx(n.Q5,{className:"text-xl sm:text-2xl font-semibold bg-muted",children:e.name.split(" ").map(e=>e[0]).join("").toUpperCase()})]}),(0,r.jsxs)("div",{className:"block lg:hidden mt-4 w-full",children:[r.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-foreground text-center",children:e.name}),(0,r.jsxs)("div",{className:"flex flex-row flex-wrap gap-2 justify-center w-full mt-2",children:[r.jsx(v.C,{variant:"outline",className:"border-islamic-200 text-islamic-700",children:e.group_name}),(0,r.jsxs)(v.C,{variant:"secondary",className:"bg-accent/10 text-accent-foreground/80",children:[r.jsx(h.Z,{className:"h-3 w-3 mr-1"}),e.teacher]})]})]})]}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("div",{className:"hidden lg:block text-left mb-6",children:(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[r.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-foreground",children:e.name}),(0,r.jsxs)("div",{className:"flex flex-row flex-wrap gap-2 justify-start w-full",children:[r.jsx(v.C,{variant:"outline",className:"border-islamic-200 text-islamic-700",children:e.group_name}),(0,r.jsxs)(v.C,{variant:"secondary",className:"bg-accent/10 text-accent-foreground/80",children:[r.jsx(h.Z,{className:"h-3 w-3 mr-1"}),e.teacher]})]})]}),w&&(0,r.jsxs)(f.h_,{children:[r.jsx(f.$F,{asChild:!0,children:r.jsx(y.z,{variant:"ghost",size:"icon",className:"h-8 w-8",children:r.jsx(d.Z,{className:"h-4 w-4"})})}),(0,r.jsxs)(f.AW,{align:"end",children:[(0,r.jsxs)(f.Xi,{onSelect:()=>document.getElementById("edit-student-trigger")?.click(),children:[r.jsx(o.Z,{className:"mr-2 h-4 w-4"}),"Edit Profile"]}),(0,r.jsxs)(f.Xi,{className:"text-destructive focus:text-destructive",onSelect:()=>document.getElementById("delete-student-trigger")?.click(),children:[r.jsx(c.Z,{className:"mr-2 h-4 w-4"}),"Delete Profile"]})]})]})]})}),(0,r.jsxs)("div",{className:"hidden",children:[r.jsx(p.Z,{student:e,onStudentUpdated:a}),r.jsx(g.Z,{studentId:e.id,studentName:e.name,onStudentDeleted:b})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Progress Overview"}),w&&r.jsx(m.Z,{studentId:e.id,onProgressAdded:s})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-green-100 via-green-50 to-green-200 rounded-xl shadow-sm hover:shadow-md transition-shadow w-full h-full",children:(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center mb-3",children:[r.jsx(x.Z,{className:"h-6 w-6 text-green-600 mr-2"}),r.jsx("h3",{className:"font-semibold text-green-900",children:"Tahfidz Progress"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx(i.E,{value:_,className:"h-2.5",indicatorClassName:D(_)}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-foreground",children:[_,"% completed"]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:S})]})]})]})}),r.jsx("div",{className:"bg-gradient-to-r from-blue-100 via-blue-50 to-blue-200 rounded-xl shadow-sm hover:shadow-md transition-shadow w-full h-full",children:(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center mb-3",children:[r.jsx(u.Z,{className:"h-6 w-6 text-blue-600 mr-2"}),r.jsx("h3",{className:"font-semibold text-blue-900",children:"Tahsin Progress"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx(i.E,{value:P,className:"h-2.5",indicatorClassName:D(P)}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-foreground",children:[P,"% completed"]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:C})]})]})]})})]})]})]})]})})})};a()}catch(e){a(e)}})},14866:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{C:()=>c});var r=s(20997),l=s(16689),i=s(16926),n=s(27742),d=e([i,n]);[i,n]=d.then?(await d)():d;let o=(0,i.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-islamic-500 text-white hover:bg-islamic-600",warning:"border-transparent bg-accent-500 text-white hover:bg-accent-600",info:"border-transparent bg-blue-500 text-white hover:bg-blue-600",neutral:"border-transparent bg-gray-400 text-white hover:bg-accent-500"},size:{default:"text-xs px-2.5 py-0.5",sm:"text-[10px] px-2 py-0.5",lg:"text-sm px-3 py-1"}},defaultVariants:{variant:"default",size:"default"}}),c=l.forwardRef(({className:e,variant:t,size:s,...a},l)=>r.jsx("div",{ref:l,className:(0,n.cn)(o({variant:t,size:s}),e),...a}));c.displayName="Badge",a()}catch(e){a(e)}})},81600:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{E:()=>o});var r=s(20997),l=s(16689),i=s(6005),n=s(27742),d=e([i,n]);[i,n]=d.then?(await d)():d;let o=l.forwardRef(({className:e,value:t,indicatorClassName:s,...a},l)=>r.jsx(i.Root,{ref:l,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...a,children:r.jsx(i.Indicator,{className:(0,n.cn)("h-full w-full flex-1 bg-primary transition-all",s),style:{transform:`translateX(-${100-(t||0)}%)`}})}));o.displayName=i.Root.displayName,a()}catch(e){a(e)}})},70207:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{RM:()=>c,SC:()=>h,iA:()=>d,pj:()=>u,ss:()=>x,xD:()=>o});var r=s(20997),l=s(16689),i=s(27742),n=e([i]);i=(n.then?(await n)():n)[0];let d=l.forwardRef(({className:e,...t},s)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:s,className:(0,i.cn)("w-full caption-bottom text-sm",e),...t})}));d.displayName="Table";let o=l.forwardRef(({className:e,...t},s)=>r.jsx("thead",{ref:s,className:(0,i.cn)("[&_tr]:border-b",e),...t}));o.displayName="TableHeader";let c=l.forwardRef(({className:e,...t},s)=>r.jsx("tbody",{ref:s,className:(0,i.cn)("[&_tr:last-child]:border-0",e),...t}));c.displayName="TableBody",l.forwardRef(({className:e,...t},s)=>r.jsx("tfoot",{ref:s,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let h=l.forwardRef(({className:e,...t},s)=>r.jsx("tr",{ref:s,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));h.displayName="TableRow";let x=l.forwardRef(({className:e,...t},s)=>r.jsx("th",{ref:s,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));x.displayName="TableHead";let u=l.forwardRef(({className:e,...t},s)=>r.jsx("td",{ref:s,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));u.displayName="TableCell",l.forwardRef(({className:e,...t},s)=>r.jsx("caption",{ref:s,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption",a()}catch(e){a(e)}})},21728:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{SP:()=>h,dr:()=>c,mQ:()=>o,nU:()=>x});var r=s(20997),l=s(16689),i=s(6860),n=s(27742),d=e([i,n]);[i,n]=d.then?(await d)():d;let o=i.Root,c=l.forwardRef(({className:e,...t},s)=>r.jsx(i.List,{ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));c.displayName=i.List.displayName;let h=l.forwardRef(({className:e,...t},s)=>r.jsx(i.Trigger,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));h.displayName=i.Trigger.displayName;let x=l.forwardRef(({className:e,...t},s)=>r.jsx(i.Content,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));x.displayName=i.Content.displayName,a()}catch(e){a(e)}})},9451:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{g:()=>d});var r=s(20997),l=s(16689),i=s(27742),n=e([i]);i=(n.then?(await n)():n)[0];let d=l.forwardRef(({className:e,...t},s)=>r.jsx("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));d.displayName="Textarea",a()}catch(e){a(e)}})},60121:(e,t,s)=>{s.d(t,{Z:()=>n});var a=s(16689),r=s(70550),l=s(43463),i=s(88055);let n=e=>{let{profile:t}=(0,i.a)(),[s,n]=(0,a.useState)(null),[d,o]=(0,a.useState)({hafalan_progress:null,tilawah_progress:null}),[c,h]=(0,a.useState)([]),[x,u]=(0,a.useState)([]),[m,p]=(0,a.useState)(!0),g=async()=>{try{if(!e||!t){n(null);return}let{data:s,error:a}=await r.O.from("students").select("*").eq("id",e).maybeSingle();if(a)throw a;if(!s){n(null);return}n(s)}catch(e){console.error("Error fetching student data:",e),n(null)}finally{p(!1)}},j=async()=>{try{if(!s||!e)return;let{data:a,error:i}=await r.O.from("progress_entries").select("*").eq("student_id",e).order("date",{ascending:!1});if(i)throw i;let n=a?.filter(e=>"hafalan"===e.type)||[],d=a?.filter(e=>"tilawah"===e.type)||[];h(n),u(d);let c=(0,l.B)(n),x=(0,l.L)(d);o({hafalan_progress:c.percentage>0?c:null,tilawah_progress:x.percentage>0?x:null}),t?.role==="teacher"&&(n.length>0&&e&&await r.O.from("hafalan_progress").upsert({student_id:e,percentage:c.percentage,last_surah:c.last_surah,updated_at:new Date().toISOString()}),d.length>0&&e&&await r.O.from("tilawah_progress").upsert({student_id:e,percentage:x.percentage,jilid:x.jilid,updated_at:new Date().toISOString()}))}catch(e){console.error("Error fetching progress entries:",e)}};return(0,a.useEffect)(()=>{e&&g()},[e,t]),(0,a.useEffect)(()=>{s&&j()},[s]),{student:s,progressData:d,hafalanEntries:c,tilawahEntries:x,loading:m,refetchData:()=>{g(),j()}}}},25113:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>p});var r=s(20997);s(16689);var l=s(39332),i=s(95364),n=s(8982),d=s(7118),o=s(70657),c=s(60121),h=s(88055),x=s(58474),u=s(6406),m=e([i,d,o,x,u]);[i,d,o,x,u]=m.then?(await m)():m;let p=()=>{let e=(0,l.useParams)(),t=e?.id,s=(0,l.useRouter)(),{profile:a}=(0,h.a)(),{student:m,progressData:p,hafalanEntries:g,tilawahEntries:j,loading:f,refetchData:y}=(0,c.Z)(t);if(f)return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-islamic-500"})});if(!m)return r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsx("div",{className:"container mx-auto px-6 py-8",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Student Not Found"}),r.jsx(i.z,{onClick:()=>s.back(),children:"Back"})]})})});let v=[{label:"Dashboard",href:"/dashboard"},{label:m.group_name,href:`/class/${encodeURIComponent(m.group_name)}`},{label:m.name}],b=(0,r.jsxs)(r.Fragment,{children:[r.jsx(n.Z,{student:{...m,grade:m.grade||"Unknown"},userRole:a?.role||"parent",profile:a||void 0}),r.jsx(d.Z,{student:m,progressData:p,onProgressAdded:y,onStudentUpdated:y,onStudentDeleted:()=>{s.push("/dashboard")}}),r.jsx(o.Z,{hafalanEntries:g,tilawahEntries:j,onProgressUpdated:y,studentId:m.id})]});return a?.role==="parent"?r.jsx(u.Z,{breadcrumbs:v,children:b}):r.jsx(x.Z,{breadcrumbs:v,children:b})};a()}catch(e){a(e)}})},92885:e=>{e.exports=require("@supabase/supabase-js")},15158:e=>{e.exports=require("jspdf")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},62785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},16689:e=>{e.exports=require("react")},20997:e=>{e.exports=require("react/jsx-runtime")},6302:e=>{e.exports=require("xlsx")},55315:e=>{e.exports=require("path")},32131:e=>{e.exports=import("@radix-ui/react-alert-dialog")},25458:e=>{e.exports=import("@radix-ui/react-avatar")},77715:e=>{e.exports=import("@radix-ui/react-dialog")},31481:e=>{e.exports=import("@radix-ui/react-dropdown-menu")},10049:e=>{e.exports=import("@radix-ui/react-label")},6005:e=>{e.exports=import("@radix-ui/react-progress")},3567:e=>{e.exports=import("@radix-ui/react-select")},14338:e=>{e.exports=import("@radix-ui/react-slot")},6860:e=>{e.exports=import("@radix-ui/react-tabs")},16926:e=>{e.exports=import("class-variance-authority")},16593:e=>{e.exports=import("clsx")},68097:e=>{e.exports=import("tailwind-merge")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[682,54,840,944,800,930,172],()=>s(42226));module.exports=a})();